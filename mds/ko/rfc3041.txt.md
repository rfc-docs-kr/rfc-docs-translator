

```text
Network Working Group                                          T. Narten
Request for Comments: 3041                                           IBM
Category: Standards Track                                      R. Draves
                                                      Microsoft Research
                                                            January 2001
```

IPv6의 상태 비저장 주소 자동 구성을 위한 개인 정보 보호 확장

---
# **Status of this Memo**

이 문서는 인터넷 커뮤니티를 위한 인터넷 표준 추적 프로토콜을 지정하고 개선을 위한 토론 및 제안을 요청합니다. 이 프로토콜의 표준화 상태 및 상태에 대해서는 "Internet Official Protocol Standards"\(STD 1\) 최신판을 참조하십시오. 이 메모의 배포는 무제한입니다.

---
# **Copyright Notice**

Copyright \(C\) The Internet Society \(2001\). 판권 소유.

---
# **Abstract**

노드는 DHCP\(동적 호스트 구성 프로토콜\) 서버 없이도 IPv6 상태 비저장 주소 자동 구성을 사용하여 주소를 생성합니다. 주소는 네트워크 접두사와 인터페이스 식별자를 결합하여 구성됩니다. 내장형 IEEE 식별자가 포함된 인터페이스에서 인터페이스 식별자는 일반적으로 여기에서 파생됩니다. 다른 인터페이스 유형에서는 인터페이스 식별자가 난수 생성 등의 다른 수단을 통해 생성됩니다. 이 문서에서는 인터페이스 식별자가 IEEE 식별자에서 파생된 인터페이스에 대한 IPv6 상태 비저장 주소 자동 구성의 확장에 대해 설명합니다. 확장을 사용하면 인터페이스에 내장된 IEEE 식별자가 포함된 경우에도 노드가 시간이 지남에 따라 변경되는 인터페이스 식별자로부터 전역 범위 주소를 생성하게 됩니다. 시간이 지남에 따라 인터페이스 식별자\(및 여기에서 생성된 전역 범위 주소\)를 변경하면 도청자와 기타 정보 수집자가 서로 다른 트랜잭션에 사용된 서로 다른 주소가 실제로 동일한 노드에 해당하는지 식별하기가 더 어려워집니다.

---
# **Table of Contents**

```text
   1.  Introduction.............................................    2
   2.  Background...............................................    3
      2.1.  Extended Use of the Same Identifier.................    3
      2.2.  Address Usage in IPv4 Today.........................    4
      2.3.  The Concern With IPv6 Addresses.....................    5
      2.4.  Possible Approaches.................................    6
   3.  Protocol Description.....................................    7
      3.1.  Assumptions.........................................    8
      3.2.  Generation Of Randomized Interface Identifiers......    9
      3.3.  Generating Temporary Addresses......................   10
      3.4.  Expiration of Temporary Addresses...................   11
      3.5.  Regeneration of Randomized Interface Identifiers....   12
   4.  Implications of Changing Interface Identifiers...........   13
   5.  Defined Constants........................................   14
   6.  Future Work..............................................   14
   7.  Security Considerations..................................   15
   8.  Acknowledgments..........................................   15
   9.  References...............................................   15
   10. Authors' Addresses.......................................   16
   11. Full Copyright Statement.................................   17
```

---
## **1.  Introduction**

상태 비저장 주소 자동 구성\[ADDRCONF\]은 DHCP 서버 없이 IPv6 노드가 주소를 생성하는 방법을 정의합니다. 일부 유형의 네트워크 인터페이스에는 IEEE 식별자\(예: 링크 계층 MAC 주소\)가 내장되어 있으며, 이러한 경우 상태 비저장 주소 자동 구성은 IEEE 식별자를 사용하여 64비트 인터페이스 식별자\[ADDRARCH\]를 생성합니다. 설계상 인터페이스 식별자는 이러한 방식으로 생성될 때 전역적으로 고유할 가능성이 높습니다. 인터페이스 식별자는 접두사에 추가되어 128비트 IPv6 주소를 형성합니다.

모든 노드는 인터페이스 식별자\(IEEE 식별자에서 파생되었거나 다른 기술을 통해 생성되었는지 여부\)를 예약된 링크 로컬 접두사와 결합하여 연결된 인터페이스에 대한 링크 로컬 주소를 생성합니다. 그런 다음 사이트 로컬 및 전역 범위 주소를 포함한 추가 주소는 Neighbor Discovery\[DISCOVERY\]를 통해 라우터 광고에 광고된 접두사를 인터페이스 식별자와 결합하여 생성됩니다.

모든 노드와 인터페이스에 IEEE 식별자가 포함되어 있는 것은 아닙니다. 이러한 경우 인터페이스 식별자는 다른 수단\(예: 무작위\)을 통해 생성되며 결과 인터페이스 식별자는 전역적으로 고유하지 않으며 시간이 지남에 따라 변경될 수도 있습니다. 이 문서의 초점은 IEEE 식별자에서 파생된 주소에 있습니다.

해결하려는 문제는 인터페이스 식별자가 전역적으로 고유하고 변경되지 않는 경우에만 존재합니다. 이 문서의 나머지 부분에서는 IEEE 식별자가 사용되고 있다고 가정하지만 설명된 기술은 다른 유형의 전역 고유 및/또는 영구 식별자와의 인터페이스에도 적용될 수 있습니다.

이 문서에서는 IPv6 주소 내에 변경되지 않는 인터페이스 식별자를 삽입하는 것과 관련된 문제를 논의하고 개별 사용자 및 그러한 문제가 중요한 환경에서 이러한 문제를 완화하는 데 도움이 될 수 있는 상태 비저장 주소 자동 구성에 대한 확장에 대해 설명합니다. 섹션 2에서는 문제에 대한 배경 정보를 제공합니다. 섹션 3에서는 대체 인터페이스 식별자와 전역 범위 주소를 생성하는 절차를 설명합니다. 섹션 4에서는 인터페이스 식별자 변경의 의미에 대해 설명합니다.

---
## **2.  Background**

이 섹션에서는 문제를 더 자세히 논의하고, 특정 환경에서 문제의 중요성을 평가하기 위한 맥락을 제공하며, 기존 관행과 비교합니다.

---
### **2.1.  Extended Use of the Same Identifier**

주소를 형성하기 위해 변경되지 않는 인터페이스 식별자를 사용하는 것은 상수 식별자가 장기간에 걸쳐 여러 독립적인 활동에서 재사용되는 보다 일반적인 경우의 특정 사례입니다. 동일한 식별자가 여러 컨텍스트에서 사용될 때마다 해당 식별자를 사용하여 겉보기에는 관련이 없어 보이는 활동을 연관시키는 것이 가능해집니다. 예를 들어, 특정 호스트로 들어오고 나가는 모든 트래픽이 교차하는 링크에 전략적으로 배치된 네트워크 스니퍼는 노드가 어느 대상과 통신했는지, 언제 통신했는지 추적할 수 있습니다. 이러한 정보는 경우에 따라 직원이 활동한 시간, 집에 있는 시간 등을 추론하는 데 사용될 수 있습니다.

겉보기에 관련이 없어 보이는 활동을 연관시키기 위한 요구 사항 중 하나는 시간이 지남에 따라 다양한 컨텍스트 내에서 인식할 수 있는 식별자를 사용\(및 재사용\)하는 것입니다. IP 주소는 하나의 분명한 예를 제공하지만 그 이상도 있습니다. 또한 많은 노드에는 해당 주소와 연결된 DNS 이름이 있으며, 이 경우 DNS 이름은 유사한 식별자 역할을 합니다. 주소와 연결된 DNS 이름을 얻으려면 더 많은 작업이 필요하지만\(DNS 쿼리가 필요할 수 있음\) 정보를 쉽게 사용할 수 있는 경우가 많습니다. 이러한 경우 시간이 지남에 따라 컴퓨터의 주소를 변경하는 것은 DNS 이름도 변경하지 않는 한 이 문서에서 제기된 문제를 해결하는 데 거의 도움이 되지 않습니다\(섹션 4 참조\).

웹 브라우저와 서버는 일반적으로 서로 "쿠키"를 교환합니다\[쿠키\]. 쿠키를 사용하면 웹 서버가 현재 활동을 이전 활동과 연관시킬 수 있습니다. 일반적인 사용법 중 하나는 브라우저에서 제공한 쿠키를 사용하여 이전 쿼리가 무엇인지\(예: 어떤 유형의 정보에 대해\) 식별하여 사용자에게 타겟 광고를 다시 보내는 것입니다. 이전 쿼리를 기반으로 광고는 최종 사용자의 \(가정\) 관심 사항과 일치하도록 타겟팅될 수 있습니다.

주소는 통신의 기본 요구 사항이고 도청자나 다른 당사자로부터 쉽게 숨길 수 없기 때문에 주소 내에서 상수 식별자를 사용하는 것은 특히 중요합니다. 상위 계층이 페이로드를 암호화하더라도 패킷 헤더의 주소는 암호화되지 않은 상태로 나타납니다. 결과적으로, 모바일 호스트\(예: 랩톱\)가 여러 다른 위치에서 네트워크에 액세스하는 경우, 도청자는 상위 계층 페이로드가 \[SERIALNUM\] 암호화되었더라도 해당 모바일 호스트의 이동을 한 장소에서 다른 장소로 추적할 수 있습니다.

---
### **2.2.  Address Usage in IPv4 Today**

오늘날 인터넷에서 사용되는 주소는 특히 집이 아닌 환경\(예: 회사, 캠퍼스 등\)에서 장기간 동안 실제로 변경되지 않는 경우가 많습니다. 이러한 사이트에서는 주소가 정적으로 할당되며 일반적으로 자주 변경되지 않습니다. 지난 몇 년 동안 사이트는 DHCP\[DHCP\]를 통해 정적 할당에서 동적 할당으로 이동하기 시작했습니다. 이론적으로 클라이언트가 DHCP를 통해 얻는 주소는 시간이 지남에 따라 변경될 수 있지만 실제로 서버는 동일한 클라이언트에 동일한 주소를 반환하는 경우가 많습니다\(주소가 너무 부족하여 사용 가능해지면 다른 노드에서 즉시 재사용하지 않는 한\). . 따라서 DHCP를 사용하는 사이트 내에서도 클라이언트는 한 번에 몇 주에서 몇 달 동안 동일한 주소를 사용하게 되는 경우가 많습니다.

전화 접속 회선을 통해 인터넷에 액세스하는 가정 사용자의 경우 상황은 일반적으로 다릅니다. 이러한 사용자에게는 영구적인 연결이 없으며 ISP\(예: AOL\)에 연결할 때마다 임시 주소가 할당되는 경우가 많습니다. 결과적으로 그들이 사용하는 주소는 시간이 지남에 따라 자주 변경되며 여러 다른 사용자 간에 공유됩니다. 따라서 주소는 몇 분 이상의 시간이 지나면 특정 장치를 안정적으로 식별하지 못합니다.

더 흥미로운 사례는 홈 사이트가 오랜 시간 동안 동일한 주소를 사용하게 만드는 상시 연결\(예: 케이블 모뎀, ISDN, DSL 등\)에 관한 것입니다. 이는 IPv4에서 이제 막 일반화되기 시작한 시나리오이며 상시 인터넷 연결이 널리 사용 가능해짐에 따라 더욱 우려되는 상황입니다. 그러한 환경에서는 정기적으로 주소를 변경하는 것이 개인 정보 보호를 줄이는 데 바람직해 보일 수 있지만

우려되는 점은 주소의 네트워크 접두사 부분도 상수 식별자 역할을 한다는 점에 유의해야 합니다. 집에 있는 모든 노드는 해당 노드의 토폴로지 위치를 식별하는 동일한 네트워크 접두사를 갖습니다. 이는 이 문서에서 다루는 문제와 동일한 세부 수준은 아니지만 개인 정보 보호에 영향을 미칩니다. 구체적으로 말하면, 집 안의 모든 노드는 정보 수집을 위해 함께 그룹화됩니다. 주소의 라우팅 접두사 부분에는 토폴로지 정보가 포함되어 있고 임의의 값을 포함할 수 없기 때문에 이 문제는 해결하기 어렵습니다.

마지막으로, \(변경되지 않는\) DNS 이름이 필요한 노드에는 일반적으로 DNS 서버 구성을 단순화하기 위해 고정 주소가 할당된다는 점에 유의해야 합니다. 동적 DNS\[DDNS\]를 사용하여 DNS를 동적으로 업데이트할 수 있지만 아직 널리 배포되지는 않았습니다. 또한 주소를 변경했지만 동일한 DNS 이름을 유지하는 것은 DNS 이름이 변경되지 않는 식별자가 되므로 근본적인 문제를 실제로 해결하지 못합니다. 서버에는 일반적으로 클라이언트가 연결할 수 있도록 DNS 이름이 필요하며 클라이언트도 종종 그렇게 합니다\(예: 일부 서버는 동일한 주소로 다시 매핑되는 DNS 이름에 주소를 매핑할 수 없는 클라이언트와의 통신을 거부합니다\). . 섹션 4에서는 이 문제에 대한 한 가지 접근 방식을 설명합니다.

---
### **2.3.  The Concern With IPv6 Addresses**

IPv6 주소를 고유한 토폴로지 부분과 인터페이스 식별자 부분으로 나누면 IPv6 주소의 고정 부분\(즉, 인터페이스 식별자\)에 주소의 토폴로지 부분이 변경되더라도 일정하게 유지되는 식별자가 포함될 수 있다는 점에서 IPv6에 새로운 문제가 발생합니다. \(예: 인터넷의 다른 부분에 연결한 결과\) IPv4에서는 주소가 변경되면 일반적으로 전체 주소\(주소의 로컬 부분 포함\)가 변경됩니다. 이 문서에서 다루는 것은 바로 이 새로운 문제입니다.

주소가 인터페이스 식별자에서 생성된 경우 홈 사용자의 주소에는 주소의 나머지 부분이 변경되더라도 한 전화 접속 세션에서 다음 세션까지 동일하게 유지되는 인터페이스 식별자가 포함될 수 있습니다. 그러나 오늘날 PPP가 사용되는 방식에서는 PPP 서버가 일반적으로 클라이언트에게 사용할 주소를 일방적으로 알려줍니다\(즉, 클라이언트가 자체적으로 주소를 생성하지 않습니다\). 이 관행을 IPv6에서 계속한다면 이 문서에서 중점을 두고 있는 문제를 피할 수 있습니다.

더 문제가 되는 사례는 인터넷 내에서 토폴로지적으로 이동하는 모바일 장치\(예: 랩탑, PDA 등\)에 관한 것입니다. 이동할 때마다\(모바일 IP\[MOBILEIP\]와 같은 기술이 없는 경우\) 현재 토폴로지 연결 지점에 대한 새 주소를 형성합니다. 이것은 오늘날 "도로 전사"로 대표됩니다.

집과 사무실 모두에서 인터넷 연결이 가능합니다. 그러나 노드의 주소는 이동하면서 변경되지만 주소에 포함된 인터페이스 식별자는 동일하게 유지됩니다\(IEEE 식별자에서 파생된 경우\). 이러한 경우 인터페이스 식별자를 사용하여 특정 기계 \[SERIALNUM\]의 이동 및 사용을 추적할 수 있습니다. 예를 들어 소스 주소와 함께 사용 정보를 기록하는 서버는 인터페이스 식별자도 주소에 포함되어 있으므로 기록합니다. 결과적으로 주소를 기반으로 활동을 연관시키는 데이터 마이닝 기술은 인터페이스 식별자를 사용하여 동일한 작업을 수행하도록 쉽게 확장될 수 있습니다. 이는 실제로 많은 수의 장치가 개별 사용자와 연결되는\(즉, 공유되지 않음\) 차세대 네트워크 연결 장치\(예: PDA, 휴대폰 등\)의 예상되는 확산과 관련하여 특히 우려되는 부분입니다. 따라서 주소에 포함된 인터페이스 식별자는 개인이 인터넷 내에서 위상적으로 이동하는 경우에도 개인의 활동을 추적하는 데 사용될 수 있습니다.

요약하면, 상태 비저장 자동 구성을 통해 생성된 특정 인터페이스의 IPv6 주소에는 장치가 인터넷 내 어디에 연결되어 있는지에 관계없이 동일한 인터페이스 식별자가 포함됩니다. 이를 통해 개별 장치\(및 잠재적인 사용자\)를 쉽게 추적할 수 있습니다. 이 문서의 목적은 문제가 우려되는 상황에서 이 문제를 제거하는 메커니즘을 정의하는 것입니다.

---
### **2.4.  Possible Approaches**

위에서 설명한 문제 중 일부를 피하는 한 가지 방법은 주소를 얻기 위해 DHCP를 사용하는 것입니다. DHCP를 사용하면 DHCP 서버는 시간이 지남에 따라 변경되는 주소를 전달하도록 준비할 수 있습니다.

상태 비저장 주소 자동 구성 아키텍처와 호환되는 또 다른 접근 방식은 시간이 지남에 따라 주소의 인터페이스 ID 부분을 변경하고 일부 주소 범위에 대한 인터페이스 식별자에서 새 주소를 생성하는 것입니다. 인터페이스 식별자를 변경하면 주소의 라우팅 접두사 부분이 변경되는 경우와 변경되지 않는 경우 모두 독립적인 트랜잭션의 IP 주소를 확인하고 실제로 동일한 노드에 해당하는 IP 주소를 식별하는 것이 더 어려워질 수 있습니다.

많은 컴퓨터가 클라이언트와 서버 역할을 모두 수행합니다. 이러한 경우 시스템을 서버로 사용하려면 DNS 이름이 필요합니다. DNS 이름은 그대로 유지되고 지속적인 식별자 역할을 하기 때문에 주소가 고정되어 있는지 변경되는지 여부는 개인 정보 보호에 거의 영향을 미치지 않습니다. 그러나 클라이언트 역할을 할 때\(예: 통신 시작\) 이러한 기계는 사용하는 주소를 변경하려고 할 수 있습니다. 이러한 환경에서는 여러 주소가 필요할 수 있습니다. 즉, 등록된 "공용"\(즉, 비밀이 아닌\) 서버 주소

DNS에서는 다른 시스템으로부터 들어오는 연결 요청을 수락하는 데 사용되며, 통신을 시작할 때 클라이언트의 신원을 보호하는 데 사용되는 "임시" 주소입니다. 이 두 가지 경우는 사용자가 공용 전화번호부에 자신의 전화번호를 나열할 수 있지만 통화를 시작할 때 발신자 ID를 통해 전화번호 표시를 비활성화하는 전화번호 및 발신자 ID와 대략 유사합니다.

두 개의 서로 다른 인터페이스 식별자가 동일한 노드에 속하는지 여부에 대한 추측을 어렵게 만들기 위해 대체 식별자를 생성하는 알고리즘에는 정보를 수집하는 외부 엔터티의 관점에서 예측할 수 없는 구성 요소가 있는 입력이 포함되어야 합니다. 쉽게 이용 가능하거나 쉽게 확인할 수 있는 정보를 외부인이 검사하여\(예: 패킷 내용 검사를 통해\) 특정 시퀀스를 결정할 수 없는 한 의사 무작위 시퀀스에서 식별자를 선택하는 것으로 충분합니다. 이 문서에서는 MD5 해시를 통해 인터페이스 식별자의 의사 무작위 시퀀스 생성을 제안합니다. 주기적으로 시퀀스의 다음 인터페이스 식별자가 생성되고, 새로운 임시 주소 세트가 생성되며, 이전 임시 주소는 더 이상 사용되지 않도록 더 이상 사용되지 않습니다. 정확한 의사 무작위 시퀀스는 무작위 구성 요소와 전역적으로 고유한 인터페이스 식별자\(사용 가능한 경우\)에 따라 달라져 서로 다른 노드가 서로 다른 시퀀스를 생성할 가능성을 높입니다.

---
## **3.  Protocol Description**

이 섹션의 목표는 다음과 같은 절차를 정의하는 것입니다.

1\) 상태 비저장 주소 자동 구성 \[ADDRCONF\]을 통해 생성된 주소의 기본 동작이 변경되지 않습니다.

2\) 전역 범위 주소와 함께 사용할 무작위 인터페이스 식별자를 기반으로 추가 전역 범위 주소를 만듭니다. 이러한 주소는 나가는 세션을 시작하는 데 사용됩니다. 이러한 "임의" 또는 임시 주소는 짧은 기간\(몇 시간에서 며칠까지\) 동안 사용된 후 더 이상 사용되지 않습니다. 더 이상 사용되지 않는 주소는 이미 설정된 연결에 계속 사용될 수 있지만 새 연결을 시작하는 데는 사용되지 않습니다. 만료되는 임시 주소를 대체하기 위해 새로운 임시 주소가 주기적으로 생성되며, 주소 생성 사이의 정확한 시간은 로컬 정책의 문제입니다.

3\) 외부 관찰자가 예측하기 어렵다는 점에서 무작위로 보이는 일련의 인터페이스 식별자로부터 일련의 임시 전역 범위 주소를 생성합니다.

- 미래 주소\(또는 식별자\)는 현재 주소를 기반으로 하며, 현재 주소만 알면 이전 주소\(또는 식별자\)를 판단하기 어렵습니다.

4\) 동일한\(무작위\) 인터페이스 식별자로부터 주소 세트를 생성합니다. 즉, 무상태 주소 자동 구성을 통해 전역 주소가 생성된 각 접두사에 대해 하나의 주소입니다. 동일한 인터페이스 식별자를 사용하여 임시 주소 집합을 생성하면 호스트가 가입해야 하는 IP 멀티캐스트 그룹 수가 줄어듭니다. 노드는 지원하는 각 유니캐스트 주소에 대해 요청된 노드 멀티캐스트 주소에 참여하며 요청된 노드 주소는 해당 주소의 하위 비트에만 종속됩니다. 이 결정은 다수의 멀티캐스트 그룹에 참여하는 노드가 인터페이스를 무차별 모드로 설정해야 성능이 저하될 수 있다는 우려를 해결하기 위해 내려졌습니다.

---
### **3.1.  Assumptions**

다음 알고리즘은 각 인터페이스가 연관된 무작위 인터페이스 식별자를 유지한다고 가정합니다. 임시 주소가 생성되면 연관된 무작위 인터페이스 식별자의 현재 값이 사용됩니다. 식별자의 실제 값은 아래 설명과 같이 시간이 지남에 따라 변경되지만 동일한 식별자를 사용하여 두 개 이상의 임시 주소를 생성할 수 있습니다.

또한 알고리즘은 주어진 임시 주소에 대해 구현이 해당 주소가 생성된 해당 공개 주소를 결정할 수 있다고 가정합니다. 임시 주소가 더 이상 사용되지 않으면 새 임시 주소가 생성됩니다. 새 주소의 특정 유효 수명과 선호 수명은 공개 주소의 해당 수명 값에 따라 달라집니다.

마지막으로 이 문서에서는 노드가 나가는 통신을 시작할 때 공개 주소보다 임시 주소가 우선적으로 부여될 수 있다고 가정합니다. 이는 노드에 의해 시작된 모든 연결이 기본적으로 임시 주소를 사용하거나 애플리케이션이 임시 주소 또는 공용 주소 사용을 선호하는지 여부를 개별적으로 나타냄을 의미할 수 있습니다. 임시 주소에 우선권을 부여하는 것은 보다 일반적인 경우 \[ADDR\_SELECT\]에서 소스 주소 선택 주제를 다루는 진행 중인 작업과 일치합니다. 구현에서는 임시 주소를 사용할 수 없는 경우\(예: 사용 가능한 임시 주소 생성이 실패한 경우\) 공개 주소를 선택하지 않는 정책을 만들 수 있습니다.

---
### **3.2.  Generation Of Randomized Interface Identifiers.**

우리는 무작위 인터페이스 식별자의 유지 관리를 위한 두 가지 접근 방식을 설명합니다. 첫 번째는 시스템 재시작 시 알고리즘의 다음 반복에 대한 입력으로 사용하기 위해 상태 기록을 기록하는 데 사용할 수 있는 안정적인 저장소가 있다고 가정합니다. 두 번째 접근 방식은 안정적인 저장소를 사용할 수 없고 이전 상태 없이 무작위 인터페이스 식별자를 생성해야 하는 경우를 해결합니다.

---
#### **3.2.1.  When Stable Storage Is Present**

다음 알고리즘은 무작위 인터페이스 식별자를 생성할 때 입력으로 사용되는 64비트 "기록 값"이 있다고 가정합니다. 시스템이 처음 부팅될 때\(즉, 기본적으로\) 초기 값을 추측하기 어렵게 만드는 기술을 사용하여 임의 값을 생성해야 합니다\[RANDOM\]. 새로운 인터페이스 식별자가 생성될 때마다 계산에 의해 생성된 값은 다음 알고리즘 반복을 위해 기록 값에 저장됩니다.

무작위 인터페이스 식별자는 다음과 같이 생성됩니다.

1\) 이 알고리즘의 이전 반복에서 기록 값\(또는 이전 값이 없는 경우 임의의 값\)을 가져와 \[ADDRARCH\]에 설명된 대로 생성된 인터페이스 식별자를 추가합니다. 2\) 이전 단계에서 생성된 수량에 대해 MD5 메시지 다이제스트 \[MD5\]를 계산합니다. 3\) MD5 다이제스트의 가장 왼쪽 64비트를 가져와서 비트 6\(가장 왼쪽 비트의 번호는 0임\)을 0으로 설정합니다. 이렇게 하면 로컬 중요성만 나타내는 범용/로컬 비트를 사용하여 인터페이스 식별자가 생성됩니다. 생성된 식별자를 연결된 무작위 인터페이스 식별자로 저장합니다. 4\) 2단계에서 계산된 MD5 다이제스트의 가장 오른쪽 64비트를 가져와 알고리즘의 다음 반복에 사용할 기록 값으로 안정적인 저장소에 저장합니다.

MD5는 편의상 선택되었으며 특정 특성이 원하는 수준의 무작위화를 생성하는 데 적합했기 때문에 선택되었습니다. IPsec \[IPSEC\]의 일부로 MD5를 구현하려면 IPv6 노드가 이미 필요하므로 해당 코드는 이미 IPv6 시스템에 존재합니다.

이론적으로 위와 같은 히스토리 방식을 사용하여 연속적인 무작위 인터페이스 식별자를 생성하는 것은 무작위로 생성하는 것보다 이점이 없습니다. 그러나 실제로는 진정한 난수를 생성하는 것이 까다로울 수 있습니다. 기록 값을 사용하는 것은 두 노드가 동일한 무작위를 생성하는 특정 시나리오를 피하기 위한 것입니다.

인터페이스 식별자는 모두 DAD를 통해 상황을 감지하지만 동일한\(결함이 있는\) 난수 생성 알고리즘을 통해 동일한 무작위 인터페이스 식별자를 생성합니다. 위의 알고리즘은 후속 무작위 인터페이스 식별자를 생성하는 계산에 인터페이스 식별자\(종종 전역적으로 고유함\)를 사용하여 이 문제를 방지합니다. 따라서 두 노드가 동일한 무작위 인터페이스 식별자를 생성하는 경우 후속 시도에서 서로 다른 식별자를 생성해야 합니다.

---
#### **3.2.2.  In The Absence of Stable Storage**

안정적인 저장소가 없으면 인터페이스 식별자의 의사 무작위 시퀀스를 생성하기 위해 시스템을 다시 시작할 때 기록 값을 사용할 수 없습니다. 결과적으로 위에서 사용된 초기 히스토리 값은 무작위로 생성되어야 합니다. 다양한 기술이 적절할 수 있습니다. 난수를 얻기 위한 좋은 소스에 대한 제안은 \[RANDOM\]을 참조하세요. 머신에 기록 값을 저장할 수 있는 안정적인 저장소가 없더라도 많은 경우 머신마다 다른 구성 정보\(예: 사용자 ID, 보안 키, 일련 번호 등\)가 있습니다. 이러한 경우 임의의 초기 기록 값을 생성하는 한 가지 접근 방식은 구성 정보를 사용하여 일부 데이터 비트\(기계의 수명 동안 일정하게 유지될 수 있지만 기계마다 다를 수 있음\)를 생성하고 임의의 데이터를 추가하는 것입니다. 이전과 같이 MD5 다이제스트를 계산합니다.

---
### **3.3.  Generating Temporary Addresses**

\[ADDRCONF\]에서는 인터페이스가 활성화될 때 링크 로컬 주소를 생성하는 단계와 다른 범위에 대한 주소를 생성하는 단계를 설명합니다. 이 문서는 \[ADDRCONF\]를 다음과 같이 확장합니다. 주소 자동 구성\(즉, A 비트가 설정됨\)을 위해 전역 범위 접두사를 전달하는 접두사 정보 옵션을 사용하여 라우터 광고를 처리하는 경우 다음 단계를 수행하십시오.

1\) \[ADDRCONF\]에 정의된 대로 접두사 정보 옵션을 처리하여 공용 주소를 생성하거나 기존 주소\(공용 주소 및 임시 주소\)의 수명을 조정합니다. 기존 임시 주소의 수명을 조정할 때는 수명만 낮추세요. 구현 시 접두사 정보 옵션을 처리할 때 기존 임시 주소의 수명을 늘려서는 안 됩니다. 2\) \[ADDRCONF\]에 설명된 대로 새 공용 주소가 생성되면\(광고된 접두사가 이미 인터페이스에 할당된 주소의 접두사와 일치하지 않고 옵션의 유효한 수명이 0이 아니기 때문에\) 새 공용 주소도 생성합니다. 임시 주소.

3\) 임시 주소를 생성할 때 평생 가치는 해당 공개 주소에서 다음과 같이 파생됩니다.

- - 유효 수명은 공개 주소의 유효 수명 또는 TEMP\_VALID\_LIFETIME 중 낮은 값입니다. - 기본 수명은 공개 주소의 기본 수명 또는 TEMP\_PREFERRED\_LIFETIME - DESYNC\_FACTOR 중 낮은 값입니다.

- 임시 주소는 계산된 기본 수명이 REGEN\_ADVANCE 시간 단위보다 큰 경우에만 생성됩니다. 특히, 구현 시 기본 수명이 0인 임시 주소를 생성해서는 안 됩니다. 4\) 해당 공용 주소를 생성하는 데 사용된 접두사에 인터페이스의 현재 무작위 인터페이스 식별자를 추가하여 새 임시 주소가 생성됩니다. 우연히 새 임시 주소가 인터페이스에 이미 할당된 주소와 동일한 경우 새 무작위 인터페이스 식별자를 생성하고 이 단계를 반복합니다. 5\) 생성된 임시 주소에 대해 DAD\(중복 주소 감지\)를 수행합니다. DAD가 주소가 이미 사용 중임을 나타내는 경우 위의 섹션 3.2에 설명된 대로 새로운 무작위 인터페이스 식별자를 생성하고 이전 단계를 적절하게 최대 5회 반복합니다. 5번 연속 시도 후에도 고유하지 않은 주소가 생성되지 않으면 시스템 오류를 기록하고 해당 인터페이스에 대한 임시 주소 생성 시도를 중단합니다.

- 참고: 동일한 관련 무작위 인터페이스 식별자에서 여러 임시 주소가 생성되므로 모든 임시 주소에서 DAD를 실행하는 데 따른 이점은 거의 없습니다. 이 문서에서는 지정된 무작위 식별자에서 생성된 첫 번째 주소에서 DAD를 실행하고 동일한 무작위 인터페이스 식별자에서 생성된 모든 후속 주소에서는 DAD를 건너뛸 것을 권장합니다.

---
### **3.4.  Expiration of Temporary Addresses**

임시 주소가 더 이상 사용되지 않으면 새 주소를 생성해야 합니다. 이는 3.3단계부터 시작하여 섹션 3.3에 설명된 작업을 반복하여 수행됩니다. 임시 주소가 재생성되는 임시 기간을 제외하고 정상 작동 시 공용 주소에 해당하는 최대 하나의 임시 주소는 주어진 시간에 더 이상 사용되지 않는 상태여야 합니다. 기본 수명이 0인 접두사 정보 옵션을 처리한 결과 임시 주소가 더 이상 사용되지 않는 경우 새 임시 주소를 생성해서는 안 됩니다. 접두사 정보 옵션은 해당 공개 주소도 더 이상 사용하지 않습니다.

기본 임시 주소를 항상 사용할 수 있도록 하려면 이전 임시 주소가 더 이상 사용되지 않기 전에 새 임시 주소를 다시 생성해야 합니다. 이는 중복 주소 감지를 실행해야 하는 경우와 같이 새 임시 주소 생성이 즉각적이지 않은 경우 경쟁 조건을 피하기 위해 충분한 시간을 허용하기 위한 것입니다. 임시 주소가 실제로 더 이상 사용되지 않기 전에 구현 시 주소 재생성 프로세스 REGEN\_ADVANCE 시간 단위를 시작하는 것이 좋습니다.

선택적 최적화로서 구현에서는 애플리케이션이나 상위 계층에서 사용하지 않는 더 이상 사용되지 않는 임시 주소를 제거하려고 할 수 있습니다. TCP 연결의 경우 이러한 정보는 제어 블록에서 사용할 수 있습니다. UDP 기반 애플리케이션의 경우 애플리케이션만이 실제로 어떤 주소가 사용 중인지 알 수 있는 경우가 있습니다. 결과적으로, 주소가 더 이상 사용되지 않는 시기를 결정하기 위해 경험적 방법을 사용해야 할 수도 있습니다\(예: 위에서 제안한 기본 TEMP\_VALID\_LIFETIME\).

---
### **3.5.  Regeneration of Randomized Interface Identifiers**

임시 주소를 변경해야 하는 빈도는 장치가 사용되는 방식\(예: 새 통신을 시작하는 빈도\)과 최종 사용자의 관심사에 따라 달라집니다. 가장 심각한 개인 정보 보호 문제는 장기간\(몇 주에서 몇 달, 몇 년\) 동안 사용되는 주소와 관련된 것으로 보입니다. 주소가 자주 변경될수록 인터페이스 식별자에 중요한 정보를 수집하거나 조정하는 것이 더 어려워집니다. 더욱이, 정보를 수집하고 인터페이스 식별자를 기반으로 정보를 연관시키려고 시도하는 비용은 충분한 주소에 가치가 있을 만큼 변하지 않는 식별자가 포함되어 있는 경우에만 정당화됩니다. 따라서 많은 수의 클라이언트가 매일 또는 매주 주소를 변경하는 것만으로도 대부분의 개인 정보 보호 문제를 완화하기에 충분할 것입니다.

노드와 관련된 많은 수의 주소를 갖는 것과 관련된 클라이언트 비용도 있습니다\(예: 주소 조회 수행 시 많은 멀티캐스트 그룹에 가입해야 하는 경우 등\). 따라서 주소를 자주\(예: 몇 분마다\) 변경하면 성능에 영향을 미칠 수 있습니다.

이 문서에서는 구현 시 정기적으로 새 임시 주소를 생성할 것을 권장합니다. 이는 \(TEMP\_PREFERRED\_LIFETIME - REGEN\_ADVANCE - DESYNC\_FACTOR\) 시간 단위마다 적어도 한 번씩 새로운 무작위 인터페이스 식별자를 생성함으로써 자동으로 달성될 수 있습니다. 위에서 설명한 대로 임시 주소가 더 이상 사용되지 않기 전에 새로운 임시 주소 REGEN\_ADVANCE 시간 단위를 생성하면 TEMP\_PREFERRED\_LIFETIME보다 크지 않은 기본 수명을 가진 주소가 생성됩니다. DESYNC\_FACTOR 값은 클라이언트가

서로 동기화하고 정확히 동시에 새 주소를 생성합니다. 기본 수명이 만료되면 새로운 무작위 인터페이스 식별자를 사용하여 새로운 임시 주소가 생성됩니다.

새 주소를 생성하는 데 적합한 정확한 빈도는 환경마다 다르기 때문에 구현에서는 최종 사용자에게 주소가 재생성되는 빈도를 변경할 수 있는 기능을 제공해야 합니다. 기본값은 TEMP\_PREFERRED\_LIFETIME에 제공되며 1일입니다. 또한 임시 주소가 무효화되는 정확한 시간은 최종 사용자가 애플리케이션을 사용하는 방식에 따라 달라집니다. 따라서 1주\(TEMP\_VALID\_LIFETIME\)라는 기본값이 모든 환경에 적합하지 않을 수 있습니다. 구현에서는 최종 사용자에게 이러한 기본값을 모두 재정의할 수 있는 기능을 제공해야 합니다.

마지막으로 인터페이스가 새로운 링크에 연결되면 새로운 임시 주소 세트와 함께 새로운 무작위 인터페이스 식별자가 즉시 생성되어야 합니다. 장치가 한 이더넷에서 다른 이더넷으로 이동하는 경우 다른 무작위 인터페이스 식별자에서 새로운 임시 주소 세트를 생성하면 장치가 두 링크와 연관된 임시 주소에 대해 서로 다른 무작위 인터페이스 식별자를 사용하므로 두 링크의 주소를 상호 연결하기가 더 어려워집니다. 두 개의 서로 다른 링크는 동일한 노드에 있는 것으로 간주됩니다.

---
## **4.  Implications of Changing Interface Identifiers**

IPv6 주소 지정 아키텍처는 인터페이스 식별자가 전역적으로 고유할 수 있도록 하기 위해 어느 정도 확장되었습니다. GSE 제안\[GSE\]에 대한 IPng 논의 중에 실제로는 인터페이스 식별자를 전역적으로 고유하게 유지하는 것이 미래의 전송 프로토콜에 유용할 수 있다고 느꼈습니다. 이 문서의 알고리즘을 사용하면 향후 유연성을 제공하는 것이 복잡해질 수 있습니다.

개인의 프라이버시를 보호하려는 욕구와 네트워크를 효과적으로 유지하고 디버깅하려는 욕구는 서로 충돌할 수 있습니다. 클라이언트가 시간이 지남에 따라 변경되는 주소를 사용하게 하면 운영 문제를 추적하고 격리하는 것이 더 어려워집니다. 예를 들어, 패킷 추적을 볼 때 단일 오류 시스템으로 인해 발생한 동작인지 아니면 여러 시스템에 의해 발생한 동작인지 확인하기가 더 어려워질 수 있습니다.

일부 서버는 DNS 이름이 존재하지 않는 클라이언트에 대한 액세스 권한 부여를 거부합니다. 즉, DNS PTR 쿼리를 수행하여 DNS 이름을 확인한 다음 반환된 이름에 대해 A 쿼리를 수행하여 반환된 DNS 이름이 사용 중인 주소에 다시 매핑되는지 확인할 수도 있습니다. 결과적으로, DNS에 제대로 등록되지 않은 클라이언트는

일부 서비스에 액세스할 수 없습니다. 그러나 앞서 언급한 것처럼 노드의 DNS 이름\(변경되지 않는 경우\)은 상수 식별자 역할을 합니다. 이 문서에 설명된 확장의 광범위한 배포는 광범위하게 구현되기는 하지만 유효성이 거의 없는 역DNS 기반 "인증"의 실행에 도전할 수 있습니다. 서버 문제를 해결하기 위해 노드는 임의의 이름\(예: 임의 주소 자체의 문자열 버전\)을 사용하여 DNS에 임시 주소를 등록할 수 있습니다.

이 문서에 정의된 확장을 사용하면 디버깅 및 기타 운영 문제 해결 활동이 복잡해질 수 있습니다. 따라서 임시 주소를 사용하지 않는 것이 사이트 정책일 수 있습니다. 구현에서는 신뢰할 수 있는 관리자가 임시 주소 사용을 재정의하는 방법을 제공할 수 있습니다.

---
## **5.  Defined Constants**

이 문서에 정의된 상수는 다음과 같습니다.

TEMP\_VALID\_LIFETIME -- 기본값: 1주. 사용자는 기본값을 재정의할 수 있어야 합니다.
TEMP\_PREFERRED\_LIFETIME -- 기본값: 1일. 사용자는 기본값을 재정의할 수 있어야 합니다.
REGEN\_ADVANCE - 5초
MAX\_DESYNC\_FACTOR - 10분. DESYNC\_FACTOR의 상한입니다.
DESYNC\_FACTOR - 0 - MAX\_DESYNC\_FACTOR 범위 내의 임의 값입니다. 이는 시스템 시작 시\(사용될 때마다가 아니라\) 한 번 계산되며 \(TEMP\_VALID\_LIFETIME - REGEN\_ADVANCE\)보다 클 수 없습니다.

---
## **6.  Future Work**

구현에서는 더 이상 사용되지 않는 임시 주소를 상위 계층 프로토콜에서 사용하지 않는 경우\(이전은 아님\) 내부 데이터 구조에서 제거할 수 있도록 상위 계층에서 사용 중인 주소를 추적하기를 원할 수 있습니다. 이는 상위 계층 프로토콜이 여전히 해당 주소를 사용하고 있는지 여부에 관계없이 주소가 유효하지 않게 되면\(\[ADDRCONF\]\) 인터페이스에서 제거되는 현재 접근 방식과 대조됩니다. TCP 연결의 경우 이러한 정보는 제어 블록에서 사용할 수 있습니다. UDP 기반 애플리케이션의 경우 애플리케이션만이 실제로 어떤 주소가 사용 중인지 알 수 있는 경우가 있습니다. 결과적으로 구현에서는 일반적으로 주소가 더 이상 사용되지 않는 시기를 결정하는 데 경험적 방법을 사용해야 합니다\(예: 섹션 3.4에서 제안된 대로\).

공개 주소와 임시 주소를 사용할지 여부는 어떤 경우에는 애플리케이션을 통해서만 결정될 수 있습니다. 예를 들어, 일부 응용 프로그램은 항상 임시 주소를 사용하기를 원하는 반면, 다른 응용 프로그램에서는 일부 상황에서만 임시 주소를 사용하거나 전혀 사용하지 않기를 원할 수도 있습니다. 개별 애플리케이션이 임시 주소 사용과 관련된 요구 사항을 충분히 세밀하게 표시할 수 있도록 적절한 API 확장을 개발해야 할 것입니다.

---
## **7.  Security Considerations**

이 문서의 동기는 개인의 개인 정보 보호 문제에서 비롯됩니다. 이 문서는 상태 비저장 주소 자동 구성 \[ADDRCONF\]과 이미 연관된 보안 문제 외에는 보안 문제를 추가하지 않는 것으로 보입니다.

---
## **8.  Acknowledgments**

저자들은 IPNGWG 실무 그룹의 기여, 특히 Matt Crawford, Steve Deering 및 Allison Mankin의 자세한 의견에 대해 감사를 표하고 싶습니다.

---
## **9.  References**

\[추가\] Hinden, R. 및 S. Deering, "IP 버전 6 주소 지정 아키텍처", RFC 2373, 1998년 7월.

\[ADDRCONF\] Thomson, S. 및 T. Narten, "IPv6 주소

- 자동 구성", RFC 2462, 1998년 12월.

\[ADDR\_SELECT\] Draves, R. "IPv6에 대한 기본 주소 선택", 작업 진행 중.

\[쿠키\] Kristol, D. 및 L. Montulli, "HTTP 상태 관리 메커니즘", RFC 2965, 2000년 10월.

```text
   [DHCP]        Droms, R., "Dynamic Host Configuration Protocol", RFC
                 2131, March 1997.
```

\[DDNS\] Vixie, R., Thomson, S., Rekhter, Y. 및 J. Bound, "도메인 이름 시스템의 동적 업데이트\(DNS 업데이트\)", RFC 2136, 1997년 4월.

\[발견\] Narten, T., Nordmark, E. 및 W. Simpson, "IP 버전 6\(IPv6\)에 대한 이웃 검색", RFC 2461, 1998년 12월.

\[GSE\] Crawford 등, "주소에서 식별자와 로케이터 분리: IPv6에 대한 GSE 제안 분석", 작업 진행 중.

\[IPSEC\] Kent, S., Atkinson, R., "인터넷 프로토콜을 위한 보안 아키텍처", RFC 2401, 1998년 11월.

```text
   [MD5]         Rivest, R., "The MD5 Message-Digest Algorithm", RFC
                 1321, April 1992.

   [MOBILEIP]    Perkins, C., "IP Mobility Support", RFC 2002, October
                 1996.
```

\[무작위\] Eastlake 3rd, D., Crocker S. 및 J. Schiller,

- "보안을 위한 임의성 권장 사항", RFC 1750, 1994년 12월.

\[연재 번호\] Moore, K., "종단 간 네트워크 프로토콜에서 하드웨어 일련 번호 사용에 대한 개인 정보 보호 고려 사항", 작업 진행 중.

---
## **10. Authors' Addresses**

```text
   Thomas Narten
   IBM Corporation
   P.O. Box 12195
   Research Triangle Park, NC 27709-2195
   USA

   Phone: +1 919 254 7798
   EMail: narten@raleigh.ibm.com

   Richard Draves
   Microsoft Research
   One Microsoft Way
   Redmond, WA 98052

   Phone: +1 425 936 2268
   EMail: richdr@microsoft.com
```

---
## **11.  Full Copyright Statement**

Copyright \(C\) The Internet Society \(2001\). 판권 소유.

이 문서와 그 번역본은 복사되어 타인에게 제공될 수 있으며, 이에 대해 설명하거나 설명하거나 구현을 지원하는 파생물은 어떤 종류의 제한 없이 전체적으로 또는 부분적으로 준비, 복사, 출판 및 배포될 수 있습니다. , 단, 위의 저작권 표시와 이 단락은 그러한 모든 사본 및 파생물에 포함됩니다. 그러나 이 문서 자체는 인터넷 표준 개발 목적으로 필요한 경우를 제외하고는 저작권 표시를 제거하거나 Internet Society 또는 기타 인터넷 조직에 대한 참조를 제거하는 등 어떤 식으로든 수정할 수 없습니다. 인터넷 표준 프로세스를 따르거나 영어 이외의 언어로 번역하는 데 필요한 대로 따라야 합니다.

위에서 부여된 제한된 권한은 영구적이며 Internet Society 또는 그 승계자 또는 양수인에 의해 취소되지 않습니다.

이 문서와 여기에 포함된 정보는 "있는 그대로" 제공되며 인터넷 사회 및 인터넷 공학 태스크포스는 여기에 포함된 정보의 사용이 상품성 또는 특정 목적에의 적합성에 대한 권리 또는 묵시적 보증을 침해하는 행위.

---
# **Acknowledgement**

RFC 편집기 기능에 대한 자금은 현재 Internet Society에서 제공하고 있습니다.
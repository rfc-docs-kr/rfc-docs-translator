

```text
Network Working Group                                       J. Rosenberg
Request for Comments: 3264                                   dynamicsoft
Obsoletes: 2543                                           H. Schulzrinne
Category: Standards Track                                    Columbia U.
                                                               June 2002
```

세션 설명 프로토콜\(SDP\)을 사용한 제안/답변 모델

---
# **Status of this Memo**

본 문서는 인터넷 커뮤니티를 위한 인터넷 표준 트랙 프로토콜을 명시하고 개선을 위한 논의와 제안을 요청합니다. 이 프로토콜의 표준화 상태 및 상태에 대해서는 "인터넷 공식 프로토콜 표준"\(STD 1\) 최신판을 참조하세요. 이 메모의 배포는 무제한입니다.

---
# **Copyright Notice**

저작권\(C\)인터넷학회\(2002\). 판권 소유.

---
# **Abstract**

이 문서는 두 엔티티가 세션 설명 프로토콜\(SDP\)을 사용하여 두 엔티티 간의 멀티미디어 세션에 대한 공통된 뷰에 도달할 수 있는 메커니즘을 정의합니다. 이 모델에서 한 참가자는 다른 참가자에게 자신의 관점에서 원하는 세션에 대한 설명을 제공하고 다른 참가자는 자신의 관점에서 원하는 세션으로 응답합니다. 이 제안/답변 모델은 세션의 전체 뷰를 위해 두 참가자의 정보가 필요한 유니캐스트 세션에서 가장 유용합니다. 제안/답변 모델은 세션 개시 프로토콜\(SIP\)과 같은 프로토콜에서 사용됩니다.

---
# **Table of Contents**

```text
   1          Introduction ........................................    2
   2          Terminology .........................................    3
   3          Definitions .........................................    3
   4          Protocol Operation ..................................    4
   5          Generating the Initial Offer ........................    5
   5.1        Unicast Streams .....................................    5
   5.2        Multicast Streams ...................................    8
   6          Generating the Answer ...............................    9
   6.1        Unicast Streams .....................................    9
   6.2        Multicast Streams ...................................   12
   7          Offerer Processing of the Answer ....................   12
   8          Modifying the Session ...............................   13
   8.1        Adding a Media Stream ...............................   13
   8.2        Removing a Media Stream .............................   14
   8.3        Modifying a Media Stream ............................   14
   8.3.1      Modifying Address, Port or Transport ................   14
   8.3.2      Changing the Set of Media Formats ...................   15
   8.3.3      Changing Media Types ................................   17
   8.3.4      Changing Attributes .................................   17
   8.4        Putting a Unicast Media Stream on Hold ..............   17
   9          Indicating Capabilities .............................   18
   10         Example Offer/Answer Exchanges ......................   19
   10.1       Basic Exchange ......................................   19
   10.2       One of N Codec Selection ............................   21
   11         Security Considerations .............................   23
   12         IANA Considerations .................................   23
   13         Acknowledgements ....................................   23
   14         Normative References ................................   23
   15         Informative References ..............................   24
   16         Authors' Addresses ..................................   24
   17         Full Copyright Statement.............................   25
```

---
# **1 Introduction**

세션 설명 프로토콜\(SDP\) \[1\]은 원래 Mbone에서 전송되는 멀티캐스트 세션을 설명하는 방법으로 구상되었습니다. 세션 발표 프로토콜\(SAP\) \[6\]은 SDP 메시지를 전송하는 멀티캐스트 메커니즘으로 고안되었습니다. SDP 사양은 유니캐스트 작동을 허용하지만 완전하지 않습니다. 모든 참가자가 사용하는 세션의 글로벌 뷰가 있는 멀티캐스트와 달리 유니캐스트 세션에는 두 명의 참가자가 포함되며 세션의 전체 뷰를 보려면 두 참가자의 정보와 두 참가자 간의 매개변수에 대한 합의가 필요합니다.

예를 들어, 멀티캐스트 세션은 특정 미디어 스트림에 대한 단일 멀티캐스트 주소를 전달해야 합니다. 그러나 유니캐스트 세션의 경우 두 개의 주소가 필요합니다. 각 참가자마다 하나씩입니다. 또 다른 예로, 멀티캐스트 세션은 세션에서 어떤 코덱을 사용할지 표시해야 합니다. 그러나 유니캐스트의 경우 코덱 세트는 각 참가자가 지원하는 세트에서 중복을 찾아 결정해야 합니다.

결과적으로 SDP는 유니캐스트 세션을 설명할 수 있는 표현력이 있지만 실제로 어떻게 수행되는지에 대한 의미론과 운영 세부 사항이 없습니다. 이 문서에서는 SDP를 기반으로 하는 간단한 제안/답변 모델을 정의하여 이를 해결합니다. 이 모델에서 세션의 한 참가자는 제안을 구성하는 SDP 메시지를 생성합니다. 제안자는 미디어 스트림과 코덱 세트와 함께 제안자가 미디어를 수신하는 데 사용하고자 하는 IP 주소와 포트를 사용합니다. 제안은

응답자라고 불리는 다른 참가자에게 전달됩니다. 응답자는 응답을 생성하는데, 이는 제안자가 제공한 제안에 응답하는 SDP 메시지입니다. 응답에는 제안의 각 스트림에 대한 일치하는 미디어 스트림이 있으며, 스트림이 수락되는지 여부를 나타내며, 사용될 코덱과 응답자가 미디어를 수신하는 데 사용하려는 IP 주소 및 포트가 있습니다.

멀티캐스트 세션이 유니캐스트 세션과 비슷하게 작동하는 것도 가능합니다. 매개변수는 유니캐스트의 경우처럼 사용자 쌍 사이에서 협상되지만, 양측 모두 유니캐스트가 아닌 동일한 멀티캐스트 주소로 패킷을 보냅니다. 이 문서에서는 멀티캐스트 스트림에 대한 offer/answer 모델의 적용에 대해서도 설명합니다.

또한 초기 제안/답변 교환 후 세션을 업데이트하기 위해 제안/답변 모델을 사용하는 방법에 대한 지침도 정의합니다.

제안과 답변이 전달되는 수단은 이 문서의 범위를 벗어납니다. 여기에 정의된 제안/답변 모델은 SIP\(Session Initiation Protocol\)\[7\]에서 사용하는 필수 기준 메커니즘입니다.

---
# **2 Terminology**

이 문서에서 핵심 단어 "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY" 및 "OPTIONAL"은 RFC 2119 \[2\]에 설명된 대로 해석되어야 하며 규정을 준수하는 구현에 대한 요구 사항 수준을 나타냅니다.

---
# **3 Definitions**

이 문서 전체에서 사용되는 용어는 다음과 같습니다.

- 에이전트: 에이전트는 제안/답변 교환에 관련된 프로토콜 구현입니다. 제안/답변 교환에는 두 개의 에이전트가 관련됩니다.

- 답변: 제안자로부터 받은 제안에 대한 응답자가 보낸 SDP 메시지입니다.

- 답변자: 다른 에이전트로부터 원하는 미디어 커뮤니케이션의 측면을 설명하는 세션 설명을 받은 후, 자신의 세션 설명으로 해당 설명에 응답하는 에이전트입니다.

- 미디어 스트림: RTSP \[8\]에서 미디어 스트림은 오디오 스트림이나 비디오 스트림과 같은 단일 미디어 인스턴스이자 단일 화이트보드 또는 공유 애플리케이션 그룹입니다. SDP에서 미디어 스트림은 "m=" 줄과 연관된 속성으로 설명됩니다.

- 제안: 제안자가 보낸 SDP 메시지.

- 제공자: 세션을 생성하거나 수정하기 위해 세션 설명을 생성하는 에이전트입니다.

---
# **4 Protocol Operation**

제안/응답 교환은 에이전트 간 세션 설정을 목적으로 SDP를 교환할 수 있는 상위 계층 프로토콜\(예: SIP\)이 존재한다고 가정합니다.

프로토콜 작동은 한 에이전트가 다른 에이전트에게 초기 오퍼를 보낼 때 시작됩니다. 오퍼는 상위 계층 프로토콜을 통해 이미 확립되었을 수 있는 컨텍스트 밖에 있는 경우 초기 오퍼입니다. 상위 계층 프로토콜은 다양한 SDP 교환을 함께 연관시킬 수 있는 어떤 종류의 컨텍스트를 유지 관리한다고 가정합니다.

제안을 수신한 에이전트는 답변을 생성할 수도 있고, 제안을 거부할 수도 있습니다. 제안을 거부하는 수단은 상위 계층 프로토콜에 따라 달라집니다. 제안/답변 교환은 원자적입니다. 답변이 거부되면 세션은 제안 이전 상태로 돌아갑니다\(세션이 없는 상태일 수 있음\).

언제든지 두 에이전트는 세션을 업데이트하는 새로운 오퍼를 생성할 수 있습니다. 그러나 아직 답변하거나 거부하지 않은 오퍼를 받은 경우 새로운 오퍼를 생성해서는 안 됩니다. 또한 아직 답변이나 거부를 받지 않은 이전 오퍼를 생성한 경우 새로운 오퍼를 생성해서는 안 됩니다. 에이전트가 오퍼를 보낸 후 답변을 받기 전에 오퍼를 받으면 이는 "글레어" 조건으로 간주됩니다.

- 글레어라는 용어는 원래 회로 교환 통신망에서 두 스위치가 동시에 같은 트렁크에서 같은 사용 가능한 회로를 점유하려고 시도하는 상황을 설명하는 데 사용되었습니다. 여기서는 두 에이전트가 동시에 업데이트된 오퍼를 보내려고 시도했음을 의미합니다.

상위 계층 프로토콜은 이러한 조건을 해결할 수 있는 수단을 제공해야 합니다. 상위 계층 프로토콜은 각 방향으로 메시지를 정렬할 수 있는 수단을 제공해야 합니다. SIP는 이러한 요구 사항을 충족합니다\[7\].

---
# **5 Generating the Initial Offer**

제안\(및 답변\)은 RFC 2327 \[1\]에 정의된 대로 유효한 SDP 메시지여야 하지만 한 가지 예외가 있습니다. RFC 2327은 SDP 메시지에 e 또는 p 줄이 있어야 한다고 명시합니다. 이 사양은 이러한 제약을 완화합니다. 제안/답변 애플리케이션을 위해 공식화된 SDP는 e 및 p 줄을 모두 생략할 수 있습니다. o 줄의 세션 ID 및 버전의 숫자 값은 64비트 부호 있는 정수로 표현할 수 있어야 합니다. 롤오버를 방지하기 위해 버전의 초기 값은 \(2\*\*62\)-1보다 작아야 합니다. SDP 사양에서는 여러 세션 설명을 연결하여 큰 SDP 메시지를 만들 수 있지만 제안/답변 모델에서 사용되는 SDP 메시지에는 세션 설명이 정확히 하나만 포함되어야 합니다.

SDP "s=" 라인은 멀티캐스트에 대해 합리적으로 정의되지만 유니캐스트에 대해서는 정의가 부족한 세션의 주제를 전달합니다. 유니캐스트 세션의 경우 단일 공백 문자\(0x20\) 또는 대시\(-\)로 구성되는 것이 좋습니다.

- 불행히도 SDP에서는 "s=" 줄을 비워둘 수 없습니다.

SDP "t=" 라인은 세션 시간을 전달합니다. 일반적으로 유니캐스트 세션의 스트림은 SIP와 같은 외부 신호 수단을 통해 생성되고 파괴됩니다. 이 경우 "t=" 라인은 "0 0" 값을 가져야 합니다.

오퍼에는 0개 이상의 미디어 스트림이 포함됩니다\(각 미디어 스트림은 "m=" 줄과 연관된 속성으로 설명됨\). 0개의 미디어 스트림은 오퍼러가 통신을 원하지만 세션에 대한 스트림은 나중에 수정된 오퍼를 통해 추가될 것임을 의미합니다. 스트림은 유니캐스트와 멀티캐스트를 혼합한 것일 수 있습니다. 후자는 관련 "c=" 줄에 멀티캐스트 주소가 있음을 의미합니다.

제공되는 각 스트림의 구성은 스트림이 멀티캐스트인지 유니캐스트인지에 따라 달라집니다.

---
## **5.1 Unicast Streams**

제공자가 스트림에서 피어에게만 미디어를 전송하려는 경우, "a=sendonly" 속성을 사용하여 스트림을 sendonly로 표시해야 합니다. 미디어 스트림 속성 또는

세션 속성. 제공자가 피어로부터 미디어만 수신하고자 하는 경우 스트림을 recvonly로 표시해야 합니다. 제공자가 통신을 원하지만 현재 미디어를 보내거나 받지 않으려는 경우 스트림을 "a=inactive" 속성으로 표시해야 합니다. 비활성 방향 속성은 RFC 3108 \[3\]에 지정되어 있습니다. 실시간 전송 프로토콜\(RTP\) \[4\]의 경우 RTCP는 여전히 sendonly, recvonly 및 inactive 스트림에 대해 송수신됩니다. 즉, 미디어 스트림의 방향성은 RTCP 사용에 영향을 미치지 않습니다. 제공자가 피어와 미디어를 보내고 받으려는 경우 "a=sendrecv" 속성을 포함하거나 sendrecv가 기본값이므로 이를 생략할 수 있습니다.

recvonly 및 sendrecv 스트림의 경우, 제공자의 포트 번호와 주소는 제공자가 미디어 스트림을 수신하고자 하는 위치를 나타냅니다. sendonly RTP 스트림의 경우, 주소와 포트 번호는 제공자가 RTCP 보고서를 수신하고자 하는 위치를 간접적으로 나타냅니다. 달리 명시적으로 표시되지 않는 한, 보고서는 표시된 번호보다 하나 높은 포트 번호로 전송됩니다. 제공자에 있는 IP 주소와 포트는 제공자가 보낼 RTP 및 RTCP 패킷의 소스 IP 주소와 소스 포트에 대해 아무것도 나타내지 않습니다. 제공자의 포트 번호가 0이면 스트림이 제공되지만 사용되어서는 안 됨을 나타냅니다. 이는 초기 제공에서 유용한 의미가 없지만, 답변에 거부된 스트림을 나타내는 0 포트가 포함될 수 있기 때문에 완전성을 위해 허용됩니다\(섹션 6\). 또한 포트를 0으로 설정하여 기존 스트림을 종료할 수 있습니다\(섹션 8\). 일반적으로 포트 번호가 0이면 미디어 스트림이 필요하지 않음을 나타냅니다.

각 미디어 스트림에 대한 미디어 형식 목록은 두 가지 정보를 전달합니다.즉, 제공자가 전송 및/또는 수신할 수 있는 형식 집합\(RTP의 경우 코덱 및 코덱과 관련된 매개변수\)과 RTP의 경우 해당 형식을 식별하는 데 사용되는 RTP 페이로드 유형 번호입니다.여러 형식이 나열된 경우 제공자는 세션 중에 해당 형식 중 하나를 사용할 수 있음을 의미합니다.즉, 응답자는 새 제공을 보내지 않고도 나열된 형식 중 하나를 사용하여 세션 중간에 형식을 변경할 수 있습니다.sendonly 스트림의 경우 제공은 제공자가 이 스트림에 대해 보낼 의향이 있는 형식을 표시해야 합니다.recvonly 스트림의 경우 제공은 제공자가 이 스트림에 대해 받을 의향이 있는 형식을 표시해야 합니다.sendrecv 스트림의 경우 제공은 제공자가 보내고 받을 의향이 있는 코덱을 표시해야 합니다.

수신 전용 RTP 스트림의 경우, 페이로드 유형 번호는 제공자가 해당 코덱에 대해 수신할 것으로 예상하는 RTP 패킷의 페이로드 유형 필드 값을 나타냅니다. 송신 전용 RTP 스트림의 경우, 페이로드 유형 번호는 RTP 패킷의 페이로드 유형 필드 값을 나타냅니다.

offerer는 해당 코덱을 보내려고 계획하고 있습니다. sendrecv RTP 스트림의 경우, 페이로드 유형 번호는 offerer가 수신할 것으로 예상하고 보내고 싶어하는 페이로드 유형 필드의 값을 나타냅니다. 그러나 sendonly 및 sendrecv 스트림의 경우, 답변은 동일한 코덱에 대해 다른 페이로드 유형 번호를 나타낼 수 있으며, 이 경우 offerer는 반드시 답변의 페이로드 유형 번호와 함께 보내야 합니다.

- H.323과의 상호 운용성 문제로 인해 각 방향마다 다른 페이로드 유형 번호가 필요할 수 있습니다.

RFC 2327에 따르면, 미디어 형식의 추가 매개변수를 제공하기 위해 fmtp 매개변수가 존재할 수 있습니다.

RTP 스트림의 경우 모든 미디어 설명에는 RTP 페이로드 유형에서 인코딩으로의 "a=rtpmap" 매핑이 포함되어야 합니다. "a=rtpmap"이 없는 경우 현재 사용 중인 프로필\(예: RFC 1890\[5\]\)에서 정의한 기본 페이로드 유형 매핑을 사용해야 합니다.

- 이를 통해 정적 페이로드 유형에서 벗어나는 마이그레이션이 더 쉬워집니다.

모든 경우에 "m=" 줄의 형식은 선호도 순서대로 나열되어야 하며, 첫 번째로 나열된 형식이 선호됩니다. 이 경우 선호는 제안 수신자가 수용 가능한 가장 높은 선호도를 가진 형식을 사용해야 함을 의미합니다.

스트림에 ptime 속성이 있는 경우, 제공자가 수신하고자 하는 원하는 패킷화 간격을 나타냅니다. ptime 속성은 0보다 커야 합니다.

스트림에 대한 대역폭 속성이 있는 경우 제공자가 수신하고자 하는 원하는 대역폭을 나타냅니다. 0 값은 허용되지만 권장되지 않습니다. 미디어를 보내지 않아야 함을 나타냅니다. RTP의 경우 모든 RTCP도 비활성화합니다.

서로 다른 유형의 여러 미디어 스트림이 있는 경우 제공자는 동시에 해당 스트림을 사용하고자 한다는 의미입니다. 전형적인 사례는 화상 회의의 일부로 오디오 및 비디오 스트림을 사용하는 것입니다.

동일한 유형의 여러 미디어 스트림이 오퍼에 있는 경우 오퍼러가 해당 유형의 여러 스트림을 동시에 전송\(및/또는 수신\)하고자 한다는 의미입니다. 동일한 유형의 여러 스트림을 전송할 때 해당 유형의 각 미디어 소스\(예: 비디오의 경우 비디오 카메라 및 VCR\)가 각 스트림에 매핑되는 방식은 로컬 정책의 문제입니다. 사용자가 특정 미디어 유형에 대해 단일 소스를 사용하는 경우 하나의 정책만 의미가 있습니다. 소스는 동일한 유형의 각 스트림으로 전송됩니다. 각 스트림은 서로 다른 인코딩을 사용할 수 있습니다. 동일한 유형의 여러 스트림을 수신하는 경우

유형, 각 스트림이 해당 특정 유형의 다양한 미디어 싱크\(예: 오디오의 경우 스피커 또는 녹음 장치\)에 매핑되는 방식은 로컬 정책의 문제입니다. 그러나 정책에는 몇 가지 제약이 있습니다. 첫째, 동일한 유형의 여러 스트림을 수신하는 경우 각 스트림은 사용자에게 표시하기 위해 최소한 하나의 싱크에 매핑되어야 합니다. 즉, 동일한 유형의 여러 스트림을 수신하는 의도는 하나만 선택하는 것이 아니라 모두 병렬로 표시되어야 한다는 것입니다. 또 다른 제약은 여러 스트림을 수신하여 동일한 싱크로 보내는 경우 특정 미디어 방식으로 결합해야 한다는 것입니다. 예를 들어 두 개의 오디오 스트림의 경우 각각에서 수신된 미디어가 스피커에 매핑될 수 있습니다. 이 경우 결합 작업은 두 스트림을 혼합하는 것입니다. 싱크가 화면인 여러 인스턴트 메시징 스트림의 경우 결합 작업은 모든 스트림을 사용자 인터페이스에 표시하는 것입니다. 세 번째 제약은 여러 소스가 동일한 스트림에 매핑된 경우 해당 소스는 스트림으로 전송되기 전에 특정 미디어 방식으로 결합되어야 한다는 것입니다. 이러한 제약을 넘어서는 정책은 유연하지만, 에이전트는 컨퍼런스 서버가 아닌 한 싱크에서 소스로 미디어를 복사하는 정책을 일반적으로 원하지 않습니다\(즉, 한 스트림에서 수신된 미디어를 다른 스트림으로 복사하지 마십시오\).

동일한 유형의 여러 미디어 스트림에 대한 일반적인 사용 예는 선불 전화카드 애플리케이션으로, 사용자는 통화 중 언제든지 파운드\( "#"\) 키를 길게 눌러 전화를 끊고 동일한 카드에서 새 전화를 걸 수 있습니다. 여기에는 사용자로부터 두 대상\(원격 게이트웨이와 파운드를 찾는 DTMF 처리 애플리케이션\)으로의 미디어가 필요합니다. 이는 두 개의 미디어 스트림, 하나는 게이트웨이로의 sendrecv이고 다른 하나는\(사용자 관점에서\) DTMF 애플리케이션으로의 sendonly로 달성할 수 있습니다.

오퍼러가 오퍼를 보낸 후에는 해당 오퍼에 설명된 모든 recvonly 스트림에 대한 미디어를 수신할 준비가 되어 있어야 합니다. 오퍼의 모든 sendrecv 스트림에 대한 미디어를 보내고 받을 준비가 되어 있어야 하며, 오퍼의 모든 sendonly 스트림에 대한 미디어를 보낼 준비가 되어 있어야 합니다\(물론 피어가 필요한 주소와 포트 정보가 포함된 답변을 제공할 때까지 실제로 보낼 수는 없습니다\). RTP의 경우 답변이 도착하기 전에 미디어를 수신할 수 있지만 답변이 도착하기 전까지는 RTCP 수신기 보고서를 보낼 수 없습니다.

---
## **5.2 Multicast Streams**

세션 설명에 수신\(전송\) 전용으로 나열된 멀티캐스트 미디어 스트림이 포함된 경우 제공자와 응답자를 포함한 참가자는 해당 스트림에서만 수신\(전송\)할 수 있음을 의미합니다. 이는 제공자와 응답자 간의 미디어 흐름을 방향성으로 나타내는 유니캐스트 뷰와 다릅니다.

해당 설명 외에 제공되는 멀티캐스트 스트림의 의미는 RFC 2327\[1\]에 설명된 대로 정확히 동일합니다.

---
# **6 Generating the Answer**

제공된 세션 설명에 대한 답변은 제공된 세션 설명에 기반합니다. 답변이 어떤 면에서든 제공과 다른 경우\(다른 IP 주소, 포트 등\), 답변은 다른 엔터티에서 생성되므로 답변의 원점 라인은 반드시 달라야 합니다. 이 경우 답변의 "o=" 라인에 있는 버전 번호는 제공의 o 라인에 있는 버전 번호와 관련이 없습니다.

오퍼의 각 "m=" 줄에 대해 반드시 답변에 해당하는 "m=" 줄이 있어야 합니다. 답변에는 오퍼와 정확히 같은 수의 "m=" 줄이 포함되어야 합니다. 이를 통해 스트림을 순서에 따라 매치할 수 있습니다. 즉, 오퍼에 "m=" 줄이 하나도 없는 경우 답변에도 반드시 "m=" 줄이 하나도 없어야 합니다.

답변의 "t=" 라인은 오퍼의 라인과 동일해야 합니다. 세션 시간은 협상할 수 없습니다.

제공된 스트림은 어떤 이유로든 답변에서 거부될 수 있습니다. 스트림이 거부되면 제공자와 응답자는 해당 스트림에 대한 미디어\(또는 RTCP 패킷\)를 생성해서는 안 됩니다. 제공된 스트림을 거부하려면 답변에서 해당 스트림의 포트 번호를 0으로 설정해야 합니다. 나열된 모든 미디어 형식은 무시됩니다. SDP에서 지정한 대로 최소 하나는 있어야 합니다.

제공된 각 스트림에 대한 답변을 구성하는 것은 유니캐스트와 멀티캐스트가 다릅니다.

---
## **6.1 Unicast Streams**

스트림이 유니캐스트 주소로 제공되는 경우 해당 스트림에 대한 답변에는 유니캐스트 주소가 포함되어야 합니다. 답변에 있는 스트림의 미디어 유형은 제공의 미디어 유형과 일치해야 합니다.

스트림이 sendonly로 제공된 경우 해당 스트림은 답변에서 recvonly 또는 inactive로 표시되어야 합니다. 미디어 스트림이 offer에서 recvonly로 나열된 경우 해당 답변은 답변에서 sendonly 또는 inactive로 표시되어야 합니다. 제공된 미디어 스트림이 sendrecv로 나열된 경우\(또는 미디어 또는 세션 수준에서 direction 속성이 없는 경우 스트림은 기본적으로 sendrecv임\), 답변의 해당 스트림은 sendonly, recvonly, sendrecv 또는 inactive로 표시될 수 있습니다. 제공된 미디어 스트림이 inactive로 나열된 경우 해당 답변에서 inactive로 표시되어야 합니다.

답변에서 recvonly로 표시된 스트림의 경우, "m=" 줄에는 답변자가 제공에 나열된 것 중에서 수신할 의향이 있는 미디어 형식이 하나 이상 포함되어야 합니다. 스트림은 제공에 나열되지 않은 추가 미디어 형식을 나타낼 수 있으며, 답변자는 수신할 의향이 있습니다. 답변에서 sendonly로 표시된 스트림의 경우, "m=" 줄에는 답변자가 제공에 나열된 것 중에서 보낼 의향이 있는 미디어 형식이 하나 이상 포함되어야 합니다. 답변에서 sendrecv로 표시된 스트림의 경우, "m=" 줄에는 답변자가 제공에 나열된 것 중에서 보내고 받을 의향이 있는 코덱이 하나 이상 포함되어야 합니다. 스트림은 제공에 나열되지 않은 추가 미디어 형식을 나타낼 수 있으며, 답변자는 보내거나 받을 의향이 있습니다\(물론 제공에 나열되지 않았기 때문에 이때는 보낼 수 없습니다\). 답변에서 inactive로 표시된 스트림의 경우, 미디어 형식 목록은 제공에 따라 구성됩니다. 오퍼가 sendonly인 경우, 목록은 답변이 recvonly인 것처럼 구성됩니다. 마찬가지로 오퍼가 recvonly인 경우, 목록은 답변이 sendonly인 것처럼 구성되고, 오퍼가 sendrecv인 경우, 목록은 답변이 sendrecv인 것처럼 구성됩니다. 오퍼가 비활성인 경우, 목록은 오퍼가 실제로 sendrecv이고 답변이 sendrecv인 것처럼 구성됩니다.

응답의 연결 주소와 포트는 응답자가 미디어를 수신하고자 하는 주소를 나타냅니다\(RTP의 경우, RTCP는 명시적으로 달리 표시되지 않는 한 하나 더 높은 포트에서 수신됩니다\). 이 주소와 포트는 sendonly 스트림에도 반드시 존재해야 합니다. RTP의 경우, 하나 더 높은 포트는 여전히 RTCP를 수신하는 데 사용됩니다.

RTP의 경우, 특정 코덱이 오퍼에서 특정 페이로드 유형 번호로 참조된 경우, 답변에서 해당 코덱에 대해 동일한 페이로드 유형 번호를 사용해야 합니다. 동일한 페이로드 유형 번호가 사용되더라도, 답변에는 동적 페이로드 유형에 대한 페이로드 유형 매핑을 정의하는 rtpmap 속성이 포함되어야 하며, 정적 페이로드 유형에 대한 매핑이 포함되어야 합니다. "m=" 줄의 미디어 형식은 선호도 순서대로 나열되어야 하며, 나열된 첫 번째 형식이 선호됩니다. 이 경우 선호됨은 오퍼러가 답변에서 가장 높은 선호도를 가진 형식을 사용해야 함을 의미합니다.

답변자는 원하는 선호도 순서대로 형식을 나열할 수 있지만, 특정한 이유가 없는 한, 답변자는 제안에 제시된 것과 같은 상대적 순서로 형식을 나열하는 것이 좋습니다. 즉, 제안의 스트림이 오디오 코덱 8, 22 및 48을 그 순서대로 나열하고 답변자가 코덱 8과 48만 지원하는 경우, 답변자가 다음을 수행하는 것이 좋습니다.

변경할 이유가 없습니다. 답변의 코덱 순서는 48, 8이 아니라 8, 48이어야 합니다. 이렇게 하면 동일한 코덱이 양방향으로 사용되도록 보장하는 데 도움이 됩니다.

오퍼에서 fmtp 매개변수의 해석은 매개변수에 따라 달라집니다. 많은 경우 이러한 매개변수는 미디어 형식의 특정 구성을 설명하므로 미디어 형식 값 자체와 같이 처리해야 합니다. 즉, 설명하는 미디어 형식이 답변에 있는 경우 동일한 값을 가진 동일한 fmtp 매개변수가 답변에 있어야 합니다. 다른 fmtp 매개변수는 매개변수와 더 유사하여 각 에이전트가 다른 값을 사용하는 것이 완벽하게 허용됩니다. 이 경우 답변에 fmtp 매개변수가 포함될 수 있으며, 이러한 매개변수는 오퍼의 매개변수와 동일한 값을 가질 수도 있고 다를 수도 있습니다. 새로운 매개변수를 정의하는 SDP 확장은 offer/answer에서 적절한 해석을 지정해야 합니다.

응답자는 모든 미디어 스트림에 대해 0이 아닌 ptime 속성을 포함할 수 있습니다. 이는 응답자가 수신하고자 하는 패킷화 간격을 나타냅니다. 특정 스트림에 대해 각 방향에서 패킷화 간격이 동일해야 한다는 요구 사항은 없습니다.

응답자는 모든 미디어 스트림에 대한 대역폭 속성을 포함할 수 있습니다. 이는 응답자가 미디어를 보낼 때 제공자가 사용하기를 원하는 대역폭을 나타냅니다. 0 값이 허용되며 섹션 5에서 설명한 대로 해석됩니다.

응답자가 특정 제공된 스트림에 대해 공통된 미디어 형식을 가지고 있지 않은 경우, 응답자는 포트를 0으로 설정하여 해당 미디어 스트림을 거부해야 합니다.

모든 스트림에 공통된 미디어 형식이 없으면 제공된 세션 전체가 거부됩니다.

답변자가 답변을 보낸 후에는 해당 답변에서 설명하는 모든 recvonly 스트림에 대한 미디어를 수신할 준비가 되어 있어야 합니다. 답변의 모든 sendrecv 스트림에 대한 미디어를 보내고 받을 준비가 되어 있어야 하며, 즉시 미디어를 보낼 수 있습니다. 답변자는 답변에서 해당 스트림에 대해 나열된 모든 미디어 형식을 사용하여 recvonly 또는 sendrecv 스트림에 대한 미디어를 수신할 준비가 되어 있어야 하며, 즉시 미디어를 보낼 수 있습니다. 미디어를 보낼 때는 오퍼의 ptime 속성 값과 같은 패킷화 간격을 사용해야 합니다\(있는 경우\). 오퍼의 대역폭 속성 값보다 높지 않은 대역폭을 사용하여 미디어를 보내야 합니다\(있는 경우\). 답변자는 답변에 나열된 오퍼의 미디어 형식을 사용하여 보내야 하며, 오퍼에서 가장 선호하는 미디어 형식을 사용하여 보내야 합니다\(있는 경우\).

답변. RTP의 경우, 답변의 번호와 다르더라도 오퍼의 페이로드 유형 번호를 사용해야 합니다.

---
## **6.2 Multicast Streams**

스트림에 대한 양면적 관점이 있는 유니캐스트와 달리 멀티캐스트의 경우 스트림에 대한 단일 관점만 있습니다. 따라서 멀티캐스트 제안에 대한 답변을 생성하는 것은 일반적으로 스트림의 제한된 측면 집합을 수정하는 것을 포함합니다.

멀티캐스트 스트림이 수락되면 답변의 주소 및 포트 정보는 오퍼의 주소 및 포트 정보와 일치해야 합니다. 마찬가지로 답변의 방향성 정보\(sendonly, recvonly 또는 sendrecv\)는 오퍼의 방향성과 동일해야 합니다. 이는 멀티캐스트 세션의 모든 참가자가 세션 매개변수에 대한 동등한 뷰를 가져야 하기 때문이며, 이는 RFC 2327의 멀티캐스트 바이어스의 기본 가정입니다.

답변의 미디어 형식 세트는 제안의 미디어 형식과 동일하거나 하위 세트여야 합니다. 형식을 제거하는 것은 답변자가 해당 형식이 지원되지 않는다는 것을 나타내는 방법입니다.

답변의 ptime 및 대역폭 속성은 제안에 있는 속성과 동일해야 합니다\(있는 경우\). 없는 경우 0이 아닌 ptime을 답변에 추가할 수 있습니다.

---
# **7 Offerer Processing of the Answer**

제공자가 답변을 받으면 수락된 스트림에서 미디어를 보낼 수 있습니다\(답변에 sendrecv 또는 recvonly로 나열되어 있다고 가정\). 답변에 나열된 미디어 형식을 사용하여 보내야 하며, 보낼 때는 답변에 나열된 첫 번째 미디어 형식을 사용해야 합니다.

- 이것이 SHOULD이고 MUST가 아닌 이유는\(응답자에게도 SHOULD이고 MUST가 아님\) 종종 즉석에서 코덱을 변경해야 할 필요가 있기 때문입니다. 예를 들어, 무음 시간 동안 에이전트는 편안한 소음 코덱으로 전환하고 싶을 수 있습니다. 또는 사용자가 키패드에서 숫자를 누르면 에이전트는 RFC 2833\[9\]을 사용하여 해당 숫자를 보내고 싶을 수 있습니다. 혼잡 제어를 위해 피드백을 기반으로 더 낮은 속도의 코덱으로 변경해야 할 수 있습니다.

제안자는 답변에 있는 ptime 및 대역폭 속성 값에 따라 미디어를 전송해야 합니다.

제안자는 초기 제안에 나열되어 있으나 답변에는 없는 미디어 형식에 대한 수신을 즉시 중단할 수 있습니다.

---
# **8 Modifying the Session**

세션 중 어느 시점에서든 참가자는 세션의 특성을 수정하기 위해 새로운 제안을 발행할 수 있습니다. 제안/답변 모델의 작동에 있어서 위에서 정의한 것과 정확히 동일한 제안/답변 절차가 기존 세션의 매개변수를 수정하는 데 사용된다는 것은 기본입니다.

제안은 상대방에게 제공된 마지막 SDP\(제안이나 답변에서 제공되었을 수 있음\)와 동일할 수도 있고 다를 수도 있습니다. 마지막으로 제공된 SDP를 "이전 SDP"라고 합니다. 제안이 동일하다면 답변은 답변자의 이전 SDP와 동일할 수도 있고 다를 수도 있습니다. 제공된 SDP가 이전 SDP와 다르면 아래에서 설명하는 대로 구성에 몇 가지 제약이 있습니다.

세션의 거의 모든 측면을 수정할 수 있습니다. 새 스트림을 추가하고, 기존 스트림을 삭제할 수 있으며, 기존 스트림의 매개변수를 변경할 수 있습니다. 세션을 수정하는 오퍼를 발행할 때, 새 SDP의 "o=" 줄은 이전 SDP의 줄과 동일해야 합니다. 단, origin 필드의 버전은 이전 SDP에서 1씩 증가해야 합니다. origin 줄의 버전이 증가하지 않으면 SDP는 해당 버전 번호의 SDP와 동일해야 합니다. 응답자는 버전이 변경되지 않은 SDP가 포함된 오퍼를 받을 준비를 해야 합니다. 이는 사실상 아무 작업도 하지 않는 것입니다. 그러나 응답자는 섹션 6에 정의된 절차에 따라 유효한 답변을 생성해야 합니다\(이전 응답자의 SDP와 동일하거나 다를 수 있음\).

이전 SDP와 다른 SDP가 제공되는 경우, 새 SDP는 이전 SDP의 각 미디어 스트림에 대해 일치하는 미디어 스트림을 가져야 합니다. 즉, 이전 SDP에 N "m=" 줄이 있는 경우, 새 SDP에는 최소 N "m=" 줄이 있어야 합니다. 위에서부터 세어서 이전 SDP의 i번째 미디어 스트림은 위에서부터 세어서 새 SDP의 i번째 미디어 스트림과 일치합니다. 이 일치는 응답자가 새 SDP의 어느 스트림이 이전 SDP의 스트림에 해당하는지 확인하기 위해 필요합니다. 이러한 요구 사항 때문에 스트림의 "m=" 줄 수는 결코 감소하지 않고 동일하게 유지되거나 증가합니다. 이전 SDP에서 삭제된 미디어 스트림은 새 SDP에서 제거해서는 안 됩니다. 그러나 이러한 스트림의 속성은 존재할 필요가 없습니다.

---
## **8.1 Adding a Media Stream**

기존 미디어 설명 아래에 새로운 추가 미디어 설명을 넣거나, 포트를 0으로 설정하여 비활성화된 기존 미디어 스트림에 사용된 "슬롯"을 재사용하여 새로운 미디어 스트림을 만듭니다.

슬롯을 재사용한다는 것은 새 미디어 설명이 이전 미디어 설명을 대체하지만 SDP의 다른 미디어 설명에 대한 상대적 위치를 유지한다는 것을 의미합니다. 새 미디어 설명은 기존 미디어 섹션 아래에 나타나야 합니다. 이러한 미디어 설명의 서식을 지정하는 규칙은 섹션 5에 설명된 규칙과 동일합니다.

응답자가 제공자로부터 이전 SDP보다 더 많은 미디어 설명이 있는 SDP를 받거나, 이전에 포트가 0이었던 슬롯에 미디어 스트림이 있는 SDP를 받으면 응답자는 새로운 미디어 스트림이 추가되고 있음을 알게 됩니다. 이는 응답에 적절하게 구성된 미디어 설명을 배치하여 거부하거나 수락할 수 있습니다. 응답에서 새로운 미디어 설명을 구성하는 절차는 섹션 6에 설명되어 있습니다.

---
## **8.2 Removing a Media Stream**

기존 미디어 스트림은 해당 스트림의 포트 번호를 0으로 설정하여 새 SDP를 생성하여 제거합니다. 스트림 설명은 이전에 존재했던 모든 속성을 생략할 수 있으며 단일 미디어 형식만 나열할 수 있습니다.

포트 0으로 제공되는 스트림은 반드시 답변에 포트 0으로 표시해야 합니다. 제안과 마찬가지로 답변은 이전에 존재했던 모든 속성을 생략할 수 있으며, 제안에 있는 속성 중에서 단일 미디어 형식만 나열할 수 있습니다.

미디어 스트림을 제거하면 해당 스트림에 대한 미디어가 더 이상 전송되지 않으며 수신된 모든 미디어가 삭제됩니다. RTP의 경우 RTCP 전송도 중단되고 수신된 RTCP 패킷의 처리도 중단됩니다. 이와 관련된 모든 리소스는 해제될 수 있습니다. 사용자 인터페이스는 예를 들어 PC에서 관련 창을 닫아 스트림이 종료되었음을 나타낼 수 있습니다.

---
## **8.3 Modifying a Media Stream**

미디어 스트림의 거의 모든 특성은 수정될 수 있습니다.

---
### **8.3.1 Modifying Address, Port or Transport**

스트림의 포트 번호는 변경될 수 있습니다. 이를 위해 제공자는 m 줄의 포트 번호가 이전 SDP의 해당 스트림과 다른 새 미디어 설명을 만듭니다. 포트 번호만 변경하려는 경우 나머지 미디어 스트림 설명은 변경되지 않아야 합니다. 제공자는 제공이 전송되는 즉시 이전 및 새 포트에서 미디어를 수신할 준비를 해야 합니다. 제공자는 답변을 받고 미디어가 새 포트에 도착할 때까지 이전 포트에서 미디어 수신을 중단해서는 안 됩니다. 그렇게 하면 전환 중에 미디어가 손실될 수 있습니다.

이 경우 수신은 미디어가 미디어 싱크로 전달되었음을 의미합니다. 즉, 플레이아웃 버퍼가 있는 경우 에이전트는 새 포트의 미디어가 플레이아웃 버퍼의 맨 위에 도달할 때까지 이전 포트에서 계속 수신 대기합니다. 그 시점에 이전 포트에서 미디어 수신을 중단할 수 있습니다.

답변의 해당 미디어 스트림은 답변자의 이전 SDP의 스트림과 같을 수도 있고 다를 수도 있습니다. 업데이트된 스트림이 답변자에 의해 수락되면 답변자는 해당 스트림에 대한 트래픽을 즉시 새 포트로 보내기 시작해야 합니다. 답변자가 이전 SDP에서 포트를 변경하는 경우 답변이 전송되는 즉시 이전 및 새 포트에서 미디어를 수신할 준비가 되어 있어야 합니다. 답변자는 미디어가 새 포트에 도착할 때까지 이전 포트에서 미디어 수신을 중단해서는 안 됩니다. 그때 이전 포트에서 미디어 수신을 중단할 수 있습니다. 새 포트로 업데이트된 오퍼를 보내는 오퍼자의 경우도 마찬가지입니다. 미디어가 새 포트에 도착할 때까지 이전 포트에서 미디어 수신을 중단해서는 안 됩니다.

물론, 제안된 스트림이 거부되면 제안자는 거부를 수신하자마자 새로운 포트를 사용하여 수신할 준비를 중단할 수 있습니다.

미디어가 전송되는 IP 주소를 변경하려면 포트 번호를 변경하는 것과 동일한 절차를 따릅니다. 유일한 차이점은 포트 번호가 아니라 연결 회선이 업데이트된다는 것입니다.

스트림의 전송은 변경될 수 있습니다. 이를 수행하는 프로세스는 포트를 변경하는 것과 동일하지만 포트가 아닌 전송이 업데이트됩니다.

---
### **8.3.2 Changing the Set of Media Formats**

세션에서 사용된 미디어 형식 목록은 변경될 수 있습니다. 이를 위해 제공자는 "m=" 줄에 있는 미디어 형식 목록이 이전 SDP의 해당 미디어 스트림과 다른 새 미디어 설명을 만듭니다. 이 목록에는 새 형식이 포함될 수 있으며 이전 SDP에 있는 형식을 제거할 수 있습니다. 그러나 RTP의 경우 특정 동적 페이로드 유형 번호에서 해당 미디어 스트림 내의 특정 코덱으로의 매핑은 세션 기간 동안 변경되어서는 안 됩니다. 예를 들어 A가 동적 페이로드 유형 번호 46에 G.711이 할당된 오퍼를 생성하는 경우, 페이로드 유형 번호 46은 세션 내의 해당 미디어 스트림에 대한 모든 오퍼 또는 답변에서 그 지점부터 G.711을 참조해야 합니다. 그러나 여러 페이로드 유형 번호가 동일한 코덱에 매핑되어 업데이트된 오퍼도 G.711에 대해 페이로드 유형 번호 72를 사용할 수 있도록 하는 것은 허용됩니다.

- SDP와 미디어 스트림의 신호 교환 간의 느슨한 동기화로 인해 세션 동안 매핑은 고정되어야 합니다.

답변의 해당 미디어 스트림은 섹션 6에서 설명한 대로 공식화되며 미디어 형식도 변경될 수 있습니다.마찬가지로 섹션 6에서 설명한 대로 답변을 보내는 즉시 답변자는 답변에도 존재했던 오퍼의 모든 형식을 사용하여 미디어를 보내기 시작해야 하며, 스트림에서 보내기를 허용하는 경우 답변에 나열된 오퍼에서 가장 선호하는 형식을 사용해야 하며, 피어의 이전 SDP에 존재했더라도 오퍼에 없는 형식을 사용하여 보내면 안 됩니다.마찬가지로 제안자가 답변을 받으면 답변의 모든 형식을 사용하여 미디어를 보내기 시작해야 하며, 스트림에서 보내기를 허용하는 경우 가장 선호하는 형식을 사용해야 하며, 피어의 이전 SDP에 존재했더라도 답변에 없는 형식을 사용하여 보내면 안 됩니다.

에이전트가 미디어 형식을 사용하지 않을 때\(이전 SDP에 있었음에도 불구하고 제안이나 답변에 해당 형식을 나열하지 않음\) 에이전트는 잠시 동안 해당 형식의 미디어를 수신할 준비가 되어 있어야 합니다. 에이전트는 언제 해당 형식으로 수신을 중단할 준비가 되었는지 어떻게 알 수 있을까요? 알아야 하는 경우 적용할 수 있는 세 가지 기술이 있습니다. 첫째, 에이전트는 형식을 변경하는 것 외에도 포트를 변경할 수 있습니다. 미디어가 새 포트에 도착하면 피어가 이전 형식으로 전송을 중단했음을 알고 해당 형식으로 수신할 준비를 중단할 수 있습니다. 이 접근 방식은 미디어 형식에 독립적이라는 이점이 있습니다. 그러나 포트를 변경하면 리소스 예약을 변경하거나 보안 프로토콜을 다시 입력해야 할 수 있습니다. 두 번째 접근 방식은 코덱 하나를 버릴 때 모든 코덱에 대해 완전히 새로운 동적 페이로드 유형 세트를 사용하는 것입니다. 새 페이로드 유형 중 하나로 미디어를 수신하면 에이전트는 피어가 이전 형식으로 전송을 중단했음을 알게 됩니다. 이 접근 방식은 예약이나 보안 컨텍스트에 영향을 미치지 않지만 RTP에 국한되며 매우 작은 페이로드 유형 공간을 낭비합니다. 세 번째 접근 방식은 타이머를 사용하는 것입니다. 피어에서 SDP를 수신하면 타이머가 설정됩니다. 타이머가 작동하면 에이전트는 이전 형식으로 수신할 준비를 중단할 수 있습니다. 일반적으로 1분이라는 값이면 충분합니다. 어떤 경우에는 에이전트가 신경 쓰지 않을 수 있으므로 이전 형식으로 수신할 준비를 계속할 수 있습니다. 이 경우에는 아무것도 할 필요가 없습니다.

물론, 제공된 스트림이 거부될 경우, 거부를 받은 즉시 해당 제공은 새로운 형식을 사용하여 수신할 준비가 중단될 수 있습니다.

---
### **8.3.3 Changing Media Types**

스트림의 미디어 유형\(오디오, 비디오 등\)은 변경될 수 있습니다. 동일한 논리적 데이터가 전달되지만 다른 미디어 형식으로 전달되는 경우 미디어 유형을 변경하는 것이 좋습니다\(새로운 스트림을 추가하는 것과 대조적으로\). 이는 단일 스트림에서 음성대역 팩스와 팩스를 변경하는 데 특히 유용한데, 이 둘은 모두 별도의 미디어 유형입니다. 이를 위해 제공자는 변경해야 할 이전 SDP의 설명 대신 새로운 미디어 유형이 있는 새로운 미디어 설명을 만듭니다.

답변의 해당 미디어 스트림은 섹션 6에서 설명한 대로 공식화됩니다. 스트림이 허용 가능하다고 가정하면, 답변자는 오퍼를 수신하자마자 새로운 미디어 유형과 형식으로 전송을 시작해야 합니다. 오퍼자는 답변을 수신하고 새로운 유형의 미디어를 수신하여 플레이아웃 버퍼의 맨 위에 도달할 때까지 이전 유형과 새로운 유형이 모두 있는 미디어를 수신할 준비가 되어 있어야 합니다.

---
### **8.3.4 Changing Attributes**

미디어 설명의 다른 속성은 오퍼나 답변에서 업데이트될 수 있습니다. 일반적으로 에이전트는 변경 사항이 있는 SDP를 수신하면 새 매개변수를 사용하여 미디어\(스트림의 방향성이 허용하는 경우\)를 보내야 합니다.

---
## **8.4 Putting a Unicast Media Stream on Hold**

통화 중인 한 당사자가 다른 당사자를 "보류"하려는 경우, 즉 하나 이상의 유니캐스트 미디어 스트림 전송을 일시적으로 중단해 달라고 요청하는 경우, 당사자는 다른 당사자에게 업데이트된 SDP를 제공합니다.

보류할 스트림이 이전에 sendrecv 미디어 스트림이었던 경우, sendonly로 표시하여 보류합니다. 보류할 스트림이 이전에 recvonly 미디어 스트림이었던 경우, inactive로 표시하여 보류합니다.

이는 스트림이 각 방향으로 별도로 "보류"된다는 것을 의미합니다. 각 스트림은 독립적으로 "보류"됩니다. 보류된 스트림에 대한 오퍼를 수신한 사람은 해당 스트림을 보류한 상태로 자동으로 답변을 반환해서는 안 됩니다. 모든 스트림이 "보류"된 SDP를 보류된 SDP라고 합니다.

- 응답자가 보류 SDP로 보류 SDP에 응답하는 경우 특정 제3자 통화 제어 시나리오가 작동하지 않습니다.

일반적으로 사용자가 '대기'를 누르면 에이전트는 SDP의 모든 스트림이 sendonly 방향을 나타내는 오퍼를 생성하고 로컬에서 음소거하여 미디어가 멀리 전송되지 않고 재생되지 않습니다.

RFC 2543\[10\]은 사용자를 보류 상태로 두는 것이 연결 주소를 0.0.0.0으로 설정하여 수행된다고 명시했습니다. 통화를 보류 상태로 두는 데 사용하는 것은 더 이상 권장되지 않습니다. 보류된 스트림과 함께 RTCP를 사용할 수 없고 IPv6와 작동하지 않으며 연결 지향 미디어와 단절되기 때문입니다. 그러나 제안자가 특정 미디어 스트림 및 형식 세트를 사용하려고 하지만 제안 시점에 주소와 포트를 알지 못하는 경우 초기 제안에서 유용할 수 있습니다. 물론 사용할 때 포트 번호는 0이어서는 안 되며, 이는 스트림이 비활성화되었음을 나타냅니다. 에이전트는 연결 주소가 0.0.0.0인 SDP를 수신할 수 있어야 하며, 이 경우 RTP도 RTCP도 피어로 전송되지 않아야 함을 의미합니다.

---
# **9 Indicating Capabilities**

에이전트가 오퍼를 보내기 전에 해당 오퍼의 미디어 형식이 응답자에게 허용되는지 아는 것이 도움이 됩니다. SIP와 같은 특정 프로토콜은 이러한 기능을 쿼리하는 수단을 제공합니다. SDP는 이러한 쿼리에 대한 응답에서 기능을 나타내는 데 사용할 수 있습니다. 이 섹션에서는 이러한 SDP 메시지가 어떻게 포맷되는지 설명합니다. SDP는 메시지가 기능 표시를 위한 것이라는 것을 나타낼 방법이 없으므로 이는 상위 계층 프로토콜의 컨텍스트에서 결정됩니다. 기준 SDP가 기능을 나타내는 기능은 매우 제한적입니다. 허용되는 매개변수 범위 또는 값을 표현할 수 없으며 오퍼/답변 자체와 병렬로 수행할 수 없습니다. 확장을 통해 향후 이러한 제한 사항을 해결할 수 있습니다.

미디어 기능을 나타내기 위해 구성된 SDP는 다음과 같이 구성됩니다. 반드시 유효한 SDP여야 하지만, "e=" 및 "p=" 행을 모두 생략할 수 있습니다. "t=" 행은 "0 0"과 같아야 합니다. 에이전트에서 지원하는 각 미디어 유형에 대해 해당 유형의 해당 미디어 설명이 있어야 합니다. 원본 필드의 세션 ID는 미디어 기능을 나타내기 위해 구성된 각 SDP에 대해 고유해야 합니다. 포트는 0으로 설정해야 하지만 연결 주소는 임의적입니다. 포트 0을 사용하면 기능에 맞게 포맷된 SDP가 제안이나 답변으로 해석될 경우 미디어 스트림이 설정되지 않습니다.

"m=" 라인의 전송 구성 요소는 해당 미디어 유형에 대한 전송을 나타냅니다. 에이전트에서 지원하는 해당 유형의 각 미디어 형식에 대해 "m=" 라인에 나열된 미디어 형식이 있어야 합니다. RTP의 경우 동적 페이로드 유형이 사용되는 경우 rtpmap

속성을 지정해야 유형을 특정 형식에 바인딩할 수 있습니다. 특정 코덱에 대해 지원할 수 있는 동시 스트림 수 등과 같은 제약 조건을 나타낼 방법은 없습니다.

v=0 o=캐럴 28908764872 28908764872 IN IP4 100.3.6.6 s=- t=0 0 c=IN IP4 192.0.2.4 m=오디오 0 RTP/AVP 0 1 3 a=rtpmap:0 PCMU/8000 a=rtpmap:1 1016/8000 a=rtpmap:3 GSM/8000 m=비디오 0 RTP/AVP 31 34 a=rtpmap:31 H261/90000 a=rtpmap:34 H263/90000

```text
   Figure 1: SDP Indicating Capabilities
```

그림 1의 SDP는 에이전트가 3개의 오디오 코덱\(PCMU, 1016 및 GSM\)과 2개의 비디오 코덱\(H.261 및 H.263\)을 지원할 수 있음을 나타냅니다.

---
# **10 Example Offer/Answer Exchanges**

이 섹션에서는 제안/답변 교환의 예를 제공합니다.

---
## **10.1 Basic Exchange**

발신자 앨리스가 제안에 다음 설명을 포함했다고 가정해 보겠습니다. 여기에는 H.261\(페이로드 유형 31\)과 MPEG\(페이로드 유형 32\)를 사용하는 양방향 오디오 스트림과 두 개의 양방향 비디오 스트림이 포함됩니다. 제안된 SDP는 다음과 같습니다.

v=0 o=앨리스 2890844526 2890844526 IN IP4 호스트.어디서나.com s= c=IN IP4 호스트.어디서나.com t=0 0 m=오디오 49170 RTP/AVP 0 a=rtpmap:0 PCMU/8000 m=비디오 51372 RTP/AVP 31 a=rtpmap:31 H261/90000 m=비디오 53000 RTP/AVP 32 a=rtpmap:32 MPV/90000

수신자인 Bob은 첫 번째 비디오 스트림을 받거나 보내고 싶지 않기 때문에 아래 SDP를 답변으로 반환합니다.

v=0 o=밥 2890844730 2890844730 IN IP4 호스트.example.com s= c=IN IP4 호스트.example.com t=0 0 m=오디오 49920 RTP/AVP 0 a=rtpmap:0 PCMU/8000 m=비디오 0 RTP/AVP 31 m=비디오 53000 RTP/AVP 32 a=rtpmap:32 MPV/90000

나중에 어느 시점에서 Bob은 오디오 스트림을 수신할 포트\(49920에서 65422로\)를 변경하고 동시에 이벤트에 대한 RTP 페이로드 형식을 사용하여 수신 전용으로 추가 오디오 스트림을 추가하기로 결정합니다\[9\]. Bob은 제안에서 다음 SDP를 제공합니다.

v=0 o=밥 2890844730 2890844731 IN IP4 호스트.example.com s= c=IN IP4 호스트.example.com t=0 0 m=오디오 65422 RTP/AVP 0 a=rtpmap:0 PCMU/8000 m=비디오 0 RTP/AVP 31 m=비디오 53000 RTP/AVP 32 a=rtpmap:32 MPV/90000 m=오디오 51434 RTP/AVP 110 a=rtpmap:110 전화 이벤트/8000 a=recvonly

앨리스는 추가 미디어 스트림을 수락하여 다음과 같은 답을 생성합니다.

v=0 o=alice 2890844526 2890844527 IN IP4 host.anywhere.com s= c=IN IP4 host.anywhere.com t=0 0 m=오디오 49170 RTP/AVP 0 a=rtpmap:0 PCMU/8000 m=비디오 0 RTP/AVP 31 a=rtpmap:31 H261/90000 m=비디오 53000 RTP/AVP 32 a=rtpmap:32 MPV/90000 m=오디오 53122 RTP/AVP 110 a=rtpmap:110 전화 이벤트/8000 a=전송 전용

---
## **10.2 One of N Codec Selection**

임베디드 폰에서 흔히 볼 수 있는 현상은 압축에 사용되는 디지털 신호 프로세서\(DSP\)가 한 번에 여러 코덱을 지원할 수 있지만, 해당 코덱을 선택하면 즉시 변경할 수 없다는 것입니다. 이 예는 초기 제안/답변 교환을 사용하여 세션을 설정한 다음, 바로 두 번째 교환을 통해 코덱 세트를 잠그는 방법을 보여줍니다.

앨리스가 밥에게 한 초기 제안은 DSP에서 사용 가능한 세 개의 오디오 코덱이 있는 단일 오디오 스트림을 나타냅니다. 코덱이 잠길 때까지 미디어를 수신할 수 없으므로 스트림은 비활성으로 표시됩니다.

v=0 o=alice 2890844526 2890844526 IN IP4 host.anywhere.com s= c=IN IP4 host.anywhere.com t=0 0 m=오디오 62986 RTP/AVP 0 4 18 a=rtpmap:0 PCMU/8000 a=rtpmap:4 G723/8000 a=rtpmap:18 G729/8000 a=비활성

Bob은 PCMU와 G.723 간의 동적 전환을 지원할 수 있습니다. 그래서 그는 다음과 같은 답변을 보냅니다.

v=0 o=bob 2890844730 2890844731 IN IP4 host.example.com s= c=IN IP4 host.example.com t=0 0 m=오디오 54344 RTP/AVP 0 4 a=rtpmap:0 PCMU/8000 a=rtpmap:4 G723/8000 a=비활성

그러면 앨리스는 이 두 코덱 중 하나를 선택할 수 있습니다. 그래서 그녀는 sendrecv 스트림과 함께 업데이트된 오퍼를 보냅니다.

v=0 o=alice 2890844526 2890844527 IN IP4 host.anywhere.com s= c=IN IP4 host.anywhere.com t=0 0 m=audio 62986 RTP/AVP 4 a=rtpmap:4 G723/8000 a=sendrecv

Bob은 단일 코덱을 허용합니다.

v=0 o=bob 2890844730 2890844732 IN IP4 host.example.com s= c=IN IP4 host.example.com t=0 0 m=오디오 54344 RTP/AVP 4 a=rtpmap:4 G723/8000 a=sendrecv

답변자\(밥\)가 N개 코덱 중 하나만 지원할 수 있다면 밥은 제공 코덱 중 하나를 선택하여 답변에 넣습니다. 이 경우 앨리스는 해당 코덱으로 해당 스트림을 활성화하기 위해 재초대\(re-INVITE\)를 수행합니다.

첫 번째 교환에서 "a=inactive"를 사용하는 것의 대안으로, Alice는 모든 코덱을 나열하고 Bob으로부터 미디어를 수신하자마자 방금 수신한 코덱으로 잠그는 업데이트된 오퍼를 생성할 수 있습니다. 물론 Bob이 N개 중 하나의 코덱만 지원하는 경우, 그의 답변에는 코덱이 하나만 있을 것이고, 이 경우 단일 코덱으로 잠그기 위해 re-INVITE가 필요하지 않습니다.

---
# **11 Security Considerations**

공격자가 전송 중인 제안이나 답변을 수정할 수 있다면 수많은 공격이 가능합니다. 일반적으로 여기에는 미디어 스트림 전환\(도청 가능\), 통화 비활성화, 원치 않는 미디어 스트림 주입이 포함됩니다. 수동적 청취자가 가짜 제안을 구성하여 이를 거래소에 주입할 수 있다면 비슷한 공격이 가능합니다. 공격자가 제안과 답변을 관찰할 수만 있어도 기존 대화에 미디어 스트림을 주입할 수 있습니다.

Offer/answer는 SIP와 같은 애플리케이션 신호 프로토콜 내에서 전송에 의존합니다. 또한 보안 기능을 위해 해당 프로토콜에 의존합니다. 위에서 설명한 공격 때문에 해당 프로토콜은 Offer와 Answer의 엔드투엔드 인증 및 무결성 보호 수단을 제공해야 합니다. 도청을 방지하기 위해 본문 암호화를 제공해야 합니다. 그러나 미디어 주입 공격은 인증된 미디어 교환을 통해 해결할 수 있으므로 암호화 요구 사항은 MUST가 아닌 SHOULD입니다.

재생 공격도 문제가 있습니다. 공격자는 오래된 오퍼, 아마도 미디어를 보류한 오퍼를 재생하여 대화에서 미디어 스트림을 비활성화할 수 있습니다. 따라서 애플리케이션 프로토콜은 오퍼와 답변을 시퀀싱하고 오래된 오퍼나 답변을 감지하여 거부하는 안전한 방법을 제공해야 합니다.

SIP\[7\]은 이러한 모든 요구사항을 충족합니다.

---
# **12 IANA Considerations**

이 사양에는 IANA 고려사항이 없습니다.

---
# **13 Acknowledgements**

저자는 자세한 의견을 제시해 주신 Allison Mankin, Rohan Mahy, Joerg Ott, Flemming Andreasen에게 감사드리고 싶습니다.

---
# **14 Normative References**

```text
   [1]   Handley, M. and V. Jacobson, "SDP: Session Description
         Protocol", RFC 2327, April 1998.

   [2]   Bradner, S., "Key Words for Use in RFCs to Indicate Requirement
         Levels", BCP 14, RFC 2119, March 1997.

   [3]   Kumar, R. and M. Mostafa, "Conventions For the Use of The
         Session Description Protocol (SDP) for ATM Bearer Connections",
         RFC 3108, May 2001.

   [4]   Schulzrinne, H., Casner, S, Frederick, R. and V. Jacobson,
         "RTP: A Transport Protocol for Real-Time Applications", RFC
         1889, January 1996.

   [5]   Schulzrinne, H., "RTP Profile for Audio and Video Conferences
         with Minimal Control", RFC 1890, January 1996.
```

---
# **15 Informative References**

```text
   [6]   Handley, M., Perkins, C. and E. Whelan, "Session Announcement
         Protocol", RFC 2974, October 2000.

   [7]   Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A.,
         Peterson, J., Sparks, R., Handley, M. and E. Schooler, "SIP:
         Session Initiation Protocol", RFC 3261, June 2002.

   [8]   Schulzrinne, H., Rao, A. and R. Lanphier, "Real Time Streaming
         Protocol (RTSP)", RFC 2326, April 1998.

   [9]   Schulzrinne, H. and S. Petrack, "RTP Payload for DTMF Digits,
         Telephony Tones and Telephony Signals", RFC 2833, May 2000.

   [10]  Handley, M., Schulzrinne, H., Schooler, E. and J. Rosenberg,
         "SIP: Session Initiation Protocol", RFC 2543, March 1999.
```

---
# **16 Authors' Addresses**

```text
   Jonathan Rosenberg
   dynamicsoft
   72 Eagle Rock Avenue
   First Floor
   East Hanover, NJ 07936

   EMail: jdrosen@dynamicsoft.com
```

Henning Schulzrinne 컴퓨터 과학과 Columbia University 1214 Amsterdam Avenue New York, NY 10027 USA

```text
   EMail: schulzrinne@cs.columbia.edu
```

---
## **17.  Full Copyright Statement**

저작권\(C\)인터넷학회\(2002\). 판권 소유.

본 문서와 그 번역본은 다른 사람에게 복사 및 제공될 수 있으며, 본 문서에 대해 논평하거나 설명하거나 구현을 지원하는 파생 저작물은 어떤 종류의 제한 없이 전체 또는 일부를 준비, 복사, 출판 및 배포할 수 있습니다. 단, 위의 저작권 표시와 이 단락은 모든 사본과 파생물에 포함되어 있어야 합니다. 그러나 이 문서 자체는 저작권 표시를 제거하거나 인터넷 협회 또는 기타 인터넷 조직에 대한 참조를 제거하는 등 어떠한 방식으로도 수정할 수 없습니다. 단, 인터넷 표준을 개발할 목적으로 필요한 경우는 제외됩니다. 이 경우 저작권에 대한 절차는 인터넷 표준 프로세스를 따라야 하거나 영어 이외의 언어로 번역하려면 필요한 대로 따라야 합니다.

위에 부여된 제한된 권한은 영구적이며 Internet Society 또는 그 승계자 또는 양수인에 의해 취소되지 않습니다.

이 문서와 여기에 포함된 정보는 "있는 그대로" 제공되며 인터넷 사회와 인터넷 엔지니어링 태스크 포스는 여기에 있는 정보의 사용으로 인해 발생하지 않는 모든 보증을 포함하되 이에 국한되지 않고 명시적이든 묵시적이든 모든 보증을 부인합니다. 특정 목적에 대한 상품성이나 적합성에 대한 권리나 묵시적인 보증을 침해하는 행위.

---
# **Acknowledgement**

RFC 편집 기능을 위한 자금은 현재 Internet Society에서 제공됩니다.


```text
Network Working Group                                           F. Baker
Request for Comments: 3704                                 Cisco Systems
Updates: 2827                                                  P. Savola
BCP: 84                                                        CSC/FUNET
Category: Best Current Practice                               March 2004
```

- 멀티홈 네트워크에 대한 수신 필터링

---
# **Status of this Memo**

이 문서는 인터넷 커뮤니티를 위한 인터넷 모범 사례를 명시하고 개선을 위한 토론과 제안을 요청합니다. 이 메모의 배포는 무제한입니다.

---
# **Copyright Notice**

저작권\(C\)인터넷학회\(2004\). 판권 소유.

---
# **Abstract**

BCP 38, RFC 2827은 스푸핑된 주소가 있는 트래픽의 네트워크 액세스를 거부함으로써 분산 서비스 거부 공격의 영향을 제한하고 트래픽이 올바른 소스 네트워크로 추적될 수 있도록 보장하도록 설계되었습니다. 이러한 공격으로부터 인터넷을 보호하는 데 따른 부작용으로 솔루션을 구현하는 네트워크는 이러한 공격과 네트워킹 장비에 대한 스푸핑된 관리 액세스와 같은 다른 공격으로부터도 자신을 보호합니다. 예를 들어 멀티호밍\(Multihoming\)과 같은 문제가 발생할 수 있는 경우가 있습니다. 이 문서에서는 현재 수신 필터링 작동 메커니즘을 설명하고, 수신 필터링과 관련된 일반적인 문제를 검토하며, 특히 멀티호밍에 미치는 영향을 자세히 살펴봅니다. 이 메모는 RFC 2827을 업데이트합니다.

---
# **Table of Contents**

```text
   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Different Ways to Implement Ingress Filtering  . . . . . . . .  4
       2.1 Ingress Access Lists . . . . . . . . . . . . . . . . . . .  4
       2.2 Strict Reverse Path Forwarding . . . . . . . . . . . . . .  5
       2.3 Feasible Path Reverse Path Forwarding  . . . . . . . . . .  6
       2.4 Loose Reverse Path Forwarding  . . . . . . . . . . . . . .  6
       2.5 Loose Reverse Path Forwarding Ignoring Default Routes  . .  7
   3.  Clarifying the Applicability of Ingress Filtering  . . . . . .  8
       3.1 Ingress Filtering at Multiple Levels . . . . . . . . . . .  8
       3.2 Ingress Filtering to Protect Your Own Infrastructure . . .  8
       3.3 Ingress Filtering on Peering Links . . . . . . . . . . . .  9
   4.  Solutions to Ingress Filtering with Multihoming  . . . . . . .  9
       4.1 Use Loose RPF When Appropriate . . . . . . . . . . . . . . 10
       4.2 Ensure That Each ISP's Ingress Filter Is Complete  . . . . 11
       4.3 Send Traffic Using a Provider Prefix Only to That Provider 11
   5.  Security Considerations  . . . . . . . . . . . . . . . . . . . 12
   6.  Conclusions and Future Work  . . . . . . . . . . . . . . . . . 13
   7.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 14
   8.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 14
       8.1.  Normative References . . . . . . . . . . . . . . . . . . 14
       8.2.  Informative References . . . . . . . . . . . . . . . . . 14
   9.  Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 15
   10. Full Copyright Statement . . . . . . . . . . . . . . . . . . . 16
```

---
## **1.  Introduction**

BCP 38, RFC 2827\[1\]은 스푸핑된 주소가 있는 트래픽의 네트워크 액세스를 거부함으로써 분산 서비스 거부 공격의 영향을 제한하고 트래픽이 올바른 소스 네트워크로 추적될 수 있도록 보장하도록 설계되었습니다. 이러한 공격으로부터 인터넷을 보호하는 데 따른 부작용으로 솔루션을 구현하는 네트워크는 이러한 공격과 네트워킹 장비에 대한 스푸핑된 관리 액세스와 같은 다른 공격으로부터도 자신을 보호합니다. 멀티호밍\(Multihoming\) 등으로 인해 문제가 발생할 수 있는 경우가 있습니다. 이 문서에서는 현재 수신 필터링 작동 메커니즘을 설명하고, 수신 필터링과 관련된 일반적인 문제를 조사하며, 특히 멀티호밍에 미치는 영향을 자세히 살펴봅니다.

RFC 2827에서는 ISP가 고객 네트워크에서 합법적으로 사용하지 않는 소스 주소에서 들어오는 네트워크로 들어오는 트래픽을 삭제하여 고객의 트래픽을 감시할 것을 권장합니다. 필터링에는 소스 주소가 소위 "화성 주소"\(0.0.0.0/8, 10.0.0.0/8 내의 모든 주소를 포함하여 예약된 주소\[3\]\)인 트래픽이 포함되지만 이에 국한되지는 않습니다. 127.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16, 224.0.0.0/4 또는 240.0.0.0/4.

수신 필터링 절차의 이유는 분산 서비스 거부 공격이 필드에 임의의 숫자를 배치하여 다른 시스템의 소스 주소를 자주 스푸핑하기 때문입니다. 일부 공격에서 이 난수는 대상 네트워크 내에서 결정적으로 존재하며 동시에 하나 이상의 시스템을 공격하고 해당 시스템이 ICMP 메시지 또는 기타 트래픽을 통해 다른 시스템을 공격하도록 합니다. 이 경우 공격받은 사이트는 인터넷에서 수신한 패킷의 소스 주소에 해당 접두사가 사용되지 않았는지 확인하여 적절한 필터링을 통해 자신을 보호할 수 있습니다. 다른 공격에서는 소스 주소가 말 그대로 임의의 32비트 숫자이므로 공격 소스를 추적하기가 어렵습니다. 엣지 네트워크를 떠나 ISP로 들어가는 트래픽을 합법적으로 전송하는 트래픽으로 제한할 수 있다면 공격은 어느 정도 완화될 수 있습니다. 무작위 또는 부적절한 소스 주소가 있는 트래픽은 심각한 피해를 입히기 전에 억제될 수 있으며 공격은 쉽게 추적될 수 있습니다. 최소한 소스 네트워크에.

이 문서는 1\) 일반적인 수신 필터링 방법에 대해 자세히 알아보고 싶거나 2\) 이미 수신 필터링을 어느 정도 사용하고 있지만 사용 범위를 확대하고 함정을 피하려는 ISP 및 에지 네트워크 운영자를 대상으로 합니다. 멀티홈/비대칭 시나리오의 수신 필터링.

섹션 2에서는 수신 필터링을 구현하는 여러 가지 다른 방법을 일반적인 맥락에서 설명하고 검토합니다. 섹션 3에서는 수신 필터링 방법의 적용 가능성에 대한 몇 가지 설명이 이루어졌습니다. 섹션 4에서는 멀티호밍 관점에서 수신 필터링을 자세히 분석합니다. 섹션 5에서는 결론과 잠재적인 향후 작업 항목이 식별됩니다.

---
## **2.  Different Ways to Implement Ingress Filtering**

이 섹션에서는 이 메모를 작성하는 시점에 수신 필터링을 구현하는 데 사용되는 다양한 운영 기술을 소개합니다. 메커니즘은 일반적인 용어로 설명 및 분석되며, 멀티호밍 관련 문제는 섹션 4에 설명되어 있습니다.

다양한 영향을 미치면서 RFC 2827을 구현할 수 있는 방법에는 최소한 5가지가 있습니다. 여기에는 다음이 포함됩니다\(이름은 비교적 일반적으로 사용됨\).

```text
   o  Ingress Access Lists

   o  Strict Reverse Path Forwarding

   o  Feasible Path Reverse Path Forwarding

   o  Loose Reverse Path Forwarding

   o  Loose Reverse Path Forwarding ignoring default routes
```

다른 메커니즘도 가능하며 실제로 추가 연구, 사양, 구현 및/또는 배포를 통해 이익을 얻을 수 있는 기술이 많이 있습니다. 섹션 6을 참조하십시오. 그러나 이는 범위를 벗어납니다.

---
### **2.1.  Ingress Access Lists**

수신 액세스 목록은 허용되는 접두사 목록과 비교하여 네트워크 인터페이스에서 수신된 모든 메시지의 소스 주소를 확인하고 필터와 일치하지 않는 모든 패킷을 삭제하는 필터입니다. 이것이 수신 필터를 구현하는 유일한 방법은 아니지만 RFC 2827 \[1\]에서 제안한 방법이며 어떤 의미에서는 가장 결정론적인 방법입니다.

그러나 수신 액세스 목록은 일반적으로 수동으로 유지 관리됩니다. 예를 들어, 접두사 세트가 변경된 경우\(예: 멀티호밍의 결과로\) ISP에서 목록을 업데이트하는 것을 잊어버리면 패킷이 수신 필터를 통과하지 못할 경우 패킷이 폐기될 수 있습니다.

당연히 이 문제는 수신 액세스 목록에만 국한되지 않습니다. 수신 필터가 완료되지 않은 경우 수신 필터링에 내재된 문제입니다. 그러나 일반적으로 Ingress 액세스 목록은 다른 메커니즘보다 유지 관리가 더 어렵고, 오래된 목록을 사용하면 합법적인 액세스를 방해할 수 있습니다.

---
### **2.2.  Strict Reverse Path Forwarding**

엄격한 역방향 경로 전달\(Strict RPF\)은 수신 필터를 구현하는 간단한 방법입니다. 액세스 목록이 동적이라는 점을 제외하면 수신 필터링에 액세스 목록을 사용하는 것과 개념적으로 동일합니다. 이는 중복 구성을 방지하는 데에도 사용될 수 있습니다\(예: 정적 경로 또는 BGP 접두사 목록 필터 및 인터페이스 액세스 목록 유지\). 절차는 FIB\(Forwarding Information Base\)에서 소스 주소를 조회하고 트래픽을 패킷 소스로 전달하는 데 사용되는 인터페이스에서 패킷이 수신되면 검사를 통과하는 것입니다.

엄격한 역방향 경로 전달은 모든 종류의 에지 네트워크 앞에서 매우 합리적인 접근 방식입니다. 특히 네트워크 에지가 BGP를 사용하여 여러 접두사를 광고하는 경우 Ingress 액세스 목록보다 훨씬 우수합니다. 간단하고 저렴하며 빠르고 역동적인 필터를 만듭니다.

그러나 엄격한 역방향 경로 전달에는 그 자체로 몇 가지 문제가 있습니다. 첫째, 이 테스트는 라우팅이 대칭인 장소, 즉 한 방향의 IP 데이터그램과 다른 방향의 응답이 결정론적으로 동일한 경로를 따르는 장소에만 적용 가능합니다. 이는 ISP에 대한 에지 네트워크 인터페이스에서는 일반적이지만 일반적으로 비대칭 "뜨거운 감자" 라우팅을 사용하는 ISP 간에는 전혀 일반적이지 않습니다. 또한 BGP가 접두사를 전달하고 일부 합법적인 접두사가 정책에 따라 ISP에 의해 광고되지 않거나 허용되지 않는 경우 효과는 불완전한 액세스 목록을 사용하는 수신 필터링과 동일합니다. 일부 합법적인 트래픽은 경로 부족으로 필터링됩니다. 필터링 라우터의 전달 정보 베이스에 있습니다.

특히 BGP의 경우 작동 기술이 있지만 다른 라우팅 프로토콜에도 어느 정도 적용 가능하여 비대칭 또는 멀티홈 트래픽의 경우 엄격한 RPF가 더 잘 작동하도록 할 수 있습니다. ISP는 직접 수신된 경로를 선호하기 위해 공급업체별 "가중치" 또는 프로토콜 거리 등 라우터 외부로 전파되지 않는 더 나은 메트릭을 할당합니다. BGP와 충분한 기계가 갖춰져 있으면 BGP 커뮤니티\[2\]를 사용하여 기본 설정을 자동화할 수도 있습니다. 이렇게 하면 기본 연결만 사용하고 일반적으로 패킷이 통과하지 않는 시나리오에서도 경로는 항상 FIB에서 가장 좋은 경로가 됩니다.

인터페이스를 통해. 이 방법은 기본 및 보조 에지 라우터 간에 엄격한 RPF 필터링이 없다고 가정합니다. 특히, 다른 ISP에 대한 멀티호밍에 적용될 때 이 가정은 실패할 수 있습니다.

---
### **2.3.  Feasible Path Reverse Path Forwarding**

실행 가능한 경로 역방향 경로 전달\(실행 가능한 RPF\)은 엄격한 RPF의 확장입니다. 소스 주소는 여전히 FIB\(또는 이에 상응하는 RPF 관련 테이블\)에서 조회되지만 거기에 하나의 최적 경로를 삽입하는 대신 대체 경로\(있는 경우\)도 추가되어 고려할 수 있습니다. 목록은 라우팅 프로토콜별 방법을 사용하여 채워집니다. 예를 들어 RIB\(Routing Information Base\)에 가능한 BGP 경로 전체 또는 N개\(여기서 N은 전체보다 작음\)를 포함합니다. 때때로 이 방법은 엄격한 RPF 구현의 일부로 구현되었습니다.

네트워크 가장자리에서 비대칭 라우팅 및/또는 멀티호밍의 경우 이 접근 방식은 엄격한 RPF의 가장 큰 문제를 비교적 쉽게 해결할 수 있는 방법을 제공합니다.

Feasible RPF가 작동하는 맥락을 이해하는 것이 중요합니다. 메커니즘은 실행 가능한 RPF 검사를 수행하는 모든 라우터에 전파되는 일관된 경로 광고\(즉, 모든 경로를 통해 동일한 접두사\)에 의존합니다. 예를 들어, 경로 맵이나 기타 라우팅 정책이 최신이 아니기 때문에 보조 ISP가 기본 ISP에 BGP 광고를 전파하지 않는 경우에는 이것이 적용되지 않을 수 있습니다. 실패 모드는 위에서 설명한 대로 일반적으로 "운영상 향상된 Strict RPF"와 유사합니다.

일반적인 지침에 따라 광고가 필터링되면 패킷도 필터링됩니다.

결과적으로 적절하게 정의된 Feasible RPF는 특정 종류의 비대칭 라우팅 시나리오에서 매우 강력한 도구이지만 운영 역할과 적용 가능성을 더 잘 이해하는 것이 중요합니다.

---
### **2.4.  Loose Reverse Path Forwarding**

느슨한 역방향 경로 전달\(Loose RPF\)은 알고리즘적으로 엄격한 RPF와 유사하지만 경로가 가리키는 위치가 아니라 경로\(해당되는 경우 기본 경로도 포함\)의 존재만 확인한다는 점에서 다릅니다. 실제로 이는 "경로 존재 확인"으로 간주될 수 있습니다\("느슨한 RPF는 애초에 "역방향 경로" 확인이 없기 때문에 어떤 의미에서는 잘못된 이름입니다\).

Loose RPF의 의심스러운 이점은 비대칭 라우팅 상황에서 발견됩니다. "화성 주소" 또는 현재 라우팅되지 않은 주소와 같이 경로가 전혀 없으면 패킷이 삭제되지만 경로가 존재하는 경우에는 삭제되지 않습니다.

그러나 느슨한 역방향 경로 전달에는 문제가 있습니다. 방향성을 희생하기 때문에 에지 네트워크의 트래픽을 해당 네트워크에서 합법적으로 소스되는 트래픽으로 제한하는 기능을 상실하여 대부분의 경우 메커니즘을 수신 필터링 메커니즘으로 쓸모 없게 만듭니다.

또한 많은 ISP는 소위 "허니팟\(Honey Pot\)" 시스템에서 불법 트래픽을 수집하거나 "실제" 경로가 없는 트래픽을 삭제하는 등 다양한 목적으로 기본 경로를 사용하며, 소규모 ISP는 전송 기능을 구입하여 더 큰 공급자의 기본 경로. Loose RPF의 적어도 일부 구현은 기본 경로가 가리키는 위치를 확인합니다. 경로가 Loose RPF가 활성화된 인터페이스를 가리키는 경우 해당 인터페이스에서 모든 패킷이 허용됩니다. 아무 곳이나 다른 인터페이스를 가리키지 않으면 가짜 소스 주소가 있는 패킷은 기본 경로가 있는 경우에도 Loose RPF 인터페이스에서 삭제됩니다. 이러한 세부적인 검사가 구현되지 않은 경우 기본 경로가 있으면 Loose RPF의 효과가 완전히 무효화됩니다.

Loose RPF가 잘 맞는 한 가지 사례는 "Martian" 또는 기타 라우팅되지 않은 주소가 포함된 패킷을 제거하기 위해 업스트림 공급자의 패킷을 필터링하는 ISP일 수 있습니다.

다른 접근 방식이 적합하지 않은 경우 느슨한 RPF를 계약 확인의 한 형태로 사용할 수 있습니다. 다른 네트워크는 아마도 적절한 수신 필터링 규칙을 제공했음을 인증하므로 필터링을 수행하는 네트워크는 사실을 확인하고 패킷이 있는 경우에만 반응하면 됩니다. 계약 위반이 감지되었음을 나타냅니다. 물론 이 메커니즘은 사용된 소스 주소가 "화성" 또는 기타 라우팅되지 않은 주소인지 여부만 표시합니다. 다른 사람의 주소 공간에서 가져온 것인지는 표시되지 않습니다.

---
### **2.5.  Loose Reverse Path Forwarding Ignoring Default Routes**

다섯 번째 구현 기술은 기본 경로를 무시하는 느슨한 RPF, 즉 "명시적인 경로 존재 확인"으로 특징지어질 수 있습니다. 이 접근 방식에서 라우터는 경로 테이블에서 소스 주소를 조회하고 경로가 발견되면 패킷을 보존합니다. 단, 조회 시 기본 경로는 제외됩니다. 따라서 이 기술은 합법적인 트래픽을 처리하기 위한 광범위한\(또는 전체\) 명시적 경로 목록과 함께 가짜 소스 주소가 포함된 트래픽을 포착하는 데에만 기본 경로가 사용되는 시나리오에서 주로 사용할 수 있습니다.

Loose RPF와 마찬가지로 이는 ISP 간 링크와 같이 비대칭 라우팅이 발견되는 장소에서 유용합니다. 그러나 Loose RPF와 마찬가지로 방향성을 희생하므로 에지 네트워크의 트래픽을 해당 네트워크에서 합법적으로 소스되는 트래픽으로 제한하는 기능이 상실됩니다.

---
## **3.  Clarifying the Applicability of Ingress Filtering**

쉽게 알 수 없는 점은 수신 필터링이 ISP와 최종 사용자 간의 "라스트 마일" 인터페이스에만 적용되지 않는다는 것입니다. 적절한 경우 ISP의 가장자리, LAN을 기업 네트워크에 연결하는 라우터 등에서 수신 필터링을 수행하는 것이 좋습니다. 이렇게 하면 심층적인 방어가 강화됩니다.

---
### **3.1.  Ingress Filtering at Multiple Levels**

수신 필터링의 광범위한 배포로 인해 문제는 반복적으로 발생합니다. 수신 필터링은 처음 두 당사자 사이뿐만 아니라 사용되는 모든 곳에서 작동해야 합니다. 즉, 사용자가 ISP와 특수 수신 필터링 배열을 협상하는 경우 수신 필터링이 사용되는 경우 ISP의 업스트림 및 피어링 링크에도 동일한 배열이 적용되는지 확인해야 합니다\(또는 ISP가 보장하는지 확인\). - 또는 미래의 어느 시점에 익숙해질 것입니다. 업스트림 ISP 및 동료와 유사합니다.

결과적으로, 패킷이 이동하고 수신 필터링이 적용될 수 있는 모든 당사자에게 정보를 자동으로 전파하지 않는 수동 모델은 일반적인 유용성이 제한적입니다.

---
### **3.2.  Ingress Filtering to Protect Your Own Infrastructure**

수신 필터링의 광범위한 배포로 인해 발생하는 또 다른 기능은 쉽게 눈에 띄지 않을 수 있습니다. 라우터 및 기타 ISP 인프라는 여러 종류의 공격에 취약합니다. 위협은 일반적으로 이러한 시스템에 액세스할 수 있는 사람을 제한함으로써 완화됩니다.

그러나 수신 필터링\(또는 적어도 제한된 하위 집합\)이 모든 경계\(고객, 동료 및 업스트림을 향하여\)에 배포되어 자신의 주소를 소스 주소로 사용하는 것을 차단하지 않는 한 공격자는 다음과 같은 작업을 수행할 수 있습니다. 인프라 장비의 보호를 우회합니다.

따라서 수신 필터링을 배포하면 인터넷 전체에 도움이 될 뿐만 아니라 자체 인프라에 대한 여러 종류의 위협으로부터도 보호할 수 있습니다.

---
### **3.3.  Ingress Filtering on Peering Links**

ISP 또는 최종 사이트에 의한 피어링 링크에 대한 수신 필터링은 실제로 보다 일반적인 "다운스트림" 또는 "업스트림" 수신 필터링과 크게 다르지 않습니다.

그러나 혼합된 업스트림/다운스트림 및 피어링 링크를 사용하면 서로 다른 링크가 서로 다른 속성\(예: 계약, 신뢰, 수신 필터링 메커니즘의 실행 가능성 등과 관련\)을 가질 수 있다는 점에 유의하는 것이 중요합니다. 가장 일반적인 경우에는 피어에 대한 수신 필터링 메커니즘\(예: 엄격한 RPF\)을 사용하는 것만으로도 피어 간의 라우팅이 합리적으로 대칭으로 유지되는 한 잘 작동합니다. 피어링 링크를 통해 올라와야 하는 업스트림 링크에서 오는 소스 주소를 필터링할 수 있는 것이 유용하다고 간주될 수도 있습니다\(엄격한 RPF와 같은 것이 업스트림에 사용됨을 암시\). 그러나 이는 더 복잡한 주제이며 고려되는 사항입니다. 범위 밖; 섹션 6을 참조하세요.

---
## **4.  Solutions to Ingress Filtering with Multihoming**

먼저, 사이트가 멀티홈인 이유를 물어봐야 합니다. 예를 들어 에지 네트워크는 다음을 수행할 수 있습니다.

- 견고성을 보장하기 위해 두 개의 ISP를 사용하여 인터넷 연결을 백업합니다.

- 현재 가장 빠른 TCP 서비스를 제공하는 ISP를 사용하세요.

- ISP가 서비스를 제공하지 않는 장소에서 인터넷에 대한 여러 액세스 지점이 필요한 경우, 또는

- ISP를 변경합니다\(따라서 일시적으로만 멀티호밍\).

멀티홈 네트워크에 대한 수신 필터의 한계를 해결하기 위한 다양한 접근 방식을 상상할 수 있습니다. 옵션은 다음과 같습니다:

```text
   1.  Do not multihome.

   2.  Do not use ingress filters.
```

1. 서비스가 불완전하다는 점을 인정합니다.

1. 일부 인터페이스에서는 섹션 4.1에 설명된 대로 적절한 형태의 느슨한 RPF 검사를 사용하여 수신 필터링을 약화시킵니다.

1. 섹션 4.2에 설명된 대로 BGP 또는 계약을 통해 각 ISP의 수신 필터가 완전한지 확인합니다.

1. 섹션 4.3에 설명된 대로 에지 네트워크가 실제로 수신 필터를 통과하는 ISP에만 트래픽을 전달하는지 확인합니다.

이들 중 처음 세 가지는 완전성을 위해 분명히 언급되었습니다. 그들은 실행 가능한 위치가 아니며 그럴 수도 없습니다. 마지막 3개는 아래에서 고려됩니다.

네 번째와 다섯 번째는 섹션 3.1에 설명된 대로 업스트림 ISP에서도 보장되어야 합니다.

다음으로, 이제 수신 필터의 부작용을 처리하기 위한 실행 가능한 방법을 살펴보겠습니다.

---
### **4.1.  Use Loose RPF When Appropriate**

비대칭 라우팅이 선호되거나 불가피한 경우 경로가 대칭이어야 하는 엄격한 RPF와 같은 메커니즘을 사용하여 수신 필터링을 배포하기 어려울 수 있습니다. 많은 경우에 운영 방법이나 실행 가능한 RPF를 사용하면 아래 설명된 것처럼 수신 필터가 완전한지 확인할 수 있습니다. 실패할 경우 유일한 실제 옵션은 수신 필터링을 수행하지 않거나 수동 액세스 목록\(다른 메커니즘과 함께\)을 사용하거나 일부 형태의 Loose RPF 검사를 사용하는 것입니다.

수신 필터를 전혀 제공하지 못하면 본질적으로 다운스트림 네트워크가 스스로 작동하도록 신뢰하게 되며 이는 가장 현명한 조치가 아닙니다. 그러나 특히 수백 또는 수천 개의 접두사로 구성된 대규모 네트워크의 경우 수동 액세스 목록을 유지하는 것은 너무 많은 일이 될 수 있습니다.

Loose RPF를 사용하는 것은 테스트의 방향성을 잃기 때문에 Edge 네트워크와 ISP 사이에서 좋은 선택이 아닌 것 같습니다. 이는 업스트림 네트워크에서 완전한 필터를 사용하거나 업스트림 네트워크가 거부할 패킷이 다운스트림 네트워크에 도달하지 않도록 다운스트림 네트워크에서 보장하는 것을 선호합니다.

따라서 "화성" 또는 기타 라우팅되지 않은 주소가 사용되는지 여부를 측정하는 방법을 제외하고는 Loose RPF의 사용을 권장할 수 없습니다.

---
### **4.2.  Ensure That Each ISP's Ingress Filter Is Complete**

에지 네트워크의 경우 견고성을 위해 멀티호밍을 사용하거나 측정된 ISP 동작에 따라 때때로 라우팅을 변경하는 경우 가장 간단한 접근 방식은 ISP가 실제로 라우팅에서 해당 주소를 전달하는지 확인하는 것입니다. 이를 위해서는 에지 네트워크가 공급자 독립적인 접두사를 사용하고 BGP를 통해 ISP와 경로를 교환하여 해당 접두사가 주요 전송 ISP로 업스트림으로 전달되도록 해야 하는 경우가 많습니다. 필연적으로 이는 에지 네트워크가 RIR로부터 별도의 주소 할당 및 자율 시스템 번호를 받을 수 있는 규모와 기술 역량을 갖추고 있음을 의미합니다.

ISP의 수신 필터가 완전한지 보다 쉽게 ​​확인할 수 있는 여러 가지 기술이 있습니다. 운영 기술을 갖춘 실행 가능한 RPF와 엄격한 RPF는 모두 ISP와 에지 네트워크 간의 멀티홈 또는 비대칭 시나리오에 매우 잘 작동합니다.

라우팅 프로토콜이 사용되지 않고 Radius, TACACS 또는 Diameter와 같은 데이터베이스에서 고객 정보가 생성되는 경우 엄격한 RPF 또는 Ingress 액세스 목록을 통해 수신 필터링을 가장 쉽게 보장하고 최신 상태로 유지할 수 있습니다. 그러한 데이터베이스에서 자동으로 생성됩니다.

---
### **4.3.  Send Traffic Using a Provider Prefix Only to That Provider**

공급자 기반 주소 지정을 사용하고 ISP가 수신 필터를 구현하는\(그렇게 해야 함\) 소규모 에지 네트워크의 경우 세 번째 옵션은 지정된 공급자의 주소 공간에서 발생하는 트래픽을 해당 공급자로 라우팅하는 것입니다.

이는 복잡한 절차는 아니지만 신중한 계획과 구성이 필요합니다. 견고성을 위해 에지 네트워크는 두 개 이상의 서로 다른 POP\(Points of Presence\)를 통해 각 ISP에 연결하도록 선택할 수 있습니다. 따라서 하나의 POP 또는 회선이 중단되는 경우 동일한 ISP에 대한 다른 링크를 사용할 수 있습니다. 또는 동일한 ISP에 대한 여러 연결 대신 터널 세트를 구성할 수 있습니다\[4\]\[5\]. 이러한 방식으로 에지 라우터는 먼저 ISP로 향하는 패킷의 소스 주소를 검사하고 이를 ISP를 향한 적절한 터널이나 인터페이스로 전환하도록 구성됩니다.

이러한 시나리오가 철저하게 적용되어 네트워크가 사용하는 모든 접두사에 대해 에지 네트워크에서 종료 라우터가 선택되면 다른 접두사에서 발생하는 트래픽을 ISP로 보내는 대신 즉시 삭제할 수 있습니다.

---
## **5.  Security Considerations**

수신 필터링은 일반적으로 하나의 네트워크 인터페이스에 도착하는 트래픽이 해당 인터페이스를 통해 연결할 수 있는 네트워크에 있는 컴퓨터에서 합법적으로 들어오는지 확인하기 위해 수행됩니다.

실제 소스 수신 필터링이 수행될수록 더 효과적입니다. 첫 번째 홉 라우터가 인접한 최종 시스템에서 발생하는 트래픽의 주소가 올바르게 지정되었는지 확인하기를 바랄 수도 있습니다. 더 멀리 있는 라우터는 표시된 접두사 내에 그러한 시스템이 있을 가능성만 보장할 수 있습니다. 따라서 수신 필터링은 다양한 세분성 수준을 사용하여 여러 수준에서 수행되어야 합니다.

수신 필터링의 한 가지 목표는 공격을 추적 가능하게 만드는 것이지만 "인터넷 어딘가에 있는" 특정 공격자가 수신 필터링되고 있는지 여부를 아는 것은 불가능하다는 점을 명심해야 합니다. 따라서 소스 주소가 스푸핑되었는지 여부만 추측할 수 있습니다. 어쨌든 가능한 단서를 얻는 것\(예: 잠재적인 소스에 연락하여 공격을 관찰하고 있는지 여부를 묻는 것\)은 여전히 ​​가치가 있습니다. 수신 필터링이 점점 더 광범위하게 배포되면 더욱 그렇습니다.

결과적으로 모든 관리 도메인은 경계에서 충분한 수준의 수신 필터링을 보장하도록 노력해야 합니다.

다양한 수신 필터링 유형의 보안 속성과 적용 가능성은 많이 다릅니다.

- 수신 액세스 목록은 일반적으로 수동 유지 관리가 필요하지만 제대로 수행되면 가장 완벽하게 보호됩니다. 일반적으로 수신 액세스 목록은 엄격한 RPF가 옵션이 아닌 경우 구성이 너무 동적이지 않은 경우 에지와 ISP 사이, 사용된 접두사 수가 적은 경우 ISP 사이 또는 추가 보호 계층으로 가장 적합합니다.

- 엄격한 RPF 검사는 수신 필터링을 구현하는 매우 쉽고 확실한 방법입니다. 일반적으로 에지 네트워크와 ISP 사이에 적합합니다. 많은 경우 비대칭 트래픽 패턴의 경우 운영 절차를 통해 단순하고 엄격한 RPF를 확장하거나 다른 대체 경로를 고려하기 위한 실행 가능한 RPF 기술을 추가할 수 있습니다.

- 실행 가능한 경로 RPF 검사는 Strict RPF의 확장입니다. 엄격한 RPF가 있는 모든 시나리오에 적합하지만 특히 멀티홈 또는 비대칭 시나리오에 적합합니다. 그러나 Feasible RPF는 일관된 발생을 가정하고

- 라우팅 정보를 업무에 전파합니다. 특히 접두어 광고가 제3자를 통해 전달되는 경우 이에 대한 의미를 이해해야 합니다.

- 느슨한 RPF는 주로 화성 주소와 같은 라우팅되지 않은 접두사를 필터링합니다. 라우팅되지 않은 소스 주소를 사용하는 DoS 공격의 규모를 줄이기 위해 업스트림 인터페이스에 적용할 수 있습니다. 다운스트림 인터페이스에서는 다른 네트워크가 최소한 일부 수신 필터링을 수행했는지 계약 확인으로만 사용할 수 있습니다.

다양한 수신 필터링 메커니즘의 장단점을 평가할 때 보다 완화된 접근 방식의 보안 속성을 적용하기 전에 신중하게 고려해야 합니다. 특히 ISP가 에지 네트워크에 적용하는 경우 더 엄격한 형태의 수신 필터링이 적합하지 않은 이유는 많지 않은 것 같습니다.

---
## **6.  Conclusions and Future Work**

이 메모에서는 일반적인 수신 필터링 기술과 특히 멀티홈 네트워크에 대한 옵션을 설명합니다.

ISP가 스푸핑된 주소가 사용되는 것을 방지하기 위해 수신 필터링을 구현하는 것은 DoS 공격을 줄이고 더 추적 가능하게 하며 자체 인프라를 보호하는 데 중요합니다. 이 메모에서는 해당 효과를 달성하는 데 사용할 수 있는 메커니즘과 해당 메커니즘의 장단점을 설명합니다.

요약:

- 수신 필터링은 항상 ISP와 단일 홈 에지 네트워크 간에 수행되어야 합니다.

- Feasible RPF 또는 유사한 Strict RPF 기술을 사용한 수신 필터링은 거의 항상 ISP와 멀티 홈 에지 네트워크 간에 적용될 수 있습니다.

- ISP와 에지 네트워크 모두 네트워크 외부에서 들어오는 패킷의 소스 주소에 자신의 주소가 사용되지 않는지 확인해야 합니다.

- ISP 간에는 어떤 형태의 수신 필터링도 합리적입니다. 특히 접두사 수가 적은 경우에는 더욱 그렇습니다.

이 메모는 특히 수신 필터링을 구현하기 어렵다고 일반적으로 인식되는 비대칭/멀티홈 네트워크와 같은 시나리오에서 수신 필터링 채택에 대한 기준을 낮출 것입니다.

추가 작업이 유용한 여러 영역을 식별할 수 있습니다.

- 메커니즘을 더 자세히 지정합니다. 예를 들어 멀티캐스트 대상 주소에 대한 트래픽이 항상 엄격한 RPF 필터를 통과할지 여부와 같이 구현 간에 약간의 차이가 있습니다. 메커니즘을 공식적으로 지정함으로써 구현이 조화를 이룰 수 있습니다.

- RIB\(Routing Information Base\) 기반 RPF 메커니즘\(예: 실행 가능한 경로 RPF\)을 더 자세히 연구하고 지정합니다. 특히, 이러한 메커니즘이 의도한 대로 작동하는 가정과 그렇지 않은 경우를 고려하십시오.

- 분류와 세부 사항 또는 메커니즘\(위의 사항\)이 구체화된 후에 수신 필터링 메커니즘에 대해 이 메모보다 더 일반적인 메모를 작성합니다.

- 네트워크가 서로 다른 속성\(예: 피어 및 업스트림\)과 연결되어 있고 피어 주소로 소스된 트래픽이 업스트림에서 허용되지 않도록 하려는 보다 복잡한 경우를 고려하십시오.

---
## **7.  Acknowledgements**

Rob Austein, Barry Greene, Christoph Reichert, Daniel Senie, Pedro Roque 및 Iljitsch van Beijnum이 이 문서를 검토하고 개선하는 데 도움을 주었습니다. Thomas Narten, Ted Hardie 및 Russ Housley는 최종 단계에서 문서를 향상시키는 좋은 피드백을 제공했습니다.

---
## **8.  References**
---
### **8.1.  Normative References**

```text
   [1]  Ferguson, P. and D. Senie, "Network Ingress Filtering: Defeating
        Denial of Service Attacks which employ IP Source Address
        Spoofing", BCP 38, RFC 2827, May 2000.
```

---
### **8.2.  Informative References**

```text
   [2]  Chandrasekeran, R., Traina, P. and T. Li, "BGP Communities
        Attribute", RFC 1997, August 1996.

   [3]  IANA, "Special-Use IPv4 Addresses", RFC 3330, September 2002.

   [4]  Bates, T. and Y. Rekhter, "Scalable Support for Multi-homed
        Multi-provider Connectivity", RFC 2260, January 1998.

   [5]  Hagino, J. and H. Snyder, "IPv6 Multihoming Support at Site Exit
        Routers", RFC 3178, October 2001.
```

---
## **9.  Authors' Addresses**

```text
   Fred Baker
   Cisco Systems
   Santa Barbara, CA  93117
   US

   EMail: fred@cisco.com

   Pekka Savola
   CSC/FUNET
   Espoo
   Finland

   EMail: psavola@funet.fi
```

---
## **10.  Full Copyright Statement**

저작권\(C\)인터넷학회\(2004\). 이 문서에는 BCP 78에 포함된 권리, 라이선스 및 제한 사항이 적용되며, 여기에 명시된 경우를 제외하고 작성자는 모든 권리를 보유합니다.

이 문서와 여기에 포함된 정보는 "있는 그대로" 제공되며 기여자, 그가 대표하거나 후원하는 조직\(있는 경우\), 인터넷 사회 및 인터넷 엔지니어링 태스크 포스는 모든 명시적 또는 명시적 보증을 부인합니다. 여기에 포함된 정보의 사용이 상품성이나 특정 목적에의 적합성에 대한 묵시적인 보증이나 권리를 침해하지 않는다는 보증을 포함하되 이에 국한되지 않습니다.

---
# **Intellectual Property**

IETF는 이 문서에 설명된 기술의 구현이나 사용과 관련이 있다고 주장될 수 있는 지적 재산권 또는 기타 권리의 유효성이나 범위, 그러한 권리에 따른 라이선스가 적용되거나 적용되지 않을 수 있는 범위에 대해 어떠한 입장도 취하지 않습니다. 는 가능하다; 또한 그러한 권리를 확인하기 위해 독립적인 노력을 했다는 것을 나타내지도 않습니다. RFC 문서의 권리와 관련된 절차에 대한 정보는 BCP 78 및 BCP 79에서 확인할 수 있습니다.

IETF 사무국에 제출된 IPR 공개 사본 및 사용 가능한 라이센스에 대한 보증, 또는 이 사양의 구현자 또는 사용자가 해당 독점적 권리 사용에 대한 일반 라이센스 또는 허가를 얻으려는 시도의 결과를 얻을 수 있습니다. IETF 온라인 IPR 저장소\(http://www.ietf.org/ipr\)에서.

IETF는 이 표준을 구현하는 데 필요할 수 있는 기술에 적용될 수 있는 모든 저작권, 특허, 특허 출원 또는 기타 독점권에 관심을 갖도록 관심 있는 당사자를 초대합니다. IETF\(ietf-ipr@ietf.org\)에 해당 정보를 보내주십시오.

---
# **Acknowledgement**

RFC 편집 기능을 위한 자금은 현재 Internet Society에서 제공됩니다.
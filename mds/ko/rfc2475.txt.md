

```text
Network Working Group                                        S. Blake
Request for Comments: 2475            Torrent Networking Technologies
Category: Informational                                      D. Black
                                                      EMC Corporation
                                                           M. Carlson
                                                     Sun Microsystems
                                                            E. Davies
                                                            Nortel UK
                                                              Z. Wang
                                        Bell Labs Lucent Technologies
                                                             W. Weiss
                                                  Lucent Technologies
                                                        December 1998

              An Architecture for Differentiated Services
```

---
# **Status of this Memo**

이 메모는 인터넷 커뮤니티에 대한 정보를 제공합니다. 어떤 종류의 인터넷 표준도 지정하지 않습니다. 이 메모의 배포는 무제한입니다.

---
# **Copyright Notice**

Copyright \(C\) The Internet Society \(1998\). 판권 소유.

---
# **Abstract**

이 문서는 인터넷에서 확장 가능한 서비스 차별화를 구현하기 위한 아키텍처를 정의합니다. 이 아키텍처는 DS 필드\[DSFIELD\]를 사용하여 IP 계층 패킷 표시를 통해 전달되는 트래픽 분류 상태를 집계하여 확장성을 달성합니다. 패킷은 해당 경로를 따라 노드에서 특정 홉별 전달 동작을 수신하도록 분류되고 표시됩니다. 정교한 분류, 표시, 정책 및 형성 작업은 네트워크 경계 또는 호스트에서만 구현하면 됩니다. 네트워크 리소스는 차별화된 서비스 가능 네트워크에 진입할 때 트래픽이 표시 및 조절되는 방식과 해당 트래픽이 해당 네트워크 내에서 전달되는 방식을 제어하는 ​​서비스 프로비저닝 정책에 따라 트래픽 스트림에 할당됩니다. 이러한 빌딩 블록 위에 다양한 서비스를 구현할 수 있습니다.

---
# **Table of Contents**

```text
   1.  Introduction .................................................  2
     1.1  Overview  .................................................  2
     1.2  Terminology ...............................................  4
     1.3  Requirements ..............................................  8
     1.4  Comparisons with Other Approaches .........................  9
   2.  Differentiated Services Architectural Model .................. 12
     2.1  Differentiated Services Domain ............................ 12
       2.1.1  DS Boundary Nodes and Interior Nodes .................. 12
       2.1.2  DS Ingress Node and Egress Node ....................... 13
     2.2  Differentiated Services Region ............................ 13
     2.3  Traffic Classification and Conditioning ................... 14
       2.3.1  Classifiers ........................................... 14
       2.3.2  Traffic Profiles ...................................... 15
       2.3.3  Traffic Conditioners .................................. 15
         2.3.3.1  Meters ............................................ 16
         2.3.3.2  Markers ........................................... 16
         2.3.3.3  Shapers ........................................... 17
         2.3.3.4  Droppers .......................................... 17
       2.3.4  Location of Traffic Conditioners and MF Classifiers ... 17
         2.3.4.1  Within the Source Domain .......................... 17
         2.3.4.2  At the Boundary of a DS Domain .................... 18
         2.3.4.3  In non-DS-Capable Domains ......................... 18
         2.3.4.4  In Interior DS Nodes .............................. 19
     2.4  Per-Hop Behaviors ......................................... 19
     2.5  Network Resource Allocation ............................... 20
   3.  Per-Hop Behavior Specification Guidelines .................... 21
   4.  Interoperability with Non-Differentiated Services-Compliant
       Nodes ........................................................ 25
   5.  Multicast Considerations ..................................... 26
   6.  Security and Tunneling Considerations ........................ 27
     6.1  Theft and Denial of Service ............................... 28
     6.2  IPsec and Tunneling Interactions .......................... 30
     6.3  Auditing .................................................. 32
   7.  Acknowledgements ............................................. 32
   8.  References ................................................... 33
   Authors' Addresses ............................................... 34
   Full Copyright Statement ......................................... 36
```

---
## **1.  Introduction**
---
## **1.1  Overview**

이 문서는 인터넷에서 확장 가능한 서비스 차별화를 구현하기 위한 아키텍처를 정의합니다. "서비스"는 네트워크 내의 하나 이상의 경로 집합을 통해 한 방향으로 패킷 전송의 몇 가지 중요한 특성을 정의합니다. 이것들

특성은 처리량, 지연, 지터 및/또는 손실의 정량적 또는 통계적 측면에서 지정될 수도 있고, 네트워크 리소스에 대한 액세스의 상대적 우선순위 측면에서 지정될 수도 있습니다. 이기종 애플리케이션 요구 사항과 사용자 기대를 수용하고 인터넷 서비스 가격의 차별화를 허용하려면 서비스 차별화가 필요합니다.

이 아키텍처는 소수의 홉별 전달 동작 세트, 패킷 분류 기능, 측정, 표시, 형성 및 정책을 포함한 트래픽 조절 기능을 포함하여 네트워크 노드에 구현되는 여러 기능 요소로 구성됩니다. 이 아키텍처는 네트워크 경계 노드에서만 복잡한 분류 및 조절 기능을 구현하고 IPv4 또는 IPv6 헤더\[DSFIELD\]의 DS 필드를 사용하여 적절하게 표시된 트래픽 집합에 홉별 동작을 적용함으로써 확장성을 달성합니다. 홉별 동작은 경쟁하는 트래픽 스트림 사이의 각 노드에서 버퍼 및 대역폭 리소스를 할당하는 합리적으로 세분화된 수단을 허용하도록 정의됩니다. 애플리케이션별 흐름 또는 고객별 전달 상태는 네트워크 핵심 내에서 유지될 필요가 없습니다. 다음 사이에는 구별이 유지됩니다.

o 트래픽 집계에 제공되는 서비스,

o 서비스를 실현하는 데 사용되는 조절 기능 및 홉별 동작,

o 홉별 동작을 선택하기 위해 패킷을 표시하는 데 사용되는 DS 필드 값\(DS 코드 포인트\), 그리고

o 홉별 동작을 실현하는 특정 노드 구현 메커니즘.

서비스 프로비저닝 및 트래픽 조절 정책은 네트워크 내부 내의 전달 동작과 충분히 분리되어 향후 확장을 위한 여지와 함께 다양한 서비스 동작을 구현할 수 있습니다.

이 아키텍처는 트래픽 흐름의 한 방향에서만 서비스 차별화를 제공하므로 비대칭입니다. 보완적인 대칭 아키텍처의 개발은 현재 연구 주제이지만 이 문서의 범위를 벗어납니다. 예를 들어 \[명시적\]을 참조하세요.

분파. 1.2는 이 문서에 사용된 용어집입니다. 비서. 1.3에는 이 아키텍처에서 다루는 요구 사항이 나열되어 있으며 Sec. 1.4에서는 서비스 차별화를 위한 다른 접근 방식과 간략한 비교를 제공합니다. 비서. 2에서는 아키텍처의 구성 요소에 대해 설명합니다.

상세히. 비서. 3은 홉별 동작 사양에 대한 지침을 제안합니다. 비서. 4는 이 문서와 \[DSFIELD\]에 정의된 차별화된 서비스를 구현하지 않는 노드 및 네트워크와의 상호 운용성 문제를 논의합니다. 비서. 5에서는 멀티캐스트 서비스 전달과 관련된 문제를 논의합니다. 비서. 6에서는 보안 및 터널 고려 사항을 다룹니다.

---
## **1.2  Terminology**

이 섹션에서는 이 문서에 사용된 용어에 대한 일반적인 개념 개요를 제공합니다. 이러한 용어 중 일부는 이 문서의 후반부 섹션에서 더 정확하게 정의됩니다.

행동 집계\(BA\)는 DS 행동 집계입니다.

BA 분류자 DS 필드의 내용만을 기준으로 패킷을 선택하는 분류자입니다.

경계 링크는 두 도메인의 가장자리 노드를 연결하는 링크입니다.

분류자 정의된 규칙에 따라 패킷 헤더의 내용을 기반으로 패킷을 선택하는 엔터티입니다.

DS 동작은 특정 방향으로 링크를 통과하는 동일한 DS 코드 포인트를 가진 패킷 모음을 집계합니다.

DS 경계 노드 하나의 DS 도메인을 다른 DS 도메인 또는 DS를 지원하지 않는 도메인의 노드에 연결하는 DS 노드입니다.

이 아키텍처에 설명된 대로 차별화된 서비스를 구현할 수 있는 DS 가능 일반적으로 DS 호환 노드로 구성된 도메인을 참조하는 데 사용됩니다.

DS 코드포인트는 PHB를 선택하는 데 사용되는 DS 필드의 DSCP 부분의 특정 값입니다.

\[DSFIELD\], 이 문서 및 기타 차별화된 서비스 문서에 정의된 대로 차별화된 서비스 기능 및 동작을 지원하기 위해 DS 호환이 활성화되었습니다. 일반적으로 노드나 장치를 참조할 때 사용됩니다.

DS 도메인 DS 가능 도메인. 공통 서비스 프로비저닝 정책 및 PHB 정의 세트로 작동하는 연속 노드 세트입니다.

DS 송신 노드 DS 도메인을 떠날 때 트래픽을 처리하는 역할을 하는 DS 경계 노드입니다.

DS 수신 노드 DS 도메인에 들어갈 때 트래픽을 처리하는 역할을 하는 DS 경계 노드입니다.

DS 내부 노드 DS 경계 노드가 아닌 DS 노드.

DS 필드는 \[DSFIELD\]에 주어진 정의에 따라 해석될 때 IPv4 헤더 TOS 옥텟 또는 IPv6 트래픽 클래스 옥텟입니다. DSCP 필드의 비트는 DS 코드포인트를 인코딩하고 나머지 비트는 현재 사용되지 않습니다.

DS 노드 DS 호환 노드입니다.

DS 영역 DS 도메인 전체의 경로를 통해 차별화된 서비스를 제공할 수 있는 연속 DS 도메인 집합입니다.

다운스트림 DS 도메인 경계 링크의 트래픽 흐름 다운스트림인 DS 도메인입니다.

Dropper는 Drop을 수행하는 장치입니다.

지정된 규칙에 따라 패킷을 폐기하는 프로세스를 삭제합니다. 치안.

레거시 노드는 \[RFC791,RFC1812\]에 정의된 대로 IPv4 우선 순위를 구현하지만 DS와 호환되지 않는 노드입니다.

Marker는 마킹을 수행하는 장치입니다.

정의된 규칙에 따라 패킷에 DS 코드포인트를 설정하는 과정을 표시하는 단계; 사전 마킹, 재마킹.

하나 이상의 홉별 동작 집합을 실현하기 위해 노드에 구현되는 특정 알고리즘 또는 작업\(예: 큐잉 규칙\) 메커니즘입니다.

측정을 수행하는 장치를 측정합니다.

분류자가 선택한 트래픽 스트림의 시간적 속성\(예: 속도\)을 측정하는 프로세스를 측정합니다. 이 프로세스의 순간 상태는 마커, 셰이퍼 또는 드로퍼의 작동에 영향을 미치거나 회계 및 측정 목적으로 사용될 수 있습니다.

마이크로플로우는 소스 주소, 소스 포트, 대상 주소, 대상 포트 및 프로토콜 ID로 식별되는 애플리케이션 간 패킷 흐름의 단일 인스턴스입니다.

MF Classifier\(MF 분류자\)는 임의 개수의 헤더 필드 내용을 기반으로 패킷을 선택하는 다중 필드\(MF\) 분류자입니다. 일반적으로 소스 주소, 대상 주소, DS 필드, 프로토콜 ID, 소스 포트 및 대상 포트의 조합입니다.

PHB\(Per-Hop-Behavior\)는 DS 호환 노드에서 DS 동작 집계에 적용되는 외부에서 관찰 가능한 전달 동작입니다.

PHB 그룹은 대기열 서비스 또는 대기열 관리 정책과 같이 집합의 모든 PHB에 적용되는 공통 제약 조건으로 인해 의미 있게 지정되고 동시에 구현될 수 있는 하나 이상의 PHB 집합입니다. PHB 그룹은 관련된 전달 동작 세트를 함께 지정할 수 있는 서비스 빌딩 블록을 제공합니다\(예: 4개의 삭제 우선순위\). 단일 PHB는 PHB 그룹의 특별한 경우입니다.

트래픽 프로필을 적용하는 해당 미터의 상태에 따라 트래픽 스트림 내에서 패킷을 삭제하는 프로세스를 정책화합니다\(드롭퍼 사용\).

다운스트림 DS 도메인에 진입하기 전에 패킷의 DS 코드 포인트를 설정하기 위한 사전 표시입니다.

공급자 DS 도메인 소스 도메인에 대한 DS 가능 서비스 공급자입니다.

패킷의 DS 코드포인트를 변경하려면 일반적으로 TCA에 따른 마커에 의해 수행되는 재마킹을 수행합니다.

DS 도메인 내에서 또는 종단 간 고객 트래픽의 정의된 하위 집합에 대한 전반적인 처리를 서비스합니다.

서비스 수준 계약 고객이 받아야 하는 전달 서비스를 지정하는 고객과 \(SLA\) 서비스 제공자 간의 서비스 계약입니다. 고객은 사용자 조직\(소스 도메인\)일 수도 있고 다른 DS 도메인\(업스트림 도메인\)일 수도 있습니다. SLA에는 전체 또는 부분적으로 TCA를 구성하는 트래픽 조절 규칙이 포함될 수 있습니다.

서비스 프로비저닝 DS 경계 노드에서 트래픽 정책 조절기가 구성되는 방식과 트래픽 스트림이 DS 동작 집계에 매핑되는 방식을 정의하여 다양한 서비스를 달성하는 정책입니다.

Shaper는 쉐이핑을 수행하는 장치입니다.

정의된 트래픽 프로필을 따르도록 트래픽 스트림 내에서 패킷을 지연시키는 프로세스를 형성합니다.

소스 도메인 특정 서비스를 수신하는 트래픽을 발생시키는 노드를 포함하는 도메인입니다.

트래픽 조정자\(Traffic Conditioner\)는 트래픽을 수행하는 엔터티입니다.

- 컨디셔닝 기능에는 미터, 마커, 드로퍼 및 셰이퍼가 포함될 수 있습니다. 트래픽 조절기는 일반적으로 DS 경계 노드에만 배포됩니다. 트래픽 조절기는 트래픽 스트림을 다시 표시하거나 패킷을 폐기하거나 형성하여 스트림의 시간적 특성을 변경하고 트래픽 프로필을 준수하도록 할 수 있습니다.

측정, 표시, 형성 및 정책을 포함하여 TCA에 지정된 규칙을 시행하기 위해 수행되는 트래픽 조절 제어 기능입니다.

트래픽 조절 TCA\(분류자 규칙 계약\) 및 해당 트래픽 프로필과 분류자가 선택한 트래픽 스트림에 적용할 측정, 표시, 폐기 및/또는 형성 규칙을 지정하는 계약입니다. TCA는 관련 서비스 요구 사항 및/또는 DS 도메인의 서비스 프로비저닝 정책에서 암시적인 모든 규칙과 함께 SLA 내에 명시적으로 지정된 모든 트래픽 조절 규칙을 포함합니다.

트래픽 프로파일은 속도, 버스트 크기 등 트래픽 스트림의 일시적인 속성에 대한 설명입니다.

트래픽 스트림은 경로 세그먼트를 통과하는 관리상 중요한 하나 이상의 마이크로플로우 세트입니다. 트래픽 스트림은 특정 분류자에 의해 선택된 활성 마이크로플로우 세트로 구성될 수 있습니다.

업스트림 DS 도메인\(Upstream DS domain\) 경계 링크에서 트래픽 흐름의 업스트림인 DS 도메인입니다.

---
## **1.3  Requirements**

인터넷의 역사는 호스트 수, 애플리케이션 수와 다양성, 네트워크 인프라 용량이 지속적으로 성장해 왔으며 이러한 성장은 가까운 미래에도 계속될 것으로 예상됩니다. 서비스 차별화를 위한 확장 가능한 아키텍처는 이러한 지속적인 성장을 수용할 수 있어야 합니다.

이 아키텍처에서는 다음 요구 사항이 식별되어 해결되었습니다.

```text
   o  should accommodate a wide variety of services and provisioning
      policies, extending end-to-end or within a particular (set of)
      network(s),
```

o 사용 중인 특정 애플리케이션에서 서비스를 분리할 수 있어야 합니다.

```text
   o  should work with existing applications without the need for
      application programming interface changes or host software
      modifications (assuming suitable deployment of classifiers,
      markers, and other traffic conditioning functions),
```

o 핵심 네트워크 노드 내에 구현된 전달 동작에서 트래픽 조절 및 서비스 제공 기능을 분리해야 합니다.

o hop-by-hop 애플리케이션 시그널링에 의존해서는 안 됩니다.

o 구현 복잡성이 네트워크 장치 비용을 지배하지 않고 향후 고속 시스템 구현에 병목 현상을 일으키지 않는 작은 전달 동작 세트만 필요해야 합니다.

o 핵심 네트워크 노드 내에서 마이크로플로우별 또는 고객별 상태를 피해야 합니다.

o 네트워크 코어 내에서 집계된 분류 상태만 활용해야 합니다.

```text
   o  should permit simple packet classification implementations in core
      network nodes (BA classifier),
```

o DS를 준수하지 않는 네트워크 노드와의 합리적인 상호 운용성을 허용해야 합니다.

```text
   o  should accommodate incremental deployment.
```

---
## **1.4  Comparisons with Other Approaches**

이 문서에 명시된 차별화된 서비스 아키텍처는 기존의 다른 서비스 차별화 모델과 대조될 수 있습니다. 우리는 이러한 대체 모델을 상대적 우선 순위 표시, 서비스 표시, 레이블 전환, 통합 서비스/RSVP 및 정적 홉별 분류 등의 범주로 분류합니다.

상대적 우선순위 표시 모델의 예로는 \[RFC791\]에 정의된 IPv4 우선순위 표시, 802.5 토큰링 우선순위\[TR\] 및 802.1p 트래픽 클래스의 기본 해석\[802.1p\]이 있습니다. 이 모델에서 애플리케이션, 호스트 또는 프록시 노드는 패킷에 대한 상대적 우선순위 또는 "우선순위"\(예: 지연 또는 폐기 우선순위\)를 선택하고 전송 경로를 따라 있는 네트워크 노드는 우선순위 값에 해당하는 적절한 우선순위 전달 동작을 적용합니다. 패킷 헤더 내. 우리의 아키텍처는 이 모델을 개선한 것으로 간주될 수 있습니다.

경계 노드와 트래픽 조절기의 역할과 중요성을 지정하고, 홉별 동작 모델이 상대적 지연이나 폐기 우선순위보다 더 일반적인 전달 동작을 허용하기 때문입니다.

서비스 표시 모델의 예는 \[RFC1349\]에 정의된 IPv4 TOS입니다. 이 예에서 각 패킷에는 "지연 최소화", "처리량 최대화", "신뢰도 최대화" 또는 "비용 최소화"를 포함할 수 있는 "서비스 유형"에 대한 요청이 표시됩니다. 네트워크 노드는 서비스 요청을 만족시키기 위해 적절하게 설계된 라우팅 경로나 전달 동작을 선택할 수 있습니다. 이 모델은 우리의 아키텍처와 미묘하게 다릅니다. DS 필드를 경로 선택에 대한 입력으로 사용하는 방법은 설명하지 않습니다. \[RFC1349\]에 정의된 TOS 표시는 매우 일반적이며 가능한 서비스 의미 체계의 범위를 포괄하지 않습니다. 또한 서비스 요청은 각 개별 패킷과 연관되어 있는 반면, 일부 서비스 의미는 일련의 패킷의 총 전달 동작에 따라 달라질 수 있습니다. 서비스 마킹 모델은 \(코드 포인트 공간이 작기 때문에\) 미래 서비스의 수와 범위의 증가를 쉽게 수용하지 못하고 각 핵심 네트워크 노드에서 "TOS-\>전달 동작" 연관 구성을 포함합니다. 서비스 표시 표준화는 IETF 범위를 벗어나는 서비스 제공 표준화를 의미합니다. 서비스 표시 의미론\[DSFIELD\]을 지원하기 위해 제공자가 사용할 수 있는 로컬로 중요한 코드 포인트를 허용하기 위해 DS 코드 포인트 공간 할당 시 조항이 작성된다는 점에 유의하십시오.

라벨 스위칭\(또는 가상 회선\) 모델의 예로는 Frame Relay, ATM, MPLS\[FRELAY, ATM\] 등이 있습니다. 이 모델에서는 경로 전달 상태와 트래픽 관리 또는 QoS 상태가 네트워크 경로를 따라 각 홉의 트래픽 스트림에 대해 설정됩니다. 다양한 세분성의 트래픽 집계는 수신 노드의 레이블 전환 경로와 연결되고, 각 레이블 전환 경로 내의 패킷/셀은 다음 홉 노드, 홉별 전달 동작을 조회하는 데 사용되는 전달 레이블로 표시됩니다. 그리고 각 홉의 교체 라벨. 이 모델은 트래픽 스트림에 대한 보다 세밀한 리소스 할당을 허용합니다. 레이블 값은 전체적으로 중요하지 않고 단일 링크에서만 중요하기 때문입니다. 따라서 리소스는 특정 레이블이 있는 링크에서 수신된 패킷/셀 집합을 위해 예약될 수 있으며 레이블 전환 의미론은 다음 홉 선택을 제어하여 트래픽 스트림이 네트워크를 통해 특별히 설계된 경로를 따를 수 있도록 합니다. 이러한 향상된 세분성에는 레이블 전환 경로를 설정하고 유지하기 위한 추가 관리 및 구성 요구 사항이 필요합니다. 또한 각 노드에서 유지되는 전달 상태의 양은 최상의 경우 네트워크의 에지 노드 수에 비례하여 확장됩니다\(다중 지점 간 가정\).

레이블 전환 경로\), 프로비저닝된 리소스가 있는 에지-에지 레이블 전환 경로가 사용되는 경우 최악의 경우 에지 노드 수의 제곱에 비례하여 확장됩니다.

통합 서비스/RSVP 모델은 기본 경우 전통적인 데이터그램 전달에 의존하지만 소스와 수신자가 그들 사이의 경로를 따라 각 노드에서 추가 패킷 분류 및 전달 상태를 설정하는 신호 메시지를 교환할 수 있도록 허용합니다\[RFC1633, RSVP\]. 상태 집계가 없으면 각 노드의 상태 양은 동시 예약 수에 비례하여 확장되며 이는 고속 링크에서 잠재적으로 커질 수 있습니다. 이 모델에는 RSVP 신호 프로토콜에 대한 애플리케이션 지원도 필요합니다. 차별화된 서비스 메커니즘을 활용하여 네트워크 \[Bernet\]의 핵심에서 통합 서비스/RSVP 상태를 집계할 수 있습니다.

통합 서비스/RSVP 모델의 변형은 네트워크 경로를 따라 각 노드에 구현되는 "정적" 분류 및 전달 정책만 활용하여 홉별 신호 전달에 대한 요구 사항을 제거합니다. 이러한 정책은 관리 기간에 따라 업데이트되며 네트워크에서 활성화된 마이크로플로우의 즉각적인 혼합에 대한 응답이 아닙니다. 이 변형에 대한 상태 요구 사항은 RSVP를 사용할 때 발생하는 요구 사항보다 잠재적으로 더 나쁩니다. 특히 백본 노드에서는 시간이 지남에 따라 노드에 적용할 수 있는 정적 정책의 수가 해당 노드에서 적용할 수 있는 활성 송신-수신자 세션의 수보다 클 수 있기 때문입니다. 노드에 예약 상태를 설치했을 수 있습니다. 많은 수의 분류자 규칙 및 전달 정책 지원이 계산적으로 가능할 수 있지만 트래픽 스트림이 통과할 수 있는 백본 네트워크 내의 각 노드에 이러한 규칙을 설치하고 유지하는 것과 관련된 관리 부담은 상당합니다.

우리의 아키텍처를 이러한 대안적인 서비스 차별화 모델과 대조하지만, 이러한 기술을 사용하는 링크와 노드는 레이어 2 스위치 인프라\(예: 802.1p LAN, 프레임 릴레이\) 전반에 걸쳐 차별화된 서비스 동작과 의미를 확장하는 데 활용될 수 있다는 점에 유의해야 합니다. /ATM 백본\) DS 노드를 상호 연결하며, MPLS의 경우 대체 도메인 내 구현 기술로 사용될 수 있습니다. DS 도메인의 특정 영역\(또는 DS 도메인에 대한 액세스를 제공하는 네트워크\)에서 특정 링크 계층 기술을 사용함으로써 부과되는 제약은 더 거친 입자 기반의 트래픽 차별화를 의미할 수 있습니다. 다양한 링크 계층 서비스에 대한 PHB의 매핑과 제한된 우선 순위 클래스 집합\(또는 다른 카테고리 및 용량의 가상 회선\)을 통해 패킷이 예약되는 방식에 따라 사용 중인 PHB 전체 또는 하위 집합이 지원될 수 있습니다. \(또는 구별이 불가능할 수도 있습니다\).

---
## **2.  Differentiated Services Architectural Model**

차별화된 서비스 아키텍처는 네트워크로 들어오는 트래픽이 분류되고 네트워크 경계에서 조정될 수 있으며 다양한 동작 집합에 할당되는 간단한 모델을 기반으로 합니다. 각 행동 집계는 단일 DS 코드 포인트로 식별됩니다. 네트워크 코어 내에서 패킷은 DS 코드포인트와 관련된 홉별 동작에 따라 전달됩니다. 이 섹션에서는 차별화된 서비스 지역 내의 주요 구성 요소, 트래픽 분류 및 조절 기능, 그리고 트래픽 조절과 PHB 기반 전달의 결합을 통해 차별화된 서비스를 달성하는 방법에 대해 설명합니다.

---
## **2.1  Differentiated Services Domain**

DS 도메인은 공통 서비스 프로비저닝 정책과 각 노드에 구현된 PHB 그룹 세트로 작동하는 연속적인 DS 노드 세트입니다. DS 도메인에는 도메인을 통과하는 패킷이 도메인 내에서 지원되는 PHB 그룹 중 하나에서 PHB를 선택하도록 적절하게 표시되도록 수신 트래픽을 분류하고 조절하는 DS 경계 노드로 구성된 잘 정의된 경계가 있습니다. DS 도메인 내의 노드는 DS 코드 포인트를 기반으로 패킷의 전달 동작을 선택하고 권장 코드 포인트-\>PHB 매핑 또는 로컬로 사용자 정의된 매핑\[DSFIELD\]을 사용하여 해당 값을 지원되는 PHB 중 하나에 매핑합니다. DS 도메인 내에 DS 규격이 아닌 노드를 포함하면 예측할 수 없는 성능이 발생할 수 있으며 서비스 수준 계약\(SLA\)을 충족하는 능력이 저하될 수 있습니다.

DS 도메인은 일반적으로 동일한 관리 하에 있는 하나 이상의 네트워크로 구성됩니다. 예를 들어 조직의 인트라넷이나 ISP입니다. 도메인 관리는 도메인에서 제공하는 SLA를 지원하기 위해 적절한 리소스를 프로비저닝 및/또는 예약하는 일을 담당합니다.

---
### **2.1.1  DS Boundary Nodes and Interior Nodes**

DS 도메인은 DS 경계 노드와 DS 내부 노드로 구성됩니다. DS 경계 노드는 DS 도메인을 다른 DS 또는 DS 비지원 도메인과 상호 연결하는 반면, DS 내부 노드는 동일한 DS 도메인 내의 다른 DS 내부 또는 경계 노드에만 연결됩니다.

DS 경계 노드와 내부 노드 모두 DS 코드포인트를 기반으로 패킷에 적절한 PHB를 적용할 수 있어야 합니다. 그렇지 않으면 예측할 수 없는 동작이 발생할 수 있습니다. 또한 DS 경계 노드는 DS 도메인과 DS 도메인 간의 TCA\(트래픽 조절 계약\)에 정의된 대로 트래픽 조절 기능을 수행해야 할 수도 있습니다.

연결하는 피어링 도메인\(섹션 2.3.3 참조\)

내부 노드는 DS 코드포인트 재마킹과 같은 제한된 트래픽 조절 기능을 수행할 수 있습니다. 보다 복잡한 분류 및 교통 조절 기능을 구현하는 내부 노드는 DS 경계 노드와 유사합니다\(섹션 2.3.4.4 참조\).

DS 도메인을 포함하는 네트워크의 호스트는 해당 호스트에서 실행되는 응용 프로그램의 트래픽에 대한 DS 경계 노드 역할을 할 수 있습니다. 따라서 호스트가 DS 도메인 내에 있다고 말합니다. 호스트가 경계 노드 역할을 하지 않는 경우 해당 호스트에 토폴로지상 가장 가까운 DS 노드가 해당 호스트 트래픽에 대한 DS 경계 노드 역할을 합니다.

---
### **2.1.2  DS Ingress Node and Egress Node**

DS 경계 노드는 다양한 트래픽 방향에 대해 DS 수신 노드 및 DS 송신 노드 역할을 모두 수행합니다. 트래픽은 DS 수신 노드에서 DS 도메인으로 들어가고 DS 송신 노드에서 DS 도메인을 떠납니다. DS 수신 노드는 DS 도메인으로 들어가는 트래픽이 해당 노드와 수신 노드가 연결된 다른 도메인 사이의 TCA를 준수하는지 확인하는 역할을 합니다. DS 출구 노드는 두 도메인 간의 TCA 세부 사항에 따라 직접 연결된 피어링 도메인으로 전달되는 트래픽에 대해 트래픽 조절 기능을 수행할 수 있습니다. DS 경계 노드는 일부 인터페이스 세트에 대해 DS 내부 노드 역할을 할 수 있습니다.

---
## **2.2  Differentiated Services Region**

차별화된 서비스 지역\(DS 지역\)은 하나 이상의 연속 DS 도메인 집합입니다. DS 지역은 지역 내의 도메인에 걸쳐 있는 경로를 따라 차별화된 서비스를 지원할 수 있습니다.

DS 영역의 DS 도메인은 내부적으로 서로 다른 PHB 그룹을 지원할 수 있으며, 서로 다른 코드포인트-\>PHB 매핑을 지원할 수 있습니다. 그러나 여러 도메인에 걸쳐 있는 서비스를 허용하려면 피어링 DS 도메인은 각각 하나의 DS 도메인에서 다른 DS 도메인으로의 전송 트래픽이 둘 사이의 경계에서 어떻게 조절되는지 지정하는 TCA를 정의하는 피어링 SLA를 설정해야 합니다. DS 도메인.

DS 영역 내의 여러 DS 도메인이 공통 서비스 제공 정책을 채택하고 공통 PHB 그룹 세트 및 코드 포인트 매핑을 지원할 수 있으므로 해당 DS 도메인 간의 트래픽 조절이 필요하지 않을 수 있습니다.

---
## **2.3  Traffic Classification and Conditioning**

업스트림 네트워크와 다운스트림 DS 도메인 간에 SLA를 설정하여 차별화된 서비스가 DS 도메인 경계를 넘어 확장됩니다. SLA는 패킷 분류 및 재표시 규칙을 지정할 수 있으며 프로필 내부 또는 외부에 있는 트래픽 스트림에 대한 트래픽 프로필 및 작업을 지정할 수도 있습니다\(섹션 2.3.2 참조\). 도메인 간의 TCA는 이 SLA에서 파생됩니다\(명시적으로 또는 암시적으로\).

패킷 분류 정책은 DS 도메인 내에서 \(DS 코드 포인트 재마킹을 통해\) 하나 이상의 행동 집합으로 조정 및/또는 매핑함으로써 차별화된 서비스를 받을 수 있는 트래픽의 하위 집합을 식별합니다.

트래픽 조절은 도메인의 서비스 프로비저닝 정책에 따라 DS 도메인으로 들어오는 트래픽이 TCA에 지정된 규칙을 준수하는지 확인하기 위해 측정, 형성, 정책 적용 및/또는 재표시를 수행합니다. 필요한 트래픽 조절 범위는 제공되는 서비스의 세부 사항에 따라 달라지며 간단한 코드 포인트 재표시부터 복잡한 정책 및 형성 작업까지 다양할 수 있습니다. 네트워크 간에 협상되는 트래픽 조절 정책의 세부 사항은 이 문서의 범위를 벗어납니다.

---
### **2.3.1  Classifiers**

패킷 분류자는 패킷 헤더의 일부 내용을 기반으로 트래픽 스트림에서 패킷을 선택합니다. 우리는 두 가지 유형의 분류자를 정의합니다. BA\(Behavior Aggregate\) 분류자는 DS 코드 포인트만을 기준으로 패킷을 분류합니다. MF\(Multi-Field\) 분류기는 소스 주소, 대상 주소, DS 필드, 프로토콜 ID, 소스 포트 및 대상 포트 번호와 같은 하나 이상의 헤더 필드의 조합 값과 다음과 같은 기타 정보를 기반으로 패킷을 선택합니다. 들어오는 인터페이스.

분류자는 추가 처리를 위해 특정 규칙과 일치하는 패킷을 트래픽 조절기 요소로 "조정"하는 데 사용됩니다. 분류자는 적절한 TCA에 따라 일부 관리 절차에 따라 구성되어야 합니다.

분류자는 패킷을 분류하는 데 사용하는 정보를 인증해야 합니다\(섹션 6 참조\).

업스트림 패킷 조각화가 발생하는 경우 전송 계층 헤더 필드의 내용을 검사하는 MF 분류자는 첫 번째 패킷 조각 이후의 패킷 조각을 잘못 분류할 수 있습니다. 이 문제에 대한 가능한 해결책은 다음을 유지하는 것입니다.

단편화 상태; 그러나 이는 업스트림 조각 재정렬 또는 다양한 라우팅 경로의 가능성으로 인해 일반적인 솔루션이 아닙니다. 패킷 조각에 적용되는 정책은 이 문서의 범위를 벗어납니다.

---
### **2.3.2  Traffic Profiles**

트래픽 프로필은 분류자가 선택한 트래픽 스트림의 시간적 속성을 지정합니다. 이는 특정 패킷이 프로필 내부에 있는지 또는 프로필 외부에 있는지를 결정하는 규칙을 제공합니다. 예를 들어 토큰 버킷을 기반으로 하는 프로필은 다음과 같습니다.

```text
     codepoint=X, use token-bucket r, b
```

위 프로필은 DS 코드 포인트 X로 표시된 모든 패킷이 속도 r 및 버스트 크기 b의 토큰 버킷 미터에 대해 측정되어야 함을 나타냅니다. 이 예에서 프로필 외부 패킷은 버킷에 사용할 수 있는 토큰이 부족할 때 도착하는 트래픽 스트림의 패킷입니다. 프로필 내부 및 외부의 개념은 두 가지 수준 이상으로 확장될 수 있습니다. 예를 들어 프로필에 대한 여러 수준의 적합성이 정의되고 시행될 수 있습니다.

프로파일 내 패킷과 프로파일 외부 패킷에 서로 다른 조절 작업이 적용될 수 있거나 서로 다른 계정 작업이 트리거될 수 있습니다. 프로필 내 패킷은 추가 조건 없이 DS 도메인에 들어가는 것이 허용될 수 있습니다. 또는 DS 코드포인트가 변경될 수도 있습니다. 후자는 DS 코드 포인트가 처음으로 기본값이 아닌 값으로 설정되거나\[DSFIELD\] 패킷이 이 트래픽 스트림에 대해 다른 PHB 그룹 또는 코드 포인트-\>PHB 매핑 정책을 사용하는 DS 도메인에 들어갈 때 발생합니다. 프로필 외부 패킷은 프로필 내부\(형성\), 폐기\(정책 관리\), 새 코드 포인트로 표시\(재표시\) 또는 일부 계정 절차를 트리거하는 동안 변경되지 않은 상태로 전달될 때까지 대기열에 있을 수 있습니다. 프로파일 외부 패킷은 프로파일 내부 패킷이 매핑되는 BA에 대한 전달 성능의 일부 차원에서 "열등한" 하나 이상의 행동 집합에 매핑될 수 있습니다.

트래픽 프로필은 TCA의 선택적 구성 요소이며 그 사용은 서비스 제공의 세부 사항과 도메인의 서비스 프로비저닝 정책에 따라 달라집니다.

---
### **2.3.3  Traffic Conditioners**

교통 상황 조절기에는 미터, 마커, 쉐이퍼, 드로퍼 등의 요소가 포함될 수 있습니다. 트래픽 스트림은 패킷을 트래픽 조절기의 논리적 인스턴스로 조정하는 분류자에 의해 선택됩니다. 미터는 \(적절한 경우\) 트래픽 프로필에 대한 트래픽 스트림을 측정하는 데 사용됩니다. 미터의 상태

특정 패킷과 관련된 정보\(예: 프로필 내부인지 외부인지 여부\)는 표시, 삭제 또는 형성 작업에 영향을 주기 위해 사용될 수 있습니다.

패킷이 DS 경계 노드의 트래픽 조절기에서 나갈 때 각 패킷의 DS 코드 포인트는 적절한 값으로 설정되어야 합니다.

그림 1은 분류기와 트래픽 조절기의 블록 다이어그램을 보여줍니다. 트래픽 조절 장치에는 반드시 네 가지 요소가 모두 포함될 필요는 없습니다. 예를 들어 트래픽 프로필이 적용되지 않는 경우 패킷은 분류자와 마커만 통과할 수 있습니다.

```text
                               +-------+
                               |       |-------------------+
                        +----->| Meter |                   |
                        |      |       |--+                |
                        |      +-------+  |                |
                        |                 V                V
                  +------------+      +--------+      +---------+
                  |            |      |        |      | Shaper/ |
    packets =====>| Classifier |=====>| Marker |=====>| Dropper |=====>
                  |            |      |        |      |         |
                  +------------+      +--------+      +---------+
```

그림 1: 패킷 분류기와 트래픽 조절기의 논리적 보기

---
#### **2.3.3.1  Meters**

트래픽 측정기는 TCA에 지정된 트래픽 프로필에 대해 분류자가 선택한 패킷 스트림의 시간적 속성을 측정합니다. 미터는 프로필 내부 또는 프로필 외부\(어느 정도\)에 있는 각 패킷에 대해 특정 작업을 트리거하기 위해 상태 정보를 다른 조절 기능에 전달합니다.

---
#### **2.3.3.2  Markers**

패킷 마커는 패킷의 DS 필드를 특정 코드 포인트로 설정하여 표시된 패킷을 특정 DS 동작 집합에 추가합니다. 마커는 자신에게 조정된 모든 패킷을 단일 코드 포인트로 표시하도록 구성되거나, PHB 그룹의 상태에 따라 PHB 그룹에서 PHB를 선택하는 데 사용되는 코드 포인트 세트 중 하나에 패킷을 표시하도록 구성될 수 있습니다. 미터. 마커가 패킷의 코드 포인트를 변경하면 패킷에 "다시 표시"되었다고 합니다.

---
#### **2.3.3.3  Shapers**

셰이퍼는 스트림이 트래픽 프로필을 준수하도록 하기 위해 트래픽 스트림의 패킷 중 일부 또는 전체를 지연시킵니다. 셰이퍼에는 일반적으로 유한 크기의 버퍼가 있으며, 지연된 패킷을 보관할 버퍼 공간이 충분하지 않으면 패킷이 삭제될 수 있습니다.

---
#### **2.3.3.4  Droppers**

드롭퍼는 스트림이 트래픽 프로필을 준수하도록 하기 위해 트래픽 스트림의 패킷 중 일부 또는 전부를 삭제합니다. 이 프로세스를 스트림 "정책"이라고 합니다. 셰이퍼 버퍼 크기를 0\(또는 몇 개의\) 패킷으로 설정하여 셰이퍼의 특별한 경우로 드롭퍼를 구현할 수 있습니다.

---
### **2.3.4  Location of Traffic Conditioners and MF Classifiers**

트래픽 조절기는 일반적으로 DS 수신 및 송신 경계 노드 내에 위치하지만 DS 도메인 내부 노드 또는 DS 가능하지 않은 도메인 내의 노드에도 위치할 수 있습니다.

---
#### **2.3.4.1  Within the Source Domain**

우리는 소스 도메인을 특정 서비스를 수신하는 트래픽을 발생시키는 노드를 포함하는 도메인으로 정의합니다. 소스 도메인 내의 트래픽 소스와 중간 노드는 트래픽 분류 및 조정 기능을 수행할 수 있습니다. 경계를 넘어 소스 도메인에서 발생하는 트래픽은 트래픽 소스에 의해 직접 표시되거나 소스 도메인을 떠나기 전에 중간 노드에 의해 표시될 수 있습니다. 이를 초기 마킹 또는 "사전 마킹"이라고 합니다.

CEO의 패킷이 더 높은 우선순위를 가져야 한다는 정책을 갖고 있는 회사의 예를 생각해 보십시오. CEO의 호스트는 "더 높은 우선순위"를 나타내는 DS 코드 포인트를 사용하여 모든 나가는 패킷의 DS 필드를 표시할 수 있습니다. 또는 CEO의 호스트에 직접 연결된 첫 번째 홉 라우터가 트래픽을 분류하고 CEO의 패킷에 올바른 DS 코드 포인트를 표시할 수 있습니다. 이러한 높은 우선순위 트래픽은 특정 소스에서 전달되는 높은 우선순위 트래픽의 양에 제한이 있도록 소스 근처에서 조절될 수도 있습니다.

트래픽 소스에 가까운 패킷을 표시하면 몇 가지 이점이 있습니다. 첫째, 트래픽 소스는 어떤 패킷이 더 나은 전달 처리를 받아야 하는지 결정할 때 애플리케이션의 기본 설정을 더 쉽게 고려할 수 있습니다. 또한, 분류

단일 노드 내에 적용해야 하는 분류 규칙의 수가 줄어들기 때문에 트래픽이 다른 소스의 패킷과 집계되기 전에는 패킷이 훨씬 간단해집니다.

패킷 마킹은 여러 노드에 분산될 수 있으므로 소스 DS 도메인은 공급자 DS 도메인으로 향하는 집계된 트래픽이 적절한 TCA를 준수하는지 확인하는 역할을 합니다. 대역폭 브로커나 RSVP와 같은 추가 할당 메커니즘을 사용하여 공급자의 네트워크\[2BIT, Bernet\] 내에서 특정 DS 동작 집합에 대한 리소스를 동적으로 할당할 수 있습니다. 소스 도메인의 경계 노드는 TCA 준수도 모니터링해야 하며 필요에 따라 패킷을 감시, 구성 또는 재표시할 수 있습니다.

---
#### **2.3.4.2  At the Boundary of a DS Domain**

트래픽 스트림은 경계 링크의 양쪽 끝\(업스트림 도메인의 DS 출구 노드 또는 다운스트림 도메인의 DS 입구 노드\)에서 분류, 표시 및 조절될 수 있습니다. 도메인 간의 SLA는 트래픽 스트림을 DS 동작 집계에 매핑하고 적절한 TCA에 따라 해당 집계를 조정하는 책임이 있는 도메인을 지정해야 합니다. 그러나 DS 수신 노드는 수신 트래픽이 TCA를 준수하지 않을 수 있다고 가정하고 로컬 정책에 따라 TCA를 시행할 준비를 해야 합니다.

패킷이 업스트림 도메인에서 미리 표시되고 조절되면 다운스트림 DS 도메인에서 지원되어야 하는 분류 및 트래픽 조절 규칙이 잠재적으로 더 적습니다. 이러한 상황에서 다운스트림 DS 도메인은 TCA를 시행하기 위해 수신 동작 집계를 다시 표시하거나 감시하기만 하면 됩니다. 그러나 경로 또는 소스에 종속적인 보다 정교한 서비스에는 다운스트림 DS 도메인의 수신 노드에서 MF 분류가 필요할 수 있습니다.

DS 수신 노드가 DS를 지원하지 않는 업스트림 도메인에 연결된 경우 DS 수신 노드는 수신 트래픽에 대해 필요한 모든 트래픽 조절 기능을 수행할 수 있어야 합니다.

---
#### **2.3.4.3  In non-DS-Capable Domains**

DS 가능하지 않은 도메인의 트래픽 소스 또는 중간 노드는 트래픽이 다운스트림 DS 도메인의 수신에 도달하기 전에 트래픽을 미리 표시하기 위해 트래픽 조절기를 사용할 수 있습니다. 이러한 방식으로 분류 및 표시에 대한 로컬 정책이 숨겨질 수 있습니다.

---
#### **2.3.4.4  In Interior DS Nodes**

기본 아키텍처에서는 복잡한 분류 및 트래픽 조절 기능이 네트워크의 수신 및 송신 경계 노드에만 위치한다고 가정하지만 네트워크 내부에 이러한 기능을 배포하는 것이 배제되지는 않습니다. 예를 들어, 보다 제한적인 액세스 정책이 대양 횡단 링크에 시행되어 링크의 업스트림 노드에 MF 분류 및 트래픽 조절 기능이 필요할 수 있습니다. 이 접근 방식에는 유지해야 할 분류 및 조건 지정 규칙이 잠재적으로 많으므로 크기 조정 제한이 있을 수 있습니다.

---
## **2.4  Per-Hop Behaviors**

PHB\(홉별 동작\)는 특정 DS 동작 집합에 적용되는 DS 노드의 외부에서 관찰 가능한 전달 동작에 대한 설명입니다. "전달 동작"은 이 맥락에서 일반적인 개념입니다. 예를 들어, 하나의 동작 집합만이 링크를 차지하는 경우 관찰 가능한 전달 동작\(즉, 손실, 지연, 지터\)은 링크의 상대적 로딩에만 의존하는 경우가 많습니다\(즉, 동작이 다음을 가정하는 경우\). 작업 보존 일정 규율\). 여러 동작 집합이 노드의 버퍼 및 대역폭 리소스를 놓고 경쟁할 때 유용한 동작 구별이 주로 관찰됩니다. PHB는 노드가 행동 집합에 자원을 할당하는 수단으로, 이러한 기본적인 hop-by-hop 자원 할당 메커니즘을 바탕으로 유용하고 차별화된 서비스를 구축할 수 있습니다.

PHB의 가장 간단한 예는 동작 집계에 대한 링크의 X%\(합리적인 시간 간격 동안\)의 최소 대역폭 할당을 보장하는 것입니다. 이 PHB는 다양한 경쟁 교통 상황에서 매우 쉽게 측정할 수 있습니다. 약간 더 복잡한 PHB는 링크의 X%에 대한 최소 대역폭 할당을 보장하고 초과 링크 용량을 비례적으로 공평하게 공유합니다. 일반적으로 PHB의 관찰 가능한 동작은 관련 동작 집합의 트래픽 특성 또는 다른 동작 집합의 특성에 대한 특정 제약 조건에 따라 달라질 수 있습니다.

PHB는 다른 PHB에 비해 리소스\(예: 버퍼, 대역폭\) 우선순위 또는 상대적으로 관찰 가능한 트래픽 특성\(예: 지연, 손실\)에 따라 지정될 수 있습니다. 이러한 PHB는 리소스를 할당하기 위한 빌딩 블록으로 사용될 수 있으며 일관성을 위해 그룹\(PHB 그룹\)으로 지정되어야 합니다. PHB 그룹은 일반적으로 패킷 스케줄링이나 버퍼 관리 정책과 같이 그룹 내 각 PHB에 적용되는 공통 제약 조건을 공유합니다. 그룹 내 PHB 간의 관계는 절대적 또는 상대적 우선순위 측면에서 나타날 수 있습니다\(예: 다음을 통한 폐기 우선순위\).

결정론적 또는 확률론적 임계값\) 그러나 이는 필수는 아닙니다\(예: N개의 동일한 링크 공유\). 단독으로 정의된 단일 PHB는 PHB 그룹의 특별한 경우입니다.

PHB는 일부 버퍼 관리 및 패킷 스케줄링 메커니즘을 통해 노드에서 구현됩니다. PHB는 특정 구현 메커니즘이 아닌 서비스 제공 정책과 관련된 동작 특성 측면에서 정의됩니다. 일반적으로 특정 PHB 그룹을 구현하는 데는 다양한 구현 메커니즘이 적합할 수 있습니다. 또한, 하나 이상의 PHB 그룹이 노드에 구현되어 도메인 내에서 활용될 가능성이 높습니다. PHB 그룹은 그룹 간의 적절한 자원 할당을 유추할 수 있도록 정의되어야 하며, 두 개 이상의 그룹을 동시에 지원할 수 있는 통합 메커니즘이 구현될 수 있습니다. PHB 그룹 정의는 동시 작업을 방해할 수 있는 이전에 문서화된 PHB 그룹과의 충돌 가능성을 나타내야 합니다.

\[DSFIELD\]에서 설명한 바와 같이, 수신된 패킷에 있는 DS 코드포인트의 매핑에 의해 노드에서 PHB가 선택된다. 표준화된 PHB에는 권장되는 코드 포인트가 있습니다. 그러나 코드 포인트의 전체 공간은 표준화된 PHB에 대한 권장 코드 포인트에 사용할 수 있는 공간보다 크며 \[DSFIELD\]는 로컬로 구성 가능한 매핑을 위한 조항을 남깁니다. 코드포인트-\>PHB 매핑 테이블에는 1-\>1 및 N-\>1 매핑이 모두 포함될 수 있습니다. 모든 코드포인트는 일부 PHB에 매핑되어야 합니다. 일부 로컬 정책이 없는 경우 해당 PHB 사양에 따라 표준화된 PHB에 매핑되지 않은 코드 포인트는 기본 PHB에 매핑되어야 합니다.

---
## **2.5  Network Resource Allocation**

DS 도메인의 노드에서 지원되는 PHB 그룹의 구현, 구성, 운영 및 관리는 도메인의 서비스 프로비저닝 정책에 따라 해당 노드의 리소스와 동작 집합 간의 노드 간 링크를 효과적으로 분할해야 합니다. 트래픽 조절자는 TCA 시행을 통해 그리고 도메인의 노드 및 트래픽 조절자의 운영 피드백을 통해 이러한 리소스의 사용을 추가로 제어할 수 있습니다. 복잡한 트래픽 조절 기능이 없는 경우\(예: 정적 표시 정책만 사용\) 다양한 서비스를 배포할 수 있지만 폴리싱, 셰이핑, 동적 재마킹과 같은 기능을 사용하면 정량적 성능 지표를 제공하는 서비스 배포가 가능합니다.

트래픽 조절 장치와 내부 노드 간의 구성 및 상호 작용은 도메인의 관리 제어에 의해 관리되어야 하며 프로토콜 및 제어 엔터티를 통한 운영 제어가 필요할 수 있습니다. 다양한 제어 모델이 가능합니다.

이러한 구성 요소 간의 상호 작용의 정확한 특성과 구현은 이 아키텍처의 범위를 벗어납니다. 그러나 확장성을 위해서는 도메인 제어에 네트워크 리소스의 미세 관리가 필요하지 않아야 합니다. 가장 확장성이 뛰어난 제어 모델은 운영 기간 동안 개방형 루프에서 노드를 운영하며 SLA가 다양하므로 관리 시간 규모 관리만 필요합니다. 이 간단한 모델은 상황에 따라 부적합할 수 있으며, 최근 로드 프로필과 네트워크 활용도의 균형을 맞추기 위해 일부 자동화되었지만 천천히 변화하는 운영 제어\(초가 아닌 분\)가 바람직할 수 있습니다.

---
## **3.  Per-Hop Behavior Specification Guidelines**

홉별 동작 표준화에 대한 기본 요구 사항은 \[DSFIELD\]에 나와 있습니다. 이 섹션에서는 PHB\(그룹\) 사양에 대한 추가 지침을 설명하여 해당 텍스트를 자세히 설명합니다. 이는 구현 일관성을 높이는 데 도움이 되도록 고안되었습니다. PHB 그룹이 표준화를 위해 제안되기 전에 이 아키텍처의 무결성을 보존하기 위해 이러한 지침을 적절하게 충족해야 합니다.

G.1: PHB 표준은 표준 매핑 \[DSFIELD\]을 위해 예약된 코드 포인트 공간에서 선택된 권장 DS 코드 포인트를 지정해야 합니다. 권장 코드 포인트는 IANA에 의해 할당됩니다. PHB 제안은 도메인 간 실험을 용이하게 하기 위해 EXP/LU 공간에서 임시 코드 포인트를 권장할 수 있습니다. 패킷의 PHB 결정에는 DS 필드 이외의 추가 패킷 헤더 필드 검사가 필요하지 않습니다.

G.2: 새로 제안된 각 PHB 그룹의 사양에는 제안된 동작의 목적과 동작에 대한 개요가 포함되어야 합니다. 개요에는 PHB 그룹의 대상이 되는 문제 설명이 포함되어야 합니다. 개요에는 PHB 그룹의 기본 개념이 포함되어야 합니다. 이러한 개념에는 대기열 동작, 삭제 동작 및 출력 링크 선택 동작이 포함되지만 이에 국한되지는 않습니다. 마지막으로 개요에는 문제 설명에 명시된 문제를 PHB 그룹이 해결하는 방법이 명시되어야 합니다.

G.3: PHB 그룹 사양은 지정된 개별 PHB 수를 나타내야 합니다. 여러 PHB가 지정되는 경우 이러한 PHB 간의 상호 작용과 그룹 내의 모든 PHB가 전역적으로 준수해야 하는 제약 조건을 명확하게 지정해야 합니다. 예를 들어, 사양은 해당 마이크로플로우의 서로 다른 패킷이 그룹 내의 서로 다른 PHB에 대해 표시된 경우 마이크로플로우 내에서 패킷 재정렬 확률이 증가하는지 여부를 나타내야 합니다.

G.4: PHB 그룹의 적절한 기능이 프로비저닝 제한과 같은 제약 조건에 따라 달라지는 경우 PHB 정의는 이러한 제약 조건을 위반할 때의 동작을 설명해야 합니다. 또한 이러한 제약 조건을 위반했을 때 패킷 폐기 또는 재표시와 같은 작업이 필요한 경우 이러한 작업을 구체적으로 규정해야 합니다.

G.5: PHB 그룹은 도메인별 기능이나 도메인별 서비스를 제공하기 위해 도메인 내 로컬 사용을 위해 지정될 수 있습니다. 이 경우 PHB 사양은 공급업체에 PHB 그룹에 대한 일관된 정의를 제공하는 데 유용합니다. 그러나 로컬 사용을 위해 정의된 PHB 그룹은 표준화를 고려해서는 안 되며 정보용 RFC로 게시될 수 있습니다. 대조적으로, 일반적인 용도로 사용되는 PHB 그룹은 보다 엄격한 표준화 프로세스를 따릅니다. 따라서 모든 PHB 제안에는 일반 용도로 고려할 것인지, 지역적 용도로 고려할 것인지를 구체적으로 명시해야 합니다.

PHB 그룹은 호스트 간, WAN 엣지 간, WAN 엣지 간 및/또는 도메인 엣지 간 서비스를 제공하려는 의도로 설계될 수 있다는 것이 인식되었습니다. PHB 정의에서 "엔드-투-엔드"라는 용어는 일관성을 위해 "호스트-호스트"를 의미하는 것으로 해석되어야 합니다.

다른 PHB 그룹은 실험 또는 운영 목적으로 도메인 내에서 로컬로 정의되고 배포될 수 있습니다. 이러한 PHB 그룹을 공개적으로 문서화해야 한다는 요구 사항은 없지만 \[DSFIELD\]에 정의된 대로 EXP/LU 풀 중 하나의 DS 코드 포인트를 활용해야 합니다.

G.6: PHB 그룹 내의 PHB에 대해 표시된 패킷이 그룹 내의 다른 PHB를 선택하기 위해 다시 표시되는 것이 가능하거나 적절할 수 있습니다. 도메인 내에서 또는 도메인 경계를 넘어. 일반적으로 PHB 수정에는 세 가지 이유가 있습니다.

ㅏ. PHB 그룹과 관련된 코드 포인트는 집합적으로 네트워크에 대한 상태를 전달하기 위한 것입니다. b. 패킷의 PHB 승격 또는 강등을 요구하는 조건이 존재합니다\(이는 그룹 내의 PHB가 어떤 순서로 순위가 매겨질 수 있다고 가정합니다\). c. 두 도메인 사이의 경계에는 SLA가 적용되지 않습니다. 이 경우 경계 링크를 통과할 때 선택할 코드포인트/PHB는 업스트림 도메인의 로컬 정책에 따라 결정됩니다.

PHB 사양은 PHB 그룹 내의 PHB용으로 표시된 패킷이 그룹 내의 다른 PHB로 수정\(예: 승격 또는 강등\)될 수 있거나 수정되어야 하는 상황을 명확하게 명시해야 합니다. 패킷의 PHB를 수정하는 것이 바람직하지 않은 경우

사양에는 PHB 수정 시 그에 따른 위험이 명확하게 명시되어야 합니다. PHB 그룹 내부 또는 외부에서 패킷의 PHB를 변경할 때 발생할 수 있는 위험은 마이크로플로우 내에서 패킷 재정렬 가능성이 높다는 것입니다. 그룹 내의 PHB는 호스트 간, WAN 경계에서 WAN 경계 및/또는 도메인 경계에서 도메인 경계 의미를 전달할 수 있으며, 이는 패킷에서 다른 PHB를 선택하도록 표시되는 경우 복제하기 어려울 수 있습니다. 그룹\(또는 기타\).

특정 PHB 그룹의 경우 그룹 내에서 다른 PHB를 지정하기 위해 패킷을 다시 표시하여 노드의 상태 변화를 반영하는 것이 적절할 수 있습니다. PHB 그룹이 네트워크 상태를 반영하도록 설계된 경우 PHB 정의는 PHB와 PHB가 반영하는 상태 간의 관계를 적절하게 설명해야 합니다. 또한, 이러한 PHB가 노드가 어떤 방식으로 수행할 수 있는 전달 작업을 제한하는 경우 이러한 제약은 노드가 수행해야 하거나 수행해야 하는 작업으로 지정될 수 있습니다.

G.7: PHB 그룹 사양에는 PHB 그룹의 유틸리티에 대한 터널링의 의미를 정의하는 섹션이 포함되어야 합니다. 이 섹션에서는 내부 헤더의 원래 DS 필드가 터널에 캡슐화될 때 새로 생성된 외부 헤더의 PHB 그룹 유틸리티에 대한 의미를 지정해야 합니다. 이 섹션에서는 또한 내부 헤더와 외부 헤더의 코드 포인트 모두에 액세스할 수 있는 경우 터널 출구에서 내부 헤더에 어떤 가능한 변경 사항을 적용해야 하는지 논의해야 합니다\(섹션 6.2 참조\).

G.8: PHB 그룹을 지정하는 프로세스는 본질적으로 점진적일 수 있습니다. 새로운 PHB 그룹이 제안되면 이전에 지정된 PHB 그룹과의 알려진 상호 작용을 문서화해야 합니다. 새 PHB 그룹이 생성되면 범위가 완전히 새로운 그룹이 될 수도 있고 기존 PHB 그룹의 확장이 될 수도 있습니다. PHB 그룹이 기존 PHB 사양의 일부 또는 전부와 완전히 독립된 경우, 새로운 PHB 그룹이 이미 표준화된 PHB 그룹과 공존할 수 있는 방법을 자세히 설명하는 섹션이 PHB 사양에 포함되어야 합니다. 예를 들어, 이 섹션은 두 개의 개별 PHB 그룹과 연관된 코드 포인트로 표시된 패킷에 대해 마이크로플로우 내에서 패킷 재정렬 가능성을 나타낼 수 있습니다. 동일한 노드에서 두 개 이상의 서로 다른 PHB 그룹을 동시에 작동하는 것이 불가능하거나 해로운 경우 이를 명시해야 합니다. 두 개\(또는 그 이상\)의 서로 다른 PHB 그룹의 동시 작업에 이러한 서로 다른 PHB 그룹의 PHB용으로 표시된 패킷이 노드에 의해 동시에 처리될 때 노드의 특정 동작이 필요한 경우 이러한 동작이 명시되어야 합니다.

PHB 그룹을 정의할 때 순환성을 피하기 위해 주의를 기울여야 합니다.

제안된 PHB 그룹이 기존 PHB 그룹의 확장인 경우 이 확장이 확장되는 동작과 어떻게 상호 운용되는지 자세히 설명하는 섹션이 PHB 그룹 사양에 포함되어야 합니다. 또한 확장이 어떤 방식으로든 기존 동작을 변경하거나 더 좁게 정의하는 경우에도 이를 명확하게 표시해야 합니다.

G.9: 각 PHB 사양에는 PHB 그룹 구현을 위한 최소 적합성 요구 사항을 지정하는 섹션이 포함되어야 합니다. 이 적합성 섹션은 PHB 사양에서 허용하는 범위 내에서 구현 변형을 허용하면서 동작의 세부 사항을 지정하는 수단을 제공하기 위한 것입니다. 이 적합성 섹션은 규칙, 테이블, 의사 코드 또는 테스트의 형태를 취할 수 있습니다.

G.10: PHB 사양에는 동작의 보안 영향을 자세히 설명하는 섹션이 포함되어야 합니다. 이 섹션에는 터널 출구에서 내부 헤더의 코드 포인트 재표시와 원하는 전달 동작에 미치는 영향에 대한 논의가 포함되어야 합니다.

또한 이 섹션에서는 제안된 PHB 그룹이 서비스 거부 공격, 서비스 계약 감소 공격 및 서비스 계약 위반 공격에 어떻게 사용될 수 있는지 논의해야 합니다. 마지막으로, 이 섹션에서는 제안된 동작과 관련된 공격을 탐지하는 가능한 방법에 대해 논의해야 합니다.

G.11: PHB 사양에는 PHB 운영에 영향을 미칠 수 있고 PHB를 활용하는 후보 서비스에 영향을 미칠 수 있는 구성 및 관리 문제를 자세히 설명하는 섹션이 포함되어야 합니다.

G.12: 현재 및 잠재적 서비스에 대해 제안된 동작의 영향을 고려하는 각 PHB 사양과 함께 부록을 제공하는 것이 좋습니다. 이러한 서비스에는 사용자별, 장치별, 도메인별 또는 종단 간 서비스가 포함될 수 있지만 이에 국한되지는 않습니다. 또한 사용자, 장치 및/또는 도메인에서 서비스를 확인하는 방법을 설명하는 섹션을 부록에 포함하는 것이 좋습니다.

G.13: 도메인 내 로컬 사용을 목표로 하는 각 PHB 사양에 부록을 제공하여 PHB 그룹을 지원하지 않는 피어 도메인으로 전달되는 패킷에 대한 PHB 선택에 대한 지침을 제공하는 것이 좋습니다.

G.14: 제안된 PHB 그룹이 기존 상위 계층 프로토콜에 미치는 영향을 고려하는 각 PHB 사양에 부록을 제공하는 것이 좋습니다. 일부 상황에서 PHB는 제안된 PHB 그룹의 유틸리티를 늘리거나 줄일 수 있는 상위 계층 프로토콜에 대한 변경을 허용할 수 있습니다.

G.15: 공유 매체 또는 전환 링크 계층에서 PHB의 의도된 동작을 지원하기 위해 링크 계층 QoS 메커니즘에 대한 매핑을 권장하는 부록을 각 PHB 사양과 함께 제공하는 것이 좋습니다. PHB와 링크 계층 QoS 메커니즘 간의 가장 적절한 매핑 결정은 많은 요소에 따라 달라지며 이 문서의 범위를 벗어납니다. 그러나 사양에서는 몇 가지 지침을 제공해야 합니다.

---
## **4.  Interoperability with Non-Differentiated Services-Compliant Nodes**

우리는 미분화 서비스 호환 노드\(비DS 호환 노드\)를 \[DSFIELD\]에 지정된 대로 DS 필드를 해석하지 않거나 표준화된 PHB\(또는 그 중 일부 또는 전부\)를 구현하지 않는 노드로 정의합니다. 특정 DS 도메인 내에서 사용 중\). 이는 노드의 기능이나 구성 때문일 수 있습니다. 우리는 레거시 노드를 \[RFC791, RFC1812\]에 정의된 대로 IPv4 우선순위 분류 및 전달을 구현하지만 DS 규격이 아닌 비DS 규격 노드의 특별한 경우로 정의합니다. IPv4 TOS 옥텟의 우선순위 값은 \[DSFIELD\]에 정의된 클래스 선택기 코드포인트와 의도적으로 호환되며, \[RFC791, RFC1812\]에 정의된 우선순위 전달 동작은 역시 \[DSFIELD\]에 정의된 클래스 선택기 PHB 요구사항을 준수합니다. 레거시 노드와 DS 호환 노드 간의 주요 차이점은 레거시 노드가 \[RFC1349\]에 정의된 TOS 옥텟의 비트 3-6\("DTRC" 비트\)을 해석할 수도 있고 해석하지 않을 수도 있다는 것입니다. 실제로는 \[DSFIELD\]에 지정된 대로 이러한 비트를 해석하지 않습니다. \[RFC1349\]에 정의된 TOS 표시의 사용은 더 이상 사용되지 않는다고 가정합니다. DS와 호환되지 않고 레거시 노드가 아닌 노드는 0이 아닌 DS 코드 포인트가 있는 패킷에 대해 예측할 수 없는 전달 동작을 나타낼 수 있습니다.

차별화된 서비스는 노드의 홉별 동작 구현을 통해 제공되는 리소스 할당 메커니즘에 따라 달라집니다. 트래픽이 DS 비호환 노드나 DS 비호환 도메인을 통과하는 경우 서비스의 품질 또는 통계적 보증 수준이 저하될 수 있습니다.

우리는 두 가지 개별 사례를 검토할 것입니다. 첫 번째 경우는 DS 도메인 내에서 DS 비준수 노드를 사용하는 것과 관련이 있습니다. PHB 전달은 주로 제어된 방식으로 부족한 노드 및 링크 리소스를 할당하는 데 유용합니다. 고속의 가벼운 로드 링크에서는 최악의 패킷 지연, 지터 및 손실이 발생할 수 있습니다.

무시할 수 있으며 해당 링크의 업스트림 끝에서 DS를 준수하지 않는 노드를 사용해도 서비스 저하가 발생하지 않을 수 있습니다. 보다 현실적인 상황에서는 노드에 PHB 전달이 부족하여 노드를 통과하는 경로에서 낮은 지연, 낮은 손실 또는 프로비저닝된 대역폭 서비스를 제공하는 것이 불가능할 수 있습니다. 그러나 DS 도메인이 \[DSFIELD\]에 정의된 클래스 선택기 코드 포인트만 사용하도록 제한하고 레거시 노드의 특정 우선 순위 구현이 호환되는 전달 동작을 제공한다고 가정하면 레거시 노드의 사용은 허용 가능한 대안이 될 수 있습니다. 해당 노드를 통과하는 경로를 따라 제공되는 서비스. 사용 중인 코드 포인트를 클래스 선택기 코드 포인트로 제한하는 것이 중요합니다. 레거시 노드가 \[RFC1349\]에 따라 비트 3-5를 해석할 수도 있고 해석하지 않을 수도 있어 예측할 수 없는 전달 결과가 발생할 수 있기 때문입니다.

두 번째 경우는 DS를 사용할 수 없는 도메인을 통과하는 서비스 동작과 관련이 있습니다. 논의를 위해 DS를 지원하지 않는 도메인은 도메인 경계 노드에 트래픽 조절 기능을 배포하지 않는다고 가정합니다. 따라서 도메인이 레거시 또는 DS 호환 내부 노드로 구성된 경우에도 경계에서 트래픽 적용이 부족하면 도메인 전체에 일부 유형의 서비스를 일관되게 제공하는 기능이 제한됩니다. DS 도메인과 DS 비가능 도메인은 DS 비가능 도메인에 진입하기 전에 DS 도메인으로부터의 송신 트래픽을 표시하는 방법을 제어하는 ​​계약을 협상할 수 있습니다. 이 계약은 엄격한 트래픽 조절 대신 트래픽 샘플링을 통해 준수 여부를 모니터링할 수 있습니다. 대안적으로, DS 가능하지 않은 도메인이 레거시 노드로 구성된다는 지식이 있는 경우, 업스트림 DS 도메인은 기회에 따라 하나 이상의 클래스 선택기 코드 포인트에 대한 차별화된 서비스 트래픽을 다시 표시할 수 있습니다. 다운스트림 도메인의 트래픽 관리 기능에 대한 지식이 없고 합의가 이루어지지 않은 경우 DS 도메인 출구 노드는 DS 가능하지 않은 도메인이 처리할 것이라는 가정 하에 DS 코드포인트를 0으로 다시 표시하도록 선택할 수 있습니다. 최선의 서비스로 균일하게 트래픽을 처리합니다.

DS 가능하지 않은 도메인이 DS 도메인과 피어링되는 경우, DS 가능하지 않은 도메인에서 흐르는 트래픽은 적절한 SLA 또는 정책에 따라 DS 도메인의 DS 수신 노드에서 조절되어야 합니다.

---
## **5.  Multicast Considerations**

멀티캐스트 트래픽을 통해 차별화된 서비스를 사용하면 서비스 프로비저닝에 여러 가지 문제가 발생합니다. 첫째, 수신 노드에서 DS 도메인으로 들어가는 멀티캐스트 패킷은 멀티캐스트 패킷 복제로 인해 도메인의 일부 세그먼트를 통해 동시에 여러 경로를 취할 수 있습니다. 이런 식으로 더 많은 네트워크 리소스를 소비합니다.

유니캐스트 패킷보다 멀티캐스트 그룹 멤버십이 동적인 경우 특정 그룹의 업스트림 네트워크에서 발생하는 멀티캐스트 트래픽이 소비할 수 있는 네트워크 리소스의 양을 미리 예측하기가 어렵습니다. 이러한 불확실성으로 인해 멀티캐스트 발신자에게 정량적 서비스 보장을 제공하기가 어려울 수 있습니다. 또한, 멀티캐스트 트래픽으로부터 리소스 격리를 제공하기 위해 유니캐스트 트래픽에서만 사용할 수 있도록 코드 포인트와 PHB를 예약해야 할 수도 있습니다.

두 번째 문제는 DS 수신 노드에 도착하는 멀티캐스트 패킷에 대한 DS 코드 포인트를 선택하는 것입니다. 해당 패킷은 여러 다운스트림 도메인과 피어링되는 여러 DS 송신 노드에서 DS 도메인을 종료할 수 있으므로 사용된 DS 코드 포인트는 피어링 SLA를 위반하는 다운스트림 DS 도메인의 서비스 요청으로 이어져서는 안 됩니다. 도메인의 출구 경계에 걸쳐 있는 차별화된 서비스를 수신하는 트래픽 집합에 대해 DS 수신 노드에서 분류자 및 트래픽 조절기 상태를 설정할 때 인접한 다운스트림 전송 도메인의 ID와 해당 피어링 SLA의 세부 사항을 고려할 수 있습니다. 구성 결정에 영향을 미칩니다\(라우팅 정책 및 라우팅 인프라의 안정성에 따라 다름\). 이러한 방식으로 다운스트림 DS 도메인과의 피어링 SLA는 업스트림 도메인의 수신 시 부분적으로 시행될 수 있으므로 업스트림 도메인의 송신 노드에서 분류 및 트래픽 조절 부담이 줄어듭니다. 멀티캐스트 트래픽의 경우 동적 그룹 멤버십 가능성으로 인해 이는 쉽게 수행되지 않습니다. 결과적으로 유니캐스트 트래픽에 대한 서비스 보장이 영향을 받을 수 있습니다. 이 문제를 해결하는 한 가지 방법은 멀티캐스트 트래픽에 대한 별도의 피어링 SLA를 설정하고 멀티캐스트 패킷에 대한 특정 코드 포인트 집합을 활용하거나 DS 송신 노드에 필요한 분류 및 트래픽 조절 메커니즘을 구현하여 우선적으로 격리를 제공하는 것입니다. 다운스트림 도메인과의 피어링 SLA를 준수하는 유니캐스트 트래픽.

---
## **6.  Security and Tunneling Considerations**

이 섹션에서는 차별화된 서비스의 도입으로 인해 제기되는 보안 문제, 주로 서비스 거부 공격 가능성 및 무단 트래픽에 의한 서비스 도용 가능성을 다룹니다\(6.1절\). 또한 IPsec이 있는 경우 차별화된 서비스의 운영 및 IPsec과의 상호 작용\(섹션 6.2\)과 감사 요구 사항\(섹션 6.3\)도 논의됩니다. 이 섹션에서는 IPsec 및 비IPsec 터널을 모두 사용하여 발생하는 문제를 고려합니다.

---
## **6.1  Theft and Denial of Service**

차별화된 서비스의 기본 목표는 공통 네트워크 인프라의 트래픽 스트림에 대해 다양한 수준의 서비스를 제공하는 것입니다. 이를 달성하기 위해 다양한 자원 관리 기술이 사용될 수 있지만 최종 결과는 일부 패킷이 다른 패킷과 다른\(예: 더 나은\) 서비스를 수신하게 되는 것입니다. 다른\(예: 더 좋거나 더 나쁜\) 서비스를 초래하는 특정 동작에 대한 네트워크 트래픽의 매핑은 주로 DS 필드에 의해 표시되므로 공격자는 DS 필드를 사용된 동작을 나타내는 코드 포인트로 수정하여 더 나은 서비스를 얻을 수 있습니다. 향상된 서비스를 위해 또는 해당 코드 포인트로 설정된 DS 필드와 함께 패킷을 주입합니다. 한계에 도달하면 이러한 서비스 도난은 수정되거나 주입된 트래픽으로 인해 해당 트래픽과 다른 트래픽 스트림을 전달하는 데 사용할 수 있는 리소스가 고갈될 때 서비스 거부 공격이 됩니다. 이러한 도난 및 서비스 거부 공격에 대한 방어는 DS 도메인 내 네트워크 인프라의 보안 및 무결성과 함께 DS 경계 노드의 트래픽 조절의 조합으로 구성됩니다.

Sec.에 설명된 대로. 2, DS 수신 노드는 DS 도메인으로 들어가는 모든 트래픽을 조정하여 허용 가능한 DS 코드 포인트가 있는지 확인해야 합니다. 이는 코드 포인트가 해당 TCA 및 도메인의 서비스 프로비저닝 정책을 준수해야 함을 의미합니다. 따라서 수신 노드는 수정된 DS 코드 포인트\(예: 트래픽에 자격이 부여되지 않은 코드 포인트\)를 기반으로 하는 도난 및 서비스 거부 공격에 대한 기본 방어선입니다. 해당 TCA 및/또는 서비스 제공 정책. 수신 노드의 중요한 인스턴스는 DS 도메인의 모든 트래픽 시작 노드가 해당 트래픽의 수신 노드이며 모든 시작 트래픽이 허용 가능한 DS 코드 포인트를 전달하는지 확인해야 한다는 것입니다.

도메인의 서비스 프로비저닝 정책과 TCA 모두 수신 노드가 일부 입력 패킷의 DS 코드 포인트를 변경하도록 요구할 수 있습니다\(예: 수신 라우터는 적절한 SLA에 따라 고객 트래픽의 DS 코드 포인트를 설정할 수 있습니다\). 수신 노드는 DS 코드 포인트가 허용되는지 확인하기 위해 다른 모든 인바운드 트래픽을 조절해야 합니다. 허용할 수 없는 코드 포인트가 있는 것으로 발견된 패킷은 전달되기 전에 폐기되거나 DS 코드 포인트를 허용 가능한 값으로 수정해야 합니다. 예를 들어, 향상된 서비스 계약이 존재하지 않는 도메인으로부터 트래픽을 수신하는 수신 노드는 DS 코드포인트를 기본 PHB 코드포인트\[DSFIELD\]로 재설정할 수 있습니다. 일부 DS 코드 포인트\(예: 향상된 서비스에 해당하는 코드 포인트\)의 사용을 확인하려면 트래픽 인증이 필요할 수 있으며, 이러한 인증은 기술적 수단\(예: IPsec\) 및/또는 비기술적 수단\(예: 인바운드 링크\)으로 수행될 수 있습니다. 정확히 하나의 고객 사이트에 연결되어 있는 것으로 알려져 있습니다\).

도메인 간 합의는 트래픽이 다운스트림 도메인에 허용되는 DS 코드 포인트를 갖도록 보장하는 일을 업스트림 도메인이 부분적으로 또는 완전히 책임지게 함으로써 수신 노드 트래픽 조절의 필요성을 줄이거나 제거할 수 있습니다. 이 경우, 수신 노드는 업스트림 도메인에 대한 의존도를 줄이기 위해 중복 트래픽 조절 검사를 계속 수행할 수 있습니다\(예를 들어, 이러한 검사는 서비스 도용 공격이 도메인 경계를 넘어 전파되는 것을 방지할 수 있습니다\). 업스트림 도메인이 해당 책임을 이행하지 않아 이러한 검사가 실패하는 경우 해당 실패는 감사 가능한 이벤트입니다. 생성된 감사 로그 항목에는 패킷이 수신된 날짜/시간, 소스 및 대상 IP 주소, 오류를 일으킨 DS 코드 포인트가 포함되어야 합니다. 실제로 이러한 상황에서 수행할 검사\(있는 경우\)를 결정할 때 이러한 검사로 인한 제한적인 이득을 잠재적인 성능 영향과 비교해야 합니다.

DS 도메인의 내부 노드는 향상된 서비스를 구현하는 데 사용되는 동작과 차별화된 서비스 트래픽을 연관시키기 위해 DS 필드에 의존할 수 있습니다. 이를 수행하는 모든 노드는 허용되지 않는 DS 코드 포인트가 있는 트래픽의 도착을 방지하기 위해 DS 도메인의 올바른 작동에 달려 있습니다. 견고성에 대한 우려는 허용할 수 없는 DS 코드 포인트가 있는 패킷의 도착으로 인해 네트워크 노드의 오류\(예: 충돌\)가 발생해서는 안 된다는 것을 의미합니다. 내부 노드는 서비스 프로비저닝 정책\(또는 개별 SLA\)을 시행할 책임이 없으므로 DS 코드 포인트를 사용하기 전에 확인할 필요가 없습니다. 내부 노드는 보안 및 견고성\(예: DS 코드 포인트 수정을 기반으로 한 서비스 도용 공격에 대한 저항\)을 향상시키기 위해 DS 코드 포인트에 대해 일부 트래픽 조절 검사\(예: 특정 링크의 트래픽에 사용되지 않는 DS 코드 포인트 확인\)를 수행할 수 있습니다. \). 이러한 검사에서 감지된 실패는 감사 가능한 이벤트이며 생성된 감사 로그 항목에는 패킷이 수신된 날짜/시간, 소스 및 대상 IP 주소, 실패를 일으킨 DS 코드 포인트가 포함되어야 합니다. 실제로 내부 노드에서 수행할 검사가 있는 경우 이를 결정할 때 이러한 검사로 인한 제한된 이득을 잠재적인 성능 영향과 비교하여 평가해야 합니다.

DS 코드 포인트 수정이나 공격자에 의한 트래픽 주입에 대해 적절히 보호할 수 없는 모든 링크는 경계 링크로 처리되어야 합니다\(따라서 해당 링크에 도착하는 모든 트래픽은 수신 노드에서 도메인에 들어가는 것처럼 처리됩니다\). 로컬 보안 정책은 "적절하게 보안됨"에 대한 정의를 제공하며 이러한 정의에는 DS 코드 포인트 수정 및/또는 트래픽 주입의 위험과 결과가 링크에 대한 추가 보안 조치를 정당화하지 않는다는 결정이 포함될 수 있습니다. 링크 보안은 물리적 액세스 제어 및/또는 패킷 무결성을 보장하는 터널과 같은 소프트웨어 수단을 통해 강화될 수 있습니다.

---
## **6.2  IPsec and Tunneling Interactions**

\[ESP, AH\]에 정의된 IPsec 프로토콜은 암호화 계산에 IP 헤더의 DS 필드를 포함하지 않습니다\(터널 모드의 경우 외부 IP 헤더의 DS 필드는 포함되지 않습니다\). 따라서 네트워크 노드에 의한 DS 필드 수정은 IPsec 무결성 검사 실패를 유발할 수 없으므로 IPsec의 종단 간 보안에 영향을 주지 않습니다. 결과적으로 IPsec은 적의 DS 필드 수정\(즉, 메시지 가로채기 공격\)에 대해 어떠한 방어도 제공하지 않습니다. 적의 수정도 IPsec의 종단 간 보안에 영향을 주지 않기 때문입니다. 일부 환경에서는 IPsec 무결성 검사에 영향을 주지 않고 DS 필드를 수정하는 기능이 비밀 채널을 구성할 수 있습니다. 그러한 채널을 제거하거나 대역폭을 줄여야 하는 경우 트래픽이 종료되는 DS 송신 노드에서 필요한 처리\(예: 민감한 트래픽의 모든 DS 필드를 단일 값으로 설정\)가 수행될 수 있도록 DS 도메인을 구성해야 합니다. 더 높은 보안 도메인.

IPsec의 터널 모드는 캡슐화된 IP 헤더의 DS 필드에 대한 보안을 제공합니다. 터널 모드 IPsec 패킷에는 두 개의 IP 헤더, 즉 터널 수신 노드에서 제공하는 외부 헤더와 패킷의 원래 소스에서 제공하는 캡슐화된 내부 헤더가 포함되어 있습니다. IPsec 터널이 차별화된 서비스 네트워크에서 전체 또는 부분적으로 호스팅되는 경우 중간 네트워크 노드는 외부 헤더의 DS 필드에서 작동합니다. 터널 송신 노드에서 IPsec 처리에는 외부 헤더 제거 및 내부 헤더를 사용하여 패킷 전달\(필요한 경우\)이 포함됩니다. 내부 IP 헤더가 터널 송신 노드의 DS 도메인에 대한 DS 수신 노드에 의해 처리되지 않은 경우 터널 송신 노드는 터널에서 나가는 트래픽에 대한 DS 수신 노드이므로 해당 트래픽 조절 책임을 수행해야 합니다\(Sec 참조\). 6.1\). IPsec 처리에 캡슐화된 패킷에 대한 충분히 강력한 암호화 무결성 검사가 포함된 경우\(충분성은 로컬 보안 정책에 의해 결정됨\) 터널 송신 노드는 내부 헤더의 DS 필드가 패킷의 DS 필드와 동일한 값을 가지고 있다고 안전하게 가정할 수 있습니다. 터널 진입 노드. 이를 통해 터널 수신 노드와 동일한 DS 도메인에 있는 터널 송신 노드는 무결성 검사를 통과한 패킷을 마치 동일한 DS 도메인 내의 다른 노드에서 도착한 것처럼 안전하게 처리할 수 있으며, DS 수신 노드 트래픽 조절을 생략할 수 있습니다. 그렇지 않으면 필요합니다. 중요한 결과는 DS 도메인 내부의 안전하지 않은 링크가 충분히 강력한 IPsec 터널로 보호될 수 있다는 것입니다.

이 분석과 그 의미는 무결성 검사를 수행하는 모든 터널링 프로토콜에 적용되지만 내부 헤더의 DS 필드에 대한 보증 수준은 무결성의 강도에 따라 달라집니다.

터널링 프로토콜에 의해 수행되는 검사입니다. 현재 DS 도메인 외부의 노드를 통과할 수 있는\(또는 취약한\) 터널에 대한 충분한 보증이 없는 경우 캡슐화된 패킷은 도메인 외부에서 DS 수신 노드에 도착한 것처럼 처리되어야 합니다.

현재 IPsec 프로토콜에서는 내부 헤더의 DS 필드가 터널 송신 노드에서 IPsec 캡슐화 해제 처리에 의해 변경되지 않도록 요구합니다. 이렇게 하면 DS 필드에 대한 공격자의 수정 사항이 IPsec 터널 끝점에서 도난 또는 서비스 거부 공격을 시작하는 데 사용될 수 없습니다. 이러한 수정 사항은 터널 끝점에서 삭제되기 때문입니다. 이 문서에서는 해당 IPsec 요구 사항을 변경하지 않습니다.

터널 송신 노드가 외부 헤더의 DS 필드 값을 기반으로 내부 IP 헤더의 DS 필드를 수정하도록 허용하기 위해 향후 IPsec 사양이 수정되는 경우\(예: 외부 DS 필드의 일부 또는 전부를 내부 IP 헤더에 복사\) DS 필드\), 추가 고려 사항이 적용됩니다. 단일 DS 도메인 내에 완전히 포함되어 있고 외부 DS 필드 수정에 대해 링크가 적절하게 보호되는 터널의 경우 내부 DS 필드 수정에 대한 유일한 제한은 도메인의 서비스 제공 정책에 의해 부과되는 제한입니다. 그렇지 않은 경우 이러한 수정을 수행하는 터널 출구 노드는 터널을 나가는 트래픽에 대한 DS 입구 노드 역할을 하며 도난 및 서비스 거부 공격에 대한 방어를 포함하여 입구 노드의 트래픽 조절 책임을 수행해야 합니다\(섹션 참조\). 6.1\). 터널이 터널 출구 노드와 다른 노드에서 DS 도메인에 진입하는 경우, 터널 출구 노드는 외부 DS 필드 값이 허용 가능함을 보장하는 업스트림 DS 입구 노드에 의존할 수 있습니다. 이 경우에도 터널 송신 노드에서만 수행할 수 있는 몇 가지 검사가 있습니다\(예: 암호화된 터널에 대한 내부 및 외부 DS 코드 포인트 간의 일관성 검사\). 이러한 검사에서 감지된 실패는 감사 가능한 이벤트이며 생성된 감사 로그 항목에는 패킷이 수신된 날짜/시간, 소스 및 대상 IP 주소, 허용되지 않은 DS 코드 포인트가 포함되어야 합니다.

IPsec 터널은 아키텍처 관점에서 최소한 두 가지 다른 방식으로 볼 수 있습니다. 터널이 논리적 단일 홉 "가상 회선"으로 간주되는 경우 터널링된 트래픽을 전달하는 중간 노드의 작업은 터널 끝 너머에서 볼 수 없어야 하므로 DS 필드는 캡슐화 해제 처리의 일부로 수정되어서는 안 됩니다. 대조적으로, 터널이 트래픽 전달의 다중 홉 참가자로 간주되는 경우 터널 캡슐화 해제 처리의 일부로 DS 필드를 수정하는 것이 바람직할 수 있습니다. 후자 상황의 구체적인 예는 도메인 관리자가 트래픽 조절을 배포하기를 원하지 않는 DS 도메인의 내부 노드에서 터널이 종료될 때 발생합니다.

논리\(예: 트래픽 관리 단순화\). 이는 외부 IP 헤더\(DS 수신 노드에서 트래픽 조절의 영향을 받음\)의 DS 코드 포인트를 사용하여 내부 IP 헤더의 DS 코드 포인트를 재설정하여 IPsec 터널 송신에서 DS 수신 트래픽 조절 책임을 효과적으로 이동함으로써 지원될 수 있습니다. 노드를 적절한 업스트림 DS 수신 노드\(캡슐화되지 않은 트래픽에 대해 이미 해당 기능을 수행해야 함\)에 연결합니다.

---
## **6.3  Auditing**

차별화된 서비스를 지원하는 모든 시스템이 감사를 구현하는 것은 아닙니다. 그러나 차별화된 서비스 지원이 감사를 지원하는 시스템에 통합된 경우 차별화된 서비스 구현도 감사를 지원해야 합니다. 그러한 지원이 있는 경우 구현에서는 시스템 관리자가 차별화된 서비스에 대한 감사를 전체적으로 활성화하거나 비활성화할 수 있도록 허용해야 하며, 그러한 감사를 부분적으로 활성화하거나 비활성화하도록 허용할 수도 있습니다.

대부분의 경우 감사의 세분성은 지역적인 문제입니다. 그러나 이 문서에는 여러 감사 가능한 이벤트가 식별되어 있으며 이러한 각 이벤트에 대해 감사 로그에 포함되어야 하는 최소 정보 집합이 정의되어 있습니다. 추가 정보\(예: 감사 가능한 이벤트를 트리거한 것과 관련된 패킷\)도 이러한 각 이벤트에 대한 감사 로그에 포함될 수 있으며, 이 사양에서 명시적으로 호출되지 않은 추가 이벤트도 감사 로그 항목에 포함될 수 있습니다. 감사 가능한 이벤트 감지에 대한 응답으로 수신자가 의도된 발신자에게 메시지를 전송해야 한다는 요구 사항은 없습니다. 그러한 작업을 통해 서비스 거부가 발생할 가능성이 있기 때문입니다.

---
## **7.  Acknowledgements**

이 문서는 Steven Blake, David Clark, Ed Ellesson, Paul Ferguson, Juha Heinanen, Van Jacobson, Kalevi Kilkki, Kathleen Nichols, Walter Weiss, John Wroclawski 및 Lixia Zhang의 초기 초안을 활용했습니다.

저자들은 도움이 되는 의견과 제안을 주신 다음 개인들에게 감사를 표하고 싶습니다: Kathleen Nichols, Brian Carpenter, Konstantinos Dovrolis, Shivkumar Kalyana, Wu-chang Feng, Marty Borden, Yoram Bernet, Ronald Bonica, James Binder, Borje Ohlman, Alessio Casati , Scott Brim, Curtis Villamizar, Hamid Ould- Brahi, Andrew Smith, John Renwick, Werner Almesberger, Alan O'Neill, James Fu 및 Bob Braden.

---
## **8.  References**

\[802.1p\] ISO/IEC 최종 CD 15802-3 정보 기술 - 시스템 간 통신 및 정보 교환 - 근거리 및 수도권 네트워크 - 공통 사양 - 3부: MAC\(미디어 액세스 제어\) 브리지, \(현재 초안은 IEEE로 사용 가능\) P802.1D/D15\).

\[AH\] Kent, S. 및 R. Atkinson, "IP 인증 헤더", RFC 2402, 1998년 11월.

```text
   [ATM]       ATM Traffic Management Specification Version 4.0 <af-tm-
               0056.000>, ATM Forum, April 1996.
```

\[Bernet\] Y. Bernet, R. Yavatkar, P. Ford, F. Baker, L. Zhang, K. Nichols 및 M. Speer, "Diff-serv 네트워크에서 RSVP 사용을 위한 프레임워크", 작업 진행 중.

\[DSFIELD\] 니콜스, K., 블레이크, S., 베이커, F. 및 D. 블랙,

- "IPv4 및 IPv6 헤더의 차별화된 서비스 필드\(DS 필드\) 정의", RFC 2474, 1998년 12월.

\[설명\] D. Clark 및 W. Fang, "최선의 노력 패킷 전달 서비스의 명시적 할당", IEEE/ACM Trans. 네트워킹, vol. 6, 아니. 1998년 8월 4일, pp. 362-373.

\[ESP\] Kent, S. 및 R. Atkinson, "IP ESP\(보안 페이로드 캡슐화\)", RFC 2406, 1998년 11월.

\[FRELAY\] ANSI T1S1, "프레임 의존의 DSSI 핵심 측면", 1990년 3월.

```text
   [RFC791]    Postel, J., Editor, "Internet Protocol", STD 5, RFC 791,
               September 1981.
```

\[RFC1349\] Almquist, P., "인터넷 프로토콜 제품군의 서비스 유형", RFC 1349, 1992년 7월.

\[RFC1633\] Braden, R., Clark, D. 및 S. Shenker, "인터넷 아키텍처의 통합 서비스: 개요", RFC 1633, 1994년 7월.

\[RFC1812\] Baker, F., 편집자, "IP 버전 4 라우터에 대한 요구 사항", RFC 1812, 1995년 6월.

\[RSVP\] Braden, B., Zhang, L., Berson S., Herzog, S. 및 S. Jamin, "RSVP\(자원 예약 프로토콜\) - 버전 1 기능 사양", RFC 2205, 1997년 9월.

\[2BIT\] K. Nichols, V. Jacobson 및 L. Zhang, "인터넷을 위한 2비트 차별화된 서비스 아키텍처", ftp://ftp.ee.lbl.gov/papers/dsarch.pdf, 1997년 11월.

\[TR\] ISO/IEC 8802-5 정보 기술 -

- 시스템 간 통신 및 정보 교환 - 근거리 및 수도권 네트워크 - 공통 사양 - 5부: 토큰 링 액세스 방법 및 물리 계층 사양\(또한 ANSI/IEEE Std 802.5-1995\), 1995.

---
# **Authors' Addresses**

```text
   Steven Blake
   Torrent Networking Technologies
   3000 Aerial Center, Suite 140
   Morrisville, NC  27560

   Phone:  +1-919-468-8466 x232
   EMail: slblake@torrentnet.com

   David L. Black
   EMC Corporation
   35 Parkwood Drive
   Hopkinton, MA  01748

   Phone:  +1-508-435-1000 x76140
   EMail: black_david@emc.com

   Mark A. Carlson
   Sun Microsystems, Inc.
   2990 Center Green Court South
   Boulder, CO  80301

   Phone:  +1-303-448-0048 x115
   EMail: mark.carlson@sun.com

   Elwyn Davies
   Nortel UK
   London Road
   Harlow, Essex  CM17 9NA, UK

   Phone:  +44-1279-405498
   EMail: elwynd@nortel.co.uk

   Zheng Wang
   Bell Labs Lucent Technologies
   101 Crawfords Corner Road
   Holmdel, NJ  07733

   EMail: zhwang@bell-labs.com

   Walter Weiss
   Lucent Technologies
   300 Baker Avenue, Suite 100
   Concord, MA  01742-2168

   EMail: wweiss@lucent.com
```

---
# **Full Copyright Statement**

Copyright \(C\) The Internet Society \(1998\). 판권 소유.

이 문서와 그 번역본은 복사되어 타인에게 제공될 수 있으며, 이에 대해 설명하거나 설명하거나 구현을 지원하는 파생물은 어떤 종류의 제한 없이 전체적으로 또는 부분적으로 준비, 복사, 출판 및 배포될 수 있습니다. , 단, 위의 저작권 표시와 이 단락은 그러한 모든 사본 및 파생물에 포함됩니다. 그러나 이 문서 자체는 인터넷 표준 개발 목적으로 필요한 경우를 제외하고는 저작권 표시를 제거하거나 Internet Society 또는 기타 인터넷 조직에 대한 참조를 제거하는 등 어떤 식으로든 수정할 수 없습니다. 인터넷 표준 프로세스를 따르거나 영어 이외의 언어로 번역하는 데 필요한 대로 따라야 합니다.

위에서 부여된 제한된 권한은 영구적이며 Internet Society 또는 그 승계자 또는 양수인에 의해 취소되지 않습니다.

이 문서와 여기에 포함된 정보는 "있는 그대로" 제공되며 인터넷 사회 및 인터넷 공학 태스크포스는 여기에 포함된 정보의 사용이 상품성 또는 특정 목적에의 적합성에 대한 권리 또는 묵시적 보증을 침해하는 행위.
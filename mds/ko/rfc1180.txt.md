

```text
Network Working Group                                      T. Socolofsky
Request for Comments:  1180                                      C. Kale
                                                  Spider Systems Limited
                                                            January 1991
```

- TCP/IP 튜토리얼

---
# **Status of this Memo**

이 RFC는 TCP/IP 프로토콜 모음에 대한 자습서로, 특히 라우터를 통해 소스 호스트에서 대상 호스트로 IP 데이터그램을 전달하는 단계에 중점을 둡니다. 인터넷 표준을 지정하지 않습니다. 이 메모의 배포는 무제한입니다.

---
# **Table of Contents**

```text
    1.  Introduction................................................   1
    2.  TCP/IP Overview.............................................   2
    3.  Ethernet....................................................   8
    4.  ARP.........................................................   9
    5.  Internet Protocol...........................................  12
    6.  User Datagram Protocol......................................  22
    7.  Transmission Control Protocol...............................  24
    8.  Network Applications........................................  25
    9.  Other Information...........................................  27
   10.  References..................................................  27
   11.  Relation to other RFCs......................................  27
   12.  Security Considerations.....................................  27
   13.  Authors' Addresses..........................................  28
```

---
## **1.  Introduction**

이 튜토리얼에는 TCP/IP의 중요한 점에 대한 단 하나의 보기만 포함되어 있으므로 TCP/IP 기술의 "기본"입니다. ISO OSI와 비교하여 개발 및 자금 조달의 역사, 사용에 대한 비즈니스 사례 및 미래를 생략합니다. 실제로 기술적인 내용도 상당 부분 생략됐다. 남은 것은 TCP/IP 환경에서 작업하는 전문가가 이해해야 하는 최소한의 정보입니다. 이러한 전문가에는 시스템 관리자, 시스템 프로그래머 및 네트워크 관리자가 포함됩니다.

이 튜토리얼에서는 UNIX TCP/IP 환경의 예제를 사용하지만 주요 사항은 모든 TCP/IP 구현에 적용됩니다.

이 메모의 목적은 정의가 아니라 설명입니다. 프로토콜의 올바른 사양에 대해 질문이 있는 경우 RFC를 정의하는 실제 표준을 참조하세요.

다음 섹션은 TCP/IP의 개요이며, 이어서 개별 구성 요소에 대한 자세한 설명이 이어집니다.

---
## **2.  TCP/IP Overview**

"TCP/IP"라는 일반 용어는 일반적으로 TCP 및 IP의 특정 프로토콜과 관련된 모든 것을 의미합니다. 여기에는 다른 프로토콜, 애플리케이션, 심지어 네트워크 매체도 포함될 수 있습니다. 이러한 프로토콜의 샘플은 UDP, ARP 및 ICMP입니다. 이러한 애플리케이션의 샘플은 TELNET, FTP 및 rcp입니다. 보다 정확한 용어는 "인터넷 기술"입니다. 인터넷 기술을 사용하는 네트워크를 "인터넷"이라고 합니다.

---
## **2.1  Basic Structure**

이 기술을 이해하려면 먼저 다음 논리 구조를 이해해야 합니다.

```text
                     ----------------------------
                     |    network applications  |
                     |                          |
                     |...  \ | /  ..  \ | /  ...|
                     |     -----      -----     |
                     |     |TCP|      |UDP|     |
                     |     -----      -----     |
                     |         \      /         |
                     |         --------         |
                     |         |  IP  |         |
                     |  -----  -*------         |
                     |  |ARP|   |               |
                     |  -----   |               |
                     |      \   |               |
                     |      ------              |
                     |      |ENET|              |
                     |      ---@--              |
                     ----------|-----------------
                               |
         ----------------------o---------
             Ethernet Cable

                  Figure 1.  Basic TCP/IP Network Node
```

이는 인터넷상의 컴퓨터 내부에 있는 계층화된 프로토콜의 논리적 구조입니다. 인터넷 기술을 사용하여 통신할 수 있는 각 컴퓨터는 이러한 논리적 구조를 가지고 있습니다. 인터넷에서 컴퓨터의 동작을 결정하는 것은 바로 이 논리적 구조입니다. 상자는 컴퓨터를 통과하는 데이터의 처리를 나타내며, 상자를 연결하는 선은 데이터의 경로를 나타냅니다.

데이터. 하단의 수평선은 이더넷 케이블을 나타냅니다. "o"는 트랜시버입니다. "\*"는 IP 주소이고 "@"은 이더넷 주소입니다. 이러한 논리적 구조를 이해하는 것은 인터넷 기술을 이해하는 데 필수적입니다. 이 튜토리얼 전체에서 언급됩니다.

---
## **2.2  Terminology**

인터넷을 통해 흐르는 데이터 단위의 이름은 프로토콜 스택의 위치에 따라 달라집니다. 요약하자면, 이더넷에 있는 경우 이더넷 프레임이라고 합니다. 이더넷 드라이버와 IP 모듈 사이에 있으면 IP 패킷이라고 합니다. IP 모듈과 UDP 모듈 사이에 있으면 UDP 데이터그램이라고 합니다. IP 모듈과 TCP 모듈 사이에 있으면 TCP 세그먼트\(더 일반적으로는 전송 메시지\)라고 합니다. 네트워크 애플리케이션에 있는 경우 이를 애플리케이션 메시지라고 합니다.

이러한 정의는 불완전합니다. 실제 정의는 출판물마다 다릅니다. 보다 구체적인 정의는 RFC 1122, 섹션 1.3.3에서 찾을 수 있습니다.

드라이버는 네트워크 인터페이스 하드웨어와 직접 통신하는 소프트웨어입니다. 모듈은 드라이버, 네트워크 애플리케이션 또는 다른 모듈과 통신하는 소프트웨어입니다.

드라이버, 모듈, 이더넷 프레임, IP 패킷, UDP 데이터그램, TCP 메시지 및 애플리케이션 메시지라는 용어는 이 튜토리얼 전체에서 적절한 경우에 사용됩니다.

---
## **2.3  Flow of Data**

그림 1에 표시된 프로토콜 스택을 통해 아래로 흐르는 데이터를 따라가겠습니다. TCP\(전송 제어 프로토콜\)를 사용하는 애플리케이션의 경우 데이터는 애플리케이션과 TCP 모듈 간에 전달됩니다. UDP\(사용자 데이터그램 프로토콜\)를 사용하는 애플리케이션의 경우 데이터는 애플리케이션과 UDP 모듈 간에 전달됩니다. FTP\(파일 전송 프로토콜\)는 TCP를 사용하는 일반적인 응용 프로그램입니다. 이 예의 프로토콜 스택은 FTP/TCP/IP/ENET입니다. SNMP\(Simple Network Management Protocol\)는 UDP를 사용하는 애플리케이션입니다. 이 예의 프로토콜 스택은 SNMP/UDP/IP/ENET입니다.

TCP 모듈, UDP 모듈 및 이더넷 드라이버는 n 대 1 멀티플렉서입니다. 멀티플렉서로서 많은 입력을 하나의 출력으로 전환합니다. 또한 1:n 디멀티플렉서이기도 합니다. 디멀티플렉서로서 프로토콜 헤더의 유형 필드에 따라 하나의 입력을 여러 출력으로 전환합니다.

```text
         1   2 3 ...   n                   1   2 3 ...   n
          \  |      /      |               \  | |      /       ^
           \ | |   /       |                \ | |     /        |
         -------------   flow              ----------------   flow
         |multiplexer|    of               |de-multiplexer|    of
         -------------   data              ----------------   data
              |            |                     |              |
              |            v                     |              |
              1                                  1

        Figure 2.  n-to-1 multiplexer and 1-to-n de-multiplexer
```

이더넷 프레임이 네트워크 외부의 이더넷 드라이버에 나타나면 패킷은 ARP\(주소 확인 프로토콜\) 모듈이나 IP\(인터넷 프로토콜\) 모듈로 위쪽으로 전달될 수 있습니다. 이더넷 프레임의 유형 필드 값은 이더넷 프레임이 ARP 또는 IP 모듈로 전달되는지 여부를 결정합니다.

IP 패킷이 IP로 들어오면 데이터 단위는 IP 헤더의 프로토콜 필드 값에 따라 결정된 대로 TCP 또는 UDP로 위쪽으로 전달됩니다.

UDP 데이터그램이 UDP로 나타나면 애플리케이션 메시지는 UDP 헤더의 포트 필드 값을 기반으로 네트워크 애플리케이션으로 위쪽으로 전달됩니다. TCP 메시지가 TCP로 들어오면 애플리케이션 메시지는 TCP 헤더의 포트 필드 값을 기반으로 네트워크 애플리케이션으로 위쪽으로 전달됩니다.

하향 다중화는 각 시작점에서 단 하나의 하향 경로만 있기 때문에 수행하기가 간단합니다. 각 프로토콜 모듈은 패킷이 대상 컴퓨터에서 역다중화될 수 있도록 헤더 정보를 추가합니다.

TCP 또는 UDP를 통해 애플리케이션에서 전달되는 데이터는 IP 모듈에 수렴되고 하위 네트워크 인터페이스 드라이버를 통해 아래쪽으로 전송됩니다.

인터넷 기술은 다양한 네트워크 미디어를 지원하지만 이더넷은 IP에서 사용되는 가장 일반적인 물리적 네트워크이기 때문에 이 자습서의 모든 예에 사용됩니다. 그림 1의 컴퓨터에는 단일 이더넷 연결이 있습니다. 6바이트 이더넷 주소는 이더넷의 각 인터페이스마다 고유하며 이더넷 드라이버의 하위 인터페이스에 있습니다.

컴퓨터에는 4바이트 IP 주소도 있습니다. 이 주소는 IP 모듈의 하위 인터페이스에 있습니다. IP 주소는 인터넷에 대해 고유해야 합니다.

실행 중인 컴퓨터는 항상 자체 IP 주소와 이더넷 주소를 알고 있습니다.

---
## **2.4  Two Network Interfaces**

컴퓨터가 2개의 별도 이더넷에 연결된 경우 그림 3과 같습니다.

```text
                ----------------------------
                |    network applications  |
                |                          |
                |...  \ | /  ..  \ | /  ...|
                |     -----      -----     |
                |     |TCP|      |UDP|     |
                |     -----      -----     |
                |         \      /         |
                |         --------         |
                |         |  IP  |         |
                |  -----  -*----*-  -----  |
                |  |ARP|   |    |   |ARP|  |
                |  -----   |    |   -----  |
                |      \   |    |   /      |
                |      ------  ------      |
                |      |ENET|  |ENET|      |
                |      ---@--  ---@--      |
                ----------|-------|---------
                          |       |
                          |    ---o---------------------------
                          |             Ethernet Cable 2
           ---------------o----------
             Ethernet Cable 1

             Figure 3.  TCP/IP Network Node on 2 Ethernets
```

이 컴퓨터에는 이더넷 주소 2개와 IP 주소 2개가 있습니다.

이 구조를 보면 둘 이상의 물리적 네트워크 인터페이스가 있는 컴퓨터의 경우 IP 모듈이 n-to-m 멀티플렉서이자 m-to-n 디멀티플렉서라는 것을 알 수 있습니다.

```text
         1   2 3 ...   n                   1   2 3 ...   n
          \  | |      /    |                \  | |      /       ^
           \ | |     /     |                 \ | |     /        |
         -------------   flow              ----------------   flow
         |multiplexer|    of               |de-multiplexer|    of
         -------------   data              ----------------   data
           / | |     \     |                 / | |     \        |
          /  | |      \    v                /  | |      \       |
         1   2 3 ...   m                   1   2 3 ...   m

        Figure 4.  n-to-m multiplexer and m-to-n de-multiplexer
```

들어오고 나가는 데이터를 수용하기 위해 양방향으로 이러한 다중화를 수행합니다. 2개 이상의 네트워크 인터페이스가 있는 IP 모듈은 데이터를 다음 네트워크로 전달할 수 있다는 점에서 원래 예보다 더 복잡합니다. 데이터는 모든 네트워크 인터페이스에 도착할 수 있으며 다른 인터페이스로 전송될 수 있습니다.

```text
                           TCP      UDP
                             \      /
                              \    /
                          --------------
                          |     IP     |
                          |            |
                          |    ---     |
                          |   /   \    |
                          |  /     v   |
                          --------------
                           /         \
                          /           \
                       data           data
                      comes in         goes out
                     here               here
```

- 그림 5. IP 패킷을 IP 포워딩하는 예

IP 패킷을 다른 네트워크로 보내는 프로세스를 IP 패킷 "전달"이라고 합니다. IP 패킷 전달 작업을 전담하는 컴퓨터를 "IP 라우터"라고 합니다.

그림에서 볼 수 있듯이 전달된 IP 패킷은 IP 라우터의 TCP 및 UDP 모듈에 절대로 닿지 않습니다. 일부 IP 라우터 구현에는 TCP 또는 UDP 모듈이 없습니다.

---
## **2.5  IP Creates a Single Logical Network**

IP 모듈은 인터넷 기술 성공의 핵심입니다. 각 모듈이나 드라이버는 메시지가 전달될 때 메시지에 헤더를 추가합니다.

프로토콜 스택을 통해 아래로 내려갑니다. 메시지가 애플리케이션을 향해 프로토콜 스택 위로 올라갈 때 각 모듈이나 드라이버는 메시지에서 해당 헤더를 제거합니다. IP 헤더에는 여러 물리적 네트워크에서 단일 논리적 네트워크를 구축하는 IP 주소가 포함되어 있습니다. 이러한 물리적 네트워크의 상호 연결이 인터넷이라는 이름의 원천입니다. IP 패킷의 범위를 제한하는 상호 연결된 물리적 네트워크 집합을 "인터넷"이라고 합니다.

---
## **2.6  Physical Network Independence**

IP는 네트워크 애플리케이션에서 기본 네트워크 하드웨어를 숨깁니다. 새로운 물리적 네트워크를 개발했다면 IP 아래 인터넷에 연결되는 새로운 드라이버를 구현하여 이를 서비스에 투입할 수 있습니다. 따라서 네트워크 애플리케이션은 그대로 유지되며 하드웨어 기술 변화에 취약하지 않습니다.

---
## **2.7  Interoperability**

인터넷상의 두 컴퓨터가 통신할 수 있으면 "상호 운용"된다고 합니다. 인터넷 기술의 구현이 좋다면 "상호 운용성"이 있다고 합니다. 범용 컴퓨터 사용자는 시중에 나와 있는 컴퓨터의 상호 운용성으로 인해 인터넷을 설치함으로써 이점을 누릴 수 있습니다. 일반적으로 컴퓨터를 구입하면 상호 운용됩니다. 컴퓨터에 상호 운용성이 없고 상호 운용성을 추가할 수 없다면 시장에서 드물고 특별한 틈새 시장을 차지하게 됩니다.

---
## **2.8  After the Overview**

배경이 설정되면 다음 질문에 답할 수 있습니다.

IP 패킷을 보낼 때 대상 이더넷 주소는 어떻게 결정됩니까?

IP는 IP 패킷을 보낼 때 사용할 여러 하위 네트워크 인터페이스를 어떻게 알 수 있습니까?

한 컴퓨터의 클라이언트가 다른 컴퓨터의 서버에 어떻게 연결합니까?

TCP와 UDP 중 하나만 존재하는 이유는 무엇입니까?

어떤 네트워크 애플리케이션을 사용할 수 있나요?

이에 대해서는 이더넷을 다시 살펴본 후에 차례로 설명하겠습니다.

---
## **3.  Ethernet**

이 섹션은 이더넷 기술에 대한 간략한 검토입니다.

이더넷 프레임에는 대상 주소, 소스 주소, 유형 필드 및 데이터가 포함됩니다.

이더넷 주소는 6바이트입니다. 모든 장치에는 고유한 이더넷 주소가 있으며 해당 대상 주소가 있는 이더넷 프레임을 수신합니다. 또한 모든 장치는 "브로드캐스트" 주소라고 하는 와일드카드 대상 주소 "FF-FF-FF-FF-FF-FF"\(16진수\)를 사용하여 이더넷 프레임을 수신합니다.

이더넷은 CSMA/CD\(충돌 감지를 통한 캐리어 감지 및 다중 액세스\)를 사용합니다. CSMA/CD는 모든 장치가 단일 매체에서 통신하고, 한 번에 하나만 전송할 수 있으며, 모두 동시에 수신할 수 있음을 의미합니다. 2개의 장치가 동시에 전송을 시도하면 전송 충돌이 감지되고 두 장치 모두 다시 전송을 시도하기 전에 임의의\(그러나 짧은\) 기간 동안 기다립니다.

---
## **3.1  A Human Analogy**

이더넷 기술에 대한 좋은 비유는 작고 완전히 어두운 방에서 사람들이 이야기하는 그룹입니다. 이 비유에서 물리적 네트워크 매체는 동축 케이블의 전기 신호 대신 실내 공기에 전달되는 음파입니다.

각 사람은 다른 사람이 말할 때 그 말을 들을 수 있습니다\(Carrier Sense\). 방에 있는 모든 사람은 동등한 대화 능력\(다중 접속\)을 가지고 있지만, 예의바르기 때문에 누구도 긴 연설을 하지 않습니다. 어떤 사람이 무례하게 행동하면 그 사람은 방에서 나가라는 요청을 받습니다\(즉, 그물 밖으로 던져집니다\).

다른 사람이 말하는 동안 아무도 말하지 않습니다. 하지만 두 사람이 동시에 말하기 시작하면, 각자는 말하지 않은 내용을 듣기 때문에 이를 알게 됩니다\(충돌 감지\). 이 두 사람이 이 상황을 알아채고 잠시 기다리다가 한 사람이 이야기를 시작합니다. 다른 사람은 말하는 것을 듣고 자신의 연설을 시작하기 전에 첫 번째 사람이 끝날 때까지 기다립니다.

혼동을 피하기 위해 각 사람은 고유한 이름\(고유한 이더넷 주소\)을 갖습니다. 그들 중 한 사람이 말할 때마다 그는 대화 상대의 이름과 자신의 이름\(각각 이더넷 대상 및 소스 주소\)을 메시지 앞에 붙입니다. 예: "안녕하세요 제인, 저는 Jack입니다. ..blah blah" 어쩌구...". 발신자가 모든 사람과 대화하고 싶다면 "모두"\(방송 주소\)라고 말할 수 있습니다. 즉, "안녕하세요 여러분, 저는 Jack입니다. ..blah blah blah..."라고 말할 수 있습니다.

---
## **4.  ARP**

IP 패킷을 보낼 때 대상 이더넷 주소는 어떻게 결정됩니까?

ARP\(주소 확인 프로토콜\)는 IP 주소를 이더넷 주소로 변환하는 데 사용됩니다. IP 헤더와 이더넷 헤더가 생성될 때 전송되는 IP 패킷에 대해서만 변환이 수행됩니다.

---
## **4.1  ARP Table for Address Translation**

번역은 테이블 조회를 통해 수행됩니다. ARP 테이블이라고 하는 테이블은 메모리에 저장되며 각 컴퓨터에 대한 행을 포함합니다. IP 주소 열과 이더넷 주소 열이 있습니다. IP 주소를 이더넷 주소로 변환할 때 테이블에서 일치하는 IP 주소를 검색합니다. 다음은 단순화된 ARP 테이블입니다.

```text
                  ------------------------------------
                  |IP address       Ethernet address |
                  ------------------------------------
                  |223.1.2.1        08-00-39-00-2F-C3|
                  |223.1.2.3        08-00-5A-21-A7-22|
                  |223.1.2.4        08-00-10-99-AC-54|
                  ------------------------------------
                      TABLE 1.  Example ARP Table
```

4바이트 IP 주소를 작성할 때 인간의 관례는 각 바이트를 10진수로 하고 바이트를 마침표로 구분하는 것입니다. 6바이트 이더넷 주소를 쓸 때 규칙은 각 바이트가 16진수이고 바이트를 빼기 기호나 콜론으로 구분하는 것입니다.

IP 주소와 이더넷 주소는 독립적으로 선택되므로 ARP 테이블이 필요합니다. IP 주소를 이더넷 주소로 변환하는 알고리즘을 사용할 수 없습니다. IP 주소는 인터넷상의 컴퓨터 위치를 기반으로 네트워크 관리자가 선택합니다. 컴퓨터를 인터넷의 다른 부분으로 이동한 경우 IP 주소를 변경해야 합니다. 이더넷 주소는 제조업체가 라이센스한 이더넷 주소 공간을 기반으로 제조업체가 선택합니다. 이더넷 하드웨어 인터페이스 보드가 변경되면 이더넷 주소도 변경됩니다.

---
## **4.2  Typical Translation Scenario**

정상적인 작동 중에 TELNET과 같은 네트워크 애플리케이션은 애플리케이션 메시지를 TCP로 보낸 다음 TCP는 해당 TCP 메시지를 IP 모듈로 보냅니다. 대상 IP 주소는

애플리케이션, TCP 모듈, IP 모듈입니다. 이 시점에서 IP 패킷이 구성되어 이더넷 드라이버에 제공할 준비가 되었습니다. 하지만 먼저 대상 이더넷 주소를 결정해야 합니다.

ARP 테이블은 대상 이더넷 주소를 조회하는 데 사용됩니다.

```text
   4.3  ARP Request/Response Pair
```

하지만 처음에 ARP 테이블은 어떻게 채워지나요? 대답은 "필요에 따라" ARP에 의해 자동으로 채워진다는 것입니다.

ARP 테이블을 사용하여 주소를 변환할 수 없으면 두 가지 일이 발생합니다.

1. 브로드캐스트 이더넷 주소가 포함된 ARP 요청 패킷이 네트워크를 통해 모든 컴퓨터로 전송됩니다.

2. 나가는 IP 패킷이 대기열에 추가됩니다.

모든 컴퓨터의 이더넷 인터페이스는 브로드캐스트 이더넷 프레임을 수신합니다. 각 이더넷 드라이버는 이더넷 프레임의 유형 필드를 검사하고 ARP 패킷을 ARP 모듈에 전달합니다. ARP 요청 패킷에는 "귀하의 IP 주소가 이 대상 IP 주소와 일치하는 경우 이더넷 주소를 알려주십시오"라고 표시됩니다. ARP 요청 패킷은 다음과 같습니다.

```text
                ---------------------------------------
                |Sender IP Address   223.1.2.1        |
                |Sender Enet Address 08-00-39-00-2F-C3|
                ---------------------------------------
                |Target IP Address   223.1.2.2        |
                |Target Enet Address <blank>          |
                ---------------------------------------
                     TABLE 2.  Example ARP Request
```

각 ARP 모듈은 IP 주소를 검사하고 대상 IP 주소가 자체 IP 주소와 일치하면 소스 이더넷 주소로 직접 응답을 보냅니다. ARP 응답 패킷에는 "예, 그 대상 IP 주소는 내 것입니다. 내 이더넷 주소를 알려드리겠습니다."라고 말합니다. ARP 응답 패킷에는 요청과 비교하여 발신자/대상 필드 내용이 교환됩니다. 다음과 같이 보입니다.

```text
                ---------------------------------------
                |Sender IP Address   223.1.2.2        |
                |Sender Enet Address 08-00-28-00-38-A9|
                ---------------------------------------
                |Target IP Address   223.1.2.1        |
                |Target Enet Address 08-00-39-00-2F-C3|
                ---------------------------------------
                     TABLE 3.  Example ARP Response
```

응답은 원래 보낸 컴퓨터에서 수신됩니다. 이더넷 드라이버는 이더넷 프레임의 유형 필드를 살펴본 다음 ARP 패킷을 ARP 모듈에 전달합니다. ARP 모듈은 ARP 패킷을 검사하고 보낸 사람의 IP 및 이더넷 주소를 ARP 테이블에 추가합니다.

이제 업데이트된 테이블은 다음과 같습니다.

```text
                   ----------------------------------
                   |IP address     Ethernet address |
                   ----------------------------------
                   |223.1.2.1      08-00-39-00-2F-C3|
                   |223.1.2.2      08-00-28-00-38-A9|
                   |223.1.2.3      08-00-5A-21-A7-22|
                   |223.1.2.4      08-00-10-99-AC-54|
                   ----------------------------------
                   TABLE 4.  ARP Table after Response
```

---
## **4.4  Scenario Continued**

이제 새로운 번역이 필요한 지 몇 밀리초 만에 테이블에 자동으로 설치되었습니다. 위의 2단계에서 기억한 것처럼 나가는 IP 패킷이 대기열에 추가되었습니다. 다음으로, ARP 테이블을 조회하여 IP 주소를 이더넷 주소로 변환한 다음 이더넷 프레임을 이더넷으로 전송합니다. 따라서 새로운 3, 4, 5단계를 사용하면 보낸 사람 컴퓨터에 대한 시나리오는 다음과 같습니다.

1. 브로드캐스트 이더넷 주소가 포함된 ARP 요청 패킷이 네트워크를 통해 모든 컴퓨터로 전송됩니다.

2. 나가는 IP 패킷이 대기열에 추가됩니다.

3. ARP 테이블에 대한 IP-이더넷 주소 변환과 함께 ARP 응답이 도착합니다.

4. 대기 중인 IP 패킷의 경우 ARP 테이블을 사용하여 IP 주소를 이더넷 주소로 변환합니다.

5. 이더넷 프레임은 이더넷을 통해 전송됩니다.

요약하자면, ARP 테이블에서 변환이 누락되면 하나의 IP 패킷이 대기됩니다. 변환 데이터는 ARP 요청/응답으로 빠르게 채워지고 대기 중인 IP 패킷이 전송됩니다.

각 컴퓨터에는 각 이더넷 인터페이스에 대한 별도의 ARP 테이블이 있습니다. 대상 컴퓨터가 없으면 ARP 응답이 없으며 ARP 테이블에 항목도 없습니다. IP는 해당 주소로 전송된 나가는 IP 패킷을 삭제합니다. 상위 계층 프로토콜은 손상된 이더넷과 대상 IP 주소를 가진 컴퓨터가 없는 것의 차이를 구분할 수 없습니다.

IP 및 ARP의 일부 구현에서는 ARP 응답을 기다리는 동안 IP 패킷을 대기열에 추가하지 않습니다. 대신 IP 패킷은 폐기되고 IP 패킷 손실 복구는 TCP 모듈이나 UDP 네트워크 애플리케이션에 맡겨집니다. 이 복구는 시간 초과 및 재전송을 통해 수행됩니다. 재전송된 메시지는 메시지의 첫 번째 복사본으로 인해 이미 ARP 테이블이 채워졌기 때문에 네트워크로 성공적으로 전송되었습니다.

---
## **5.  Internet Protocol**

IP 모듈은 인터넷 기술의 핵심이며 IP의 본질은 라우팅 테이블입니다. IP는 이 메모리 내 테이블을 사용하여 IP 패킷 라우팅에 대한 모든 결정을 내립니다. 경로 테이블의 내용은 네트워크 관리자가 정의합니다. 실수로 인해 의사소통이 차단됩니다.

라우팅 테이블이 사용되는 방식을 이해하려면 인터네트워킹을 이해해야 합니다. IP 네트워크를 성공적으로 관리하고 유지하려면 이러한 이해가 필요합니다.

라우팅 테이블은 먼저 라우팅 개요를 살펴본 다음 IP 네트워크 주소에 대해 알아보고 세부 사항을 살펴보면 가장 잘 이해됩니다.

---
## **5.1  Direct Routing**

아래 그림은 3대의 컴퓨터\(A, B, C\)로 구성된 작은 인터넷입니다. 각 컴퓨터에는 그림 1과 동일한 TCP/IP 프로토콜 스택이 있습니다. 각 컴퓨터의 이더넷 인터페이스에는 자체 이더넷 주소가 있습니다. 각 컴퓨터에는 네트워크 관리자가 IP 인터페이스에 할당한 IP 주소가 있으며, 네트워크 관리자는 이더넷에도 IP 네트워크 번호를 할당했습니다.

```text
                          A      B      C
                          |      |      |
                        --o------o------o--
                        Ethernet 1
                        IP network "development"

                       Figure 6.  One IP Network
```

A가 B에게 IP 패킷을 보낼 때 IP 헤더에는 소스 IP 주소로 A의 IP 주소가 포함되고, 이더넷 헤더에는 소스 이더넷 주소로 A의 이더넷 주소가 포함됩니다. 또한 IP 헤더에는 대상 IP 주소로 B의 IP 주소가 포함되어 있고 이더넷 헤더에는 대상 이더넷 주소로 B의 이더넷 주소가 포함되어 있습니다.

```text
                ----------------------------------------
                |address            source  destination|
                ----------------------------------------
                |IP header          A       B          |
                |Ethernet header    A       B          |
                ----------------------------------------
       TABLE 5.  Addresses in an Ethernet frame for an IP packet
                              from A to B
```

이 간단한 경우에는 IP가 이더넷이 제공하는 서비스에 거의 추가되지 않기 때문에 IP는 오버헤드입니다. 그러나 IP에는 비용이 추가됩니다. 즉, IP 헤더를 생성, 전송 및 구문 분석하기 위한 추가 CPU 처리 및 네트워크 대역폭이 필요합니다.

B의 IP 모듈이 A로부터 IP 패킷을 수신하면 대상 IP 주소를 자체 IP 주소와 비교하여 일치하는 항목을 찾은 다음 데이터그램을 상위 레벨 프로토콜로 전달합니다.

A와 B 간의 이러한 통신은 직접 라우팅을 사용합니다.

---
## **5.2  Indirect Routing**

아래 그림은 인터넷을 좀 더 현실적으로 표현한 것입니다. 이는 컴퓨터 D라는 IP 라우터로 연결된 3개의 이더넷과 3개의 IP 네트워크로 구성됩니다. 각 IP 네트워크에는 4개의 컴퓨터가 있습니다. 각 컴퓨터에는 고유한 IP 주소와 이더넷 주소가 있습니다.

```text
          A      B      C      ----D----      E      F      G
          |      |      |      |   |   |      |      |      |
        --o------o------o------o-  |  -o------o------o------o--
        Ethernet 1                 |  Ethernet 2
        IP network "development"   |  IP network "accounting"
                                   |
                                   |
                                   |     H      I      J
                                   |     |      |      |
                                 --o-----o------o------o--
                                  Ethernet 3
                                  IP network "factory"

               Figure 7.  Three IP Networks; One internet
```

컴퓨터 D를 제외하고 각 컴퓨터에는 그림 1과 같은 TCP/IP 프로토콜 스택이 있습니다. 컴퓨터 D는 IP 라우터입니다. 이는 3개의 네트워크 모두에 연결되어 있으므로 3개의 IP 주소와 3개의 이더넷 주소를 갖습니다. 컴퓨터 D에는 2개가 아닌 3개의 ARP 모듈과 3개의 이더넷 드라이버가 있다는 점을 제외하면 그림 3과 유사한 TCP/IP 프로토콜 스택이 있습니다. 컴퓨터 D에는 IP 모듈이 하나만 있다는 점에 유의하십시오.

네트워크 관리자는 각 이더넷에 IP 네트워크 번호라는 고유한 번호를 할당했습니다. 이 다이어그램에는 IP 네트워크 번호가 표시되지 않고 네트워크 이름만 표시됩니다.

컴퓨터 A가 컴퓨터 B로 IP 패킷을 보내는 경우 프로세스는 위의 단일 네트워크 예와 동일합니다. 단일 IP 네트워크에 있는 컴퓨터 간의 모든 통신은 앞에서 설명한 직접 라우팅 예와 일치합니다.

컴퓨터 D와 A가 통신하는 것은 직접 통신입니다. 컴퓨터 D와 E가 통신하는 것은 직접 통신입니다. 컴퓨터 D와 H가 통신하는 것은 직접 통신입니다. 이는 각 컴퓨터 쌍이 동일한 IP 네트워크에 있기 때문입니다.

그러나 컴퓨터 A가 IP 라우터 반대편에 있는 컴퓨터와 통신할 때 통신은 더 이상 직접적이지 않습니다. A는 IP 패킷을 다음 IP 네트워크로 전달하기 위해 D를 사용해야 합니다. 이러한 통신을 "간접"이라고 합니다.

이러한 IP 패킷 라우팅은 IP 모듈에 의해 수행되며 TCP, UDP 및 네트워크 애플리케이션에 투명하게 발생합니다.

A가 E에게 IP 패킷을 보내는 경우 소스 IP 주소와 소스 이더넷 주소는 A의 것입니다. 대상 IP 주소는 E이지만 A의 IP 모듈이 전달을 위해 IP 패킷을 D로 전송하므로 대상 이더넷 주소는 D입니다.

```text
                ----------------------------------------
                |address            source  destination|
                ----------------------------------------
                |IP header          A       E          |
                |Ethernet header    A       D          |
                ----------------------------------------
       TABLE 6.  Addresses in an Ethernet frame for an IP packet
                         from A to E (before D)
```

D의 IP 모듈은 IP 패킷을 수신하고 목적지 IP 주소를 확인하자 "이것은 내 IP 주소가 아니다"라고 말하고 E에게 직접 IP 패킷을 보낸다.

```text
                ----------------------------------------
                |address            source  destination|
                ----------------------------------------
                |IP header          A       E          |
                |Ethernet header    D       E          |
                ----------------------------------------
       TABLE 7.  Addresses in an Ethernet frame for an IP packet
                         from A to E (after D)
```

요약하면, 직접 통신의 경우 소스 IP 주소와 소스 이더넷 주소는 모두 송신자의 것이며 대상 IP 주소와 대상 이더넷 주소는 수신자의 것입니다. 간접 통신의 경우 IP 주소와 이더넷 주소는 이러한 방식으로 쌍을 이루지 않습니다.

이 예제 인터넷은 매우 간단한 것입니다. 실제 네트워크는 여러 요인으로 인해 복잡해지는 경우가 많으며, 이로 인해 여러 IP 라우터와 여러 유형의 물리적 네트워크가 발생합니다. 이 예시 인터넷은 네트워크 관리자가 이더넷 브로드캐스트 트래픽을 지역화하기 위해 대규모 이더넷을 분할하기를 원했기 때문에 탄생했을 수 있습니다.

---
## **5.3  IP Module Routing Rules**

라우팅에 대한 이 개요에서는 어떤 일이 발생하는지 보여주지만 어떻게 발생하는지는 보여주지 않습니다. 이제 IP 모듈에서 사용되는 규칙 또는 알고리즘을 살펴보겠습니다.

나가는 IP 패킷의 경우 상위 계층에서 IP를 입력하는 경우 IP는 IP 패킷을 직접 보낼지 간접적으로 보낼지 결정해야 하며 IP는 하위 네트워크 인터페이스를 선택해야 합니다. 이러한 선택은 경로 테이블을 참조하여 이루어집니다.

```text
     For an incoming IP packet, entering IP from a lower interface, IP
     must decide whether to forward the IP packet or pass it to an upper
     layer.  If the IP packet is being forwarded, it is treated as an

     outgoing IP packet.
```

들어오는 IP 패킷이 도착하면 동일한 네트워크 인터페이스를 통해 다시 전달되지 않습니다.

이러한 결정은 IP 패킷이 하위 인터페이스로 전달되기 전과 ARP 테이블을 참조하기 전에 이루어집니다.

---
## **5.4  IP Address**

네트워크 관리자는 컴퓨터가 연결된 IP 네트워크에 따라 컴퓨터에 IP 주소를 할당합니다. 4바이트 IP 주소의 한 부분은 IP 네트워크 번호이고, 다른 부분은 IP 컴퓨터 번호\(또는 호스트 번호\)입니다. IP 주소가 223.1.2.1인 표 1의 컴퓨터의 경우 네트워크 번호는 223.1.2이고 호스트 번호는 1입니다.

네트워크 번호와 호스트 번호에 사용되는 주소 부분은 4바이트 주소의 상위 비트로 정의됩니다. 이 자습서의 모든 예제 IP 주소는 클래스 C 유형입니다. 즉, 상위 3비트는 21비트가 네트워크 번호이고 8비트가 호스트 번호임을 나타냅니다. 이는 2,097,152개의 클래스 C 네트워크를 각 네트워크에 최대 254개의 호스트로 허용합니다.

IP 주소 공간은 NIC\(Network Information Center\)에 의해 관리됩니다. 단일 월드와이드 인터넷에 연결된 모든 인터넷은 NIC에서 할당한 네트워크 번호를 사용해야 합니다. 자신만의 인터넷을 설정하고 인터넷에 연결하지 않으려는 경우에도 NIC에서 네트워크 번호를 얻어야 합니다. 자신의 번호를 선택하면 인터넷이 다른 인터넷에 연결될 경우 혼란과 혼돈이 발생할 위험이 있습니다.

---
## **5.5  Names**

사람들은 컴퓨터를 번호가 아닌 이름으로 지칭합니다. alpha라는 컴퓨터의 IP 주소는 223.1.2.1일 수 있습니다. 소규모 네트워크의 경우 이 이름-주소 변환 데이터는 각 컴퓨터의 "hosts" 파일에 보관되는 경우가 많습니다. 대규모 네트워크의 경우 이 번역 데이터 파일은 서버에 저장되며 필요할 때 네트워크를 통해 액세스됩니다. 해당 파일의 몇 줄은 다음과 같습니다.

```text
   223.1.2.1     alpha
   223.1.2.2     beta
   223.1.2.3     gamma
   223.1.2.4     delta
   223.1.3.2     epsilon
   223.1.4.2     iota
```

IP 주소는 첫 번째 열이고 컴퓨터 이름은 두 번째 열입니다.

대부분의 경우 모든 컴퓨터에 동일한 "호스트" 파일을 설치할 수 있습니다. "delta"에는 3개의 IP 주소가 있더라도 이 파일에는 항목이 하나만 있는 것을 알 수 있습니다. Delta는 모든 IP 주소를 사용하여 접근할 수 있습니다. 어느 것이 사용되는지는 중요하지 않습니다. 델타는 IP 패킷을 수신하고 대상 주소를 보면 자체 IP 주소를 인식합니다.

IP 네트워크에도 이름이 지정됩니다. 3개의 IP 네트워크가 있는 경우 이러한 이름을 문서화하기 위한 "네트워크" 파일은 다음과 같습니다.

```text
   223.1.2     development
   223.1.3     accounting
   223.1.4     factory
```

IP 네트워크 번호는 첫 번째 열에 있고 해당 이름은 두 번째 열에 있습니다.

이 예에서 alpha는 개발 네트워크의 컴퓨터 번호 1이고, beta는 개발 네트워크의 컴퓨터 번호 2라는 것을 알 수 있습니다. 알파는 development.1, 베타는 development.2 등이라고 말할 수도 있습니다.

위의 호스트 파일은 사용자에게 적합하지만 네트워크 관리자는 아마도 델타 행을 다음으로 대체할 것입니다.

```text
   223.1.2.4     devnetrouter    delta
   223.1.3.1     facnetrouter
   223.1.4.1     accnetrouter
```

호스트 파일에 대한 이 세 개의 새로운 줄은 델타의 각 IP 주소에 의미 있는 이름을 제공합니다. 실제로 나열된 첫 번째 IP 주소에는 2개의 이름이 있습니다. "delta"와 "devnetrouter"는 동의어입니다. 실제로 "델타"는 컴퓨터의 범용 이름이고 나머지 3개 이름은 IP 경로 테이블을 관리할 때만 사용됩니다.

이러한 파일은 네트워크 관리 명령 및 네트워크 응용 프로그램에서 의미 있는 이름을 제공하는 데 사용됩니다. 인터넷 운영에 꼭 필요한 것은 아니지만 인터넷 운영을 더 쉽게 만들어줍니다.

---
## **5.6  IP Route Table**

IP는 IP 패킷을 보낼 때 사용할 하위 네트워크 인터페이스를 어떻게 알 수 있나요? IP는 IP 대상에서 추출한 IP 네트워크 번호의 검색키를 이용해 라우팅 테이블에서 조회합니다.

```text
   address.
```

경로 테이블에는 각 경로에 대해 하나의 행이 포함됩니다. 경로 테이블의 기본 열은 IP 네트워크 번호, 직접/간접 플래그, 라우터 IP 주소 및 인터페이스 번호입니다. 이 테이블은 나가는 각 IP 패킷에 대해 IP별로 참조됩니다.

대부분의 컴퓨터에서는 "route" 명령을 사용하여 경로 테이블을 수정할 수 있습니다. 네트워크 관리자가 컴퓨터에 IP 주소를 할당하므로 경로 테이블의 내용은 네트워크 관리자가 정의합니다.

---
## **5.7  Direct Routing Details**

어떻게 사용되는지 설명하기 위해 이전에 검토한 라우팅 상황을 자세히 살펴보겠습니다.

```text
                        ---------         ---------
                        | alpha |         | beta  |
                        |    1  |         |  1    |
                        ---------         ---------
                             |               |
                     --------o---------------o-
                      Ethernet 1
                      IP network "development"
```

- 그림 8. One IP 네트워크 확대 모습

알파 내부의 라우팅 테이블은 다음과 같습니다.

```text
     --------------------------------------------------------------
     |network      direct/indirect flag  router   interface number|
     --------------------------------------------------------------
     |development  direct                <blank>  1               |
     --------------------------------------------------------------
                  TABLE 8.  Example Simple Route Table
```

이 보기는 "netstat -r" 명령을 사용하여 일부 UNIX 시스템에서 볼 수 있습니다. 이 간단한 네트워크에서는 모든 컴퓨터가 동일한 라우팅 테이블을 갖습니다.

논의를 위해 네트워크 번호를 네트워크 이름으로 변환하지 않고 테이블을 다시 인쇄합니다.

```text
     --------------------------------------------------------------
     |network      direct/indirect flag  router   interface number|
     --------------------------------------------------------------
     |223.1.2      direct                <blank>  1               |
     --------------------------------------------------------------
           TABLE 9.  Example Simple Route Table with Numbers
```

---
## **5.8  Direct Scenario**

Alpha가 베타에게 IP 패킷을 보내고 있습니다. IP 패킷은 알파의 IP 모듈에 있고 대상 IP 주소는 베타 또는 223.1.2.2입니다. IP는 이 IP 주소의 네트워크 부분을 추출하고 일치하는 항목을 찾기 위해 테이블의 첫 번째 열을 검색합니다. 이 네트워크를 사용하면 첫 번째 항목에서 일치 항목이 발견됩니다.

이 항목의 다른 정보는 이 네트워크의 컴퓨터가 인터페이스 번호 1을 통해 직접 연결할 수 있음을 나타냅니다. ARP 테이블 변환은 베타의 IP 주소에서 수행된 다음 이더넷 프레임은 인터페이스 번호 1을 통해 베타로 직접 전송됩니다.

애플리케이션이 개발 네트워크에 없는 IP 주소로 데이터를 보내려고 하면 IP는 경로 테이블에서 일치하는 항목을 찾을 수 없습니다. 그런 다음 IP는 IP 패킷을 삭제합니다. 일부 컴퓨터에서는 "네트워크에 연결할 수 없음" 오류 메시지가 나타납니다.

---
## **5.9  Indirect Routing Details**

이제 이전에 살펴본 보다 복잡한 라우팅 시나리오를 자세히 살펴보겠습니다.

```text
          ---------           ---------           ---------
          | alpha |           | delta |           |epsilon|
          |    1  |           |1  2  3|           |   1   |
          ---------           ---------           ---------
               |               |  |  |                |
       --------o---------------o- | -o----------------o--------
        Ethernet 1                |     Ethernet 2
        IP network "Development"  |     IP network "accounting"
                                  |
                                  |     --------
                                  |     | iota |
                                  |     |  1   |
                                  |     --------
                                  |        |
                                --o--------o--------
                                    Ethernet 3
                                    IP network "factory"

             Figure 9.  Close-up View of Three IP Networks
```

알파 내부의 라우팅 테이블은 다음과 같습니다.

```text
 ---------------------------------------------------------------------
 |network      direct/indirect flag  router          interface number|
 ---------------------------------------------------------------------
 |development  direct                <blank>         1               |
 |accounting   indirect              devnetrouter    1               |
 |factory      indirect              devnetrouter    1               |
 ---------------------------------------------------------------------
                      TABLE 10.  Alpha Route Table
```

토론을 위해 테이블은 이름 대신 숫자를 사용하여 다시 인쇄됩니다.

```text
  --------------------------------------------------------------------
  |network      direct/indirect flag  router         interface number|
  --------------------------------------------------------------------
  |223.1.2      direct                <blank>        1               |
  |223.1.3      indirect              223.1.2.4      1               |
  |223.1.4      indirect              223.1.2.4      1               |
  --------------------------------------------------------------------
               TABLE 11.  Alpha Route Table with Numbers
```

Alpha의 경로 테이블에 있는 라우터는 개발 네트워크에 대한 Delta 연결의 IP 주소입니다.

---
## **5.10  Indirect Scenario**

Alpha는 IP 패킷을 엡실론으로 보내고 있습니다. IP 패킷은 알파의 IP 모듈에 있고 대상 IP 주소는 엡실론\(223.1.3.2\)입니다. IP는 이 IP 주소\(223.1.3\)의 네트워크 부분을 추출하고 일치하는 항목을 찾기 위해 테이블의 첫 번째 열을 검색합니다. 두 번째 항목에서 일치하는 항목이 발견되었습니다.

이 항목은 223.1.3 네트워크의 컴퓨터가 IP 라우터 devnetrouter를 통해 접근할 수 있음을 나타냅니다. 그런 다음 Alpha의 IP 모듈은 devnetrouter의 IP 주소에 대한 ARP 테이블 변환을 수행하고 Alpha의 인터페이스 번호 1을 통해 devnetrouter에 직접 IP 패킷을 보냅니다. IP 패킷에는 여전히 엡실론의 대상 주소가 포함되어 있습니다.

IP 패킷은 델타의 개발 네트워크 인터페이스에 도착하여 델타의 IP 모듈로 전달됩니다. 대상 IP 주소를 검사한 결과 델타의 자체 IP 주소와 일치하지 않기 때문에 델타는 IP 패킷을 전달하기로 결정합니다.

Delta의 IP 모듈은 대상 IP 주소\(223.1.3\)의 네트워크 부분을 추출하고 경로 테이블에서 일치하는 네트워크 필드를 검색합니다. Delta의 경로 테이블은 다음과 같습니다.

```text
 ----------------------------------------------------------------------
 |network      direct/indirect flag  router           interface number|
 ----------------------------------------------------------------------
 |development  direct                <blank>          1               |
 |factory      direct                <blank>          3               |
 |accounting   direct                <blank>          2               |
 ----------------------------------------------------------------------
                     TABLE 12.  Delta's Route Table
```

아래는 이름을 번역하지 않고 다시 인쇄한 델타 테이블입니다.

```text
 ----------------------------------------------------------------------
 |network      direct/indirect flag  router           interface number|
 ----------------------------------------------------------------------
 |223.1.2      direct                <blank>          1               |
 |223.1.3      direct                <blank>          3               |
 |223.1.4      direct                <blank>          2               |
 ----------------------------------------------------------------------
              TABLE 13.  Delta's Route Table with Numbers
```

두 번째 항목에서 일치하는 항목을 찾았습니다. 그런 다음 IP는 인터페이스 번호 3을 통해 IP 패킷을 직접 엡실론으로 보냅니다. IP 패킷에는 엡실론의 IP 대상 주소와 이더넷이 포함됩니다.

엡실론의 목적지 주소.

IP 패킷은 엡실론에 도착하여 엡실론의 IP 모듈로 전달됩니다. 대상 IP 주소를 검사하여 엡실론의 IP 주소와 일치하는 것으로 확인되면 IP 패킷이 상위 프로토콜 계층으로 전달됩니다.

---
## **5.11  Routing Summary**

IP 패킷이 대규모 인터넷을 통해 이동할 때 목적지에 도달하기 전에 많은 IP 라우터를 통과할 수 있습니다. 이동 경로는 중앙 소스에 의해 결정되는 것이 아니라 여정에 사용되는 각 라우팅 테이블을 참조한 결과입니다. 각 컴퓨터는 여정에서 다음 홉만 정의하고 해당 컴퓨터를 사용하여 도중에 IP 패킷을 보냅니다.

---
## **5.12  Managing the Routes**

대규모 인터넷의 모든 컴퓨터에서 올바른 라우팅 테이블을 유지하는 것은 어려운 작업입니다. 네트워크 구성은 변화하는 요구를 충족하기 위해 네트워크 관리자에 의해 지속적으로 수정되고 있습니다. 라우팅 테이블의 실수는 진단하기가 극도로 지루한 방식으로 통신을 차단할 수 있습니다.

간단한 네트워크 구성을 유지하는 것은 안정적인 인터넷을 만드는 데 큰 도움이 됩니다. 예를 들어, IP 네트워크를 이더넷에 할당하는 가장 간단한 방법은 각 이더넷에 단일 IP 네트워크 번호를 할당하는 것입니다.

특정 프로토콜 및 네트워크 응용 프로그램에서도 도움말을 사용할 수 있습니다. ICMP\(인터넷 제어 메시지 프로토콜\)는 일부 라우팅 문제를 보고할 수 있습니다. 소규모 네트워크의 경우 네트워크 관리자가 각 컴퓨터에서 경로 테이블을 수동으로 채웁니다. 대규모 네트워크의 경우 네트워크 관리자는 라우팅 프로토콜을 사용하여 이 수동 작업을 자동화하여 네트워크 전체에 경로를 배포합니다.

컴퓨터가 한 IP 네트워크에서 다른 IP 네트워크로 이동되면 해당 IP 주소가 변경되어야 합니다. 컴퓨터가 IP 네트워크에서 제거되면 이전 주소는 유효하지 않게 됩니다. 이러한 변경 사항을 적용하려면 "호스트" 파일을 자주 업데이트해야 합니다. 이 플랫 파일은 중간 규모 네트워크에서도 유지 관리가 어려워질 수 있습니다. 도메인 이름 시스템은 이러한 문제를 해결하는 데 도움이 됩니다.

---
## **6.  User Datagram Protocol**

UDP는 IP 위에 상주하는 두 가지 주요 프로토콜 중 하나입니다. 이는 사용자의 네트워크 애플리케이션에 서비스를 제공합니다. UDP를 사용하는 네트워크 애플리케이션의 예는 다음과 같습니다. NFS\(Network File System\) 및 단순

네트워크 관리 프로토콜\(SNMP\). 이 서비스는 IP에 대한 인터페이스에 지나지 않습니다.

UDP는 전달을 보장하지 않는 비연결 데이터그램 전달 서비스입니다. UDP는 원격 UDP 모듈과의 종단 간 연결을 유지하지 않습니다. 이는 단지 데이터그램을 네트 밖으로 밀어내고 네트에서 들어오는 데이터그램을 받아들일 뿐입니다.

UDP는 IP가 제공하는 것에 두 가지 값을 추가합니다. 하나는 포트 번호를 기반으로 애플리케이션 간 정보를 다중화하는 것입니다. 다른 하나는 데이터의 무결성을 확인하기 위한 체크섬입니다.

---
## **6.1  Ports**

한 컴퓨터의 클라이언트가 다른 컴퓨터의 서버에 어떻게 연결합니까?

애플리케이션과 UDP 간의 통신 경로는 UDP 포트를 통해 이루어집니다. 이러한 포트에는 0부터 시작하여 번호가 매겨져 있습니다. 서비스를 제공하는 애플리케이션\(서버\)은 해당 서비스 전용의 특정 포트에 메시지가 들어올 때까지 기다립니다. 서버는 클라이언트가 서비스를 요청할 때까지 인내심을 갖고 기다립니다.

예를 들어, SNMP 에이전트라고 불리는 SNMP 서버는 항상 포트 161에서 기다립니다. UDP 포트 번호 161이 하나만 있기 때문에 컴퓨터당 하나의 SNMP 에이전트만 있을 수 있습니다. 이 포트 번호는 잘 알려져 있습니다. 고정번호, 인터넷 할당번호입니다. SNMP 클라이언트가 서비스를 원하면 대상 컴퓨터에 있는 UDP의 포트 번호 161로 요청을 보냅니다.

애플리케이션이 UDP를 통해 데이터를 전송하면 단일 단위로 맨 끝에 도착합니다. 예를 들어, 애플리케이션이 UDP 포트에 5번의 쓰기를 수행하면 맨 끝에 있는 애플리케이션은 UDP 포트에서 5번의 읽기를 수행합니다. 또한 각 쓰기 크기는 각 읽기 크기와 일치합니다.

UDP는 애플리케이션에서 정의한 메시지 경계를 유지합니다. 두 개의 애플리케이션 메시지를 함께 결합하거나 단일 애플리케이션 메시지를 여러 부분으로 나누지 않습니다.

---
## **6.2  Checksum**

"UDP"를 나타내는 IP 헤더 유형 필드가 있는 수신 IP 패킷은 IP에 의해 UDP 모듈로 전달됩니다. UDP 모듈은 IP로부터 UDP 데이터그램을 수신하면 UDP 체크섬을 검사합니다. 체크섬이 0이면 보낸 사람이 체크섬을 계산하지 않았으므로 무시할 수 있음을 의미합니다. 따라서 보내는 컴퓨터의 UDP 모듈은 체크섬을 생성할 수도 있고 생성하지 않을 수도 있습니다. 이더넷이 통신하는 2개의 UDP 모듈 사이의 유일한 네트워크인 경우에는 필요하지 않을 수도 있습니다.

체크섬. 그러나 나중에 경로 테이블 변경으로 인해 안정성이 떨어지는 미디어를 통해 데이터가 전송될 수 있으므로 항상 체크섬 생성을 활성화하는 것이 좋습니다.

체크섬이 유효하거나 0이면 대상 포트 번호를 검사하고 애플리케이션이 해당 포트에 바인딩되어 있으면 애플리케이션이 읽을 수 있도록 애플리케이션 메시지가 대기열에 추가됩니다. 그렇지 않으면 UDP 데이터그램이 삭제됩니다. 들어오는 UDP 데이터그램이 애플리케이션이 읽을 수 있는 것보다 빠르게 도착하고 큐가 최대값까지 채워지면 UDP에 의해 UDP 데이터그램이 삭제됩니다. UDP는 대기열에 공간이 생길 때까지 계속해서 UDP 데이터그램을 삭제합니다.

---
## **7.  Transmission Control Protocol**

TCP는 UDP와 다른 서비스를 제공합니다. TCP는 연결 없는 데이터그램 전달 서비스 대신 연결 지향 바이트 스트림을 제공합니다. TCP는 전달을 보장하지만 UDP는 그렇지 않습니다.

TCP는 보장된 전달이 필요하고 시간 초과 및 재전송을 수행하는 데 방해가 되지 않는 네트워크 응용 프로그램에서 사용됩니다. TCP를 사용하는 가장 일반적인 두 가지 네트워크 응용 프로그램은 FTP\(파일 전송 프로토콜\)와 TELNET입니다. 기타 널리 사용되는 TCP 네트워크 애플리케이션에는 X-Window System, rcp\(원격 복사\) 및 r-시리즈 명령이 포함됩니다. TCP의 뛰어난 기능에는 비용이 들지 않습니다. 즉, 더 많은 CPU와 네트워크 대역폭이 필요합니다. TCP 모듈의 내부는 UDP 모듈의 내부보다 훨씬 더 복잡합니다.

UDP와 유사하게 네트워크 애플리케이션은 TCP 포트에 연결됩니다. 잘 정의된 포트 번호는 특정 애플리케이션 전용입니다. 예를 들어, TELNET 서버는 포트 번호 23을 사용합니다. TELNET 클라이언트는 지정된 컴퓨터의 TCP 포트 23에 연결하기만 하면 서버를 찾을 수 있습니다.

애플리케이션이 TCP를 사용하여 처음 시작되면 클라이언트 컴퓨터의 TCP 모듈과 서버 컴퓨터의 TCP 모듈이 서로 통신을 시작합니다. 이 두 개의 엔드포인트 TCP 모듈에는 가상 회로를 정의하는 상태 정보가 포함되어 있습니다. 이 가상 회로는 두 TCP 끝점 모두에서 리소스를 소비합니다. 가상 회선은 전이중입니다. 데이터는 동시에 양방향으로 이동할 수 있습니다. 애플리케이션은 TCP 포트에 데이터를 쓰고, 데이터는 네트워크를 통과하여 맨 끝에 있는 애플리케이션에 의해 읽혀집니다.

TCP는 원하는 대로 바이트 스트림을 패킷화합니다. 쓰기 간의 경계를 유지하지 않습니다. 예를 들어 애플리케이션이 TCP 포트에 5번의 쓰기를 수행하는 경우 맨 끝에 있는 애플리케이션은 모든 데이터를 얻기 위해 10번의 읽기를 수행할 수 있습니다. 또는 한 번의 읽기로 모든 데이터를 얻을 수도 있습니다. 숫자와 크기 사이에는 아무런 상관관계가 없습니다.

한쪽 끝에서 다른 쪽 끝의 읽기 수와 크기를 씁니다.

TCP는 시간 초과 및 재전송 기능이 있는 슬라이딩 윈도우 프로토콜입니다. 나가는 데이터는 맨 끝 TCP에서 승인되어야 합니다. 승인은 데이터에 피기백될 수 있습니다. 양쪽 수신단 모두 반대쪽 끝의 흐름을 제어할 수 있으므로 버퍼 오버런을 방지할 수 있습니다.

모든 슬라이딩 창 프로토콜과 마찬가지로 프로토콜에도 창 크기가 있습니다. 창 크기는 승인이 필요하기 전에 전송할 수 있는 데이터의 양을 결정합니다. TCP의 경우 이 양은 TCP 세그먼트 수가 아니라 바이트 수입니다.

---
## **8.  Network Applications**

TCP와 UDP 중 하나만 존재하는 이유는 무엇입니까?

그들은 다양한 서비스를 제공합니다. 대부분의 애플리케이션은 둘 중 하나만 사용하도록 구현됩니다. 프로그래머인 당신은 자신의 필요에 가장 적합한 프로토콜을 선택합니다. 안정적인 스트림 전달 서비스가 필요한 경우 TCP가 가장 좋습니다. 데이터그램 서비스가 필요한 경우 UDP가 가장 좋습니다. 장거리 회선에 대한 효율성이 필요한 경우 TCP가 가장 적합할 수 있습니다. 대기 시간이 짧고 빠른 네트워크에서 효율성이 필요한 경우 UDP가 가장 좋습니다. 귀하의 요구 사항이 이러한 범주에 잘 맞지 않으면 "최상의" 선택이 불분명합니다. 그러나 응용 프로그램은 선택의 결함을 보완할 수 있습니다. 예를 들어 UDP를 선택하고 안정성이 필요한 경우 애플리케이션은 안정성을 제공해야 합니다. TCP를 선택하고 레코드 지향 서비스가 필요한 경우 애플리케이션은 레코드를 구분하기 위해 바이트 스트림에 마커를 삽입해야 합니다.

어떤 네트워크 애플리케이션을 사용할 수 있나요?

나열하기에는 너무 많습니다. 그 수는 지속적으로 증가하고 있습니다. TELNET 및 FTP와 같은 일부 응용 프로그램은 인터넷 기술이 시작된 이래로 존재해 왔습니다. 다른 것들은 X-Windows와 SNMP와 같이 비교적 새로운 것입니다. 다음은 이 튜토리얼에서 언급된 애플리케이션에 대한 간략한 설명입니다.

---
## **8.1  TELNET**

TELNET은 TCP에서 원격 로그인 기능을 제공합니다. 작동 및 모양은 전화 스위치를 통한 키보드 다이얼링과 유사합니다. 명령줄에서 사용자는 "telnet delta"를 입력하고 "delta"라는 컴퓨터로부터 로그인 프롬프트를 받습니다.

TELNET은 잘 작동합니다. 이는 오래된 애플리케이션이며 광범위한 상호 운용성을 갖추고 있습니다. TELNET 구현은 일반적으로 서로 다른 운영 체제 간에 작동합니다. 예를 들어, TELNET 클라이언트가 켜져 있을 수 있습니다.

VAX/VMS 및 UNIX System V의 서버.

---
## **8.2  FTP**

TELNET만큼 오래된 FTP\(파일 전송 프로토콜\)도 TCP를 사용하며 광범위한 상호 운용성을 제공합니다. 작동 및 모양은 마치 원격 컴퓨터에 TELNET 연결한 것과 같습니다. 그러나 일반적인 명령을 입력하는 대신 디렉토리 목록 등을 위한 짧은 명령 목록을 사용해야 합니다. FTP 명령을 사용하면 컴퓨터 간에 파일을 복사할 수 있습니다.

---
## **8.3  rsh**

원격 쉘\(rsh 또는 remsh\)은 전체 원격 UNIX 스타일 명령 제품군 중 하나입니다. UNIX 복사 명령인 cp는 rcp가 됩니다. UNIX의 "누가 로그인했는지" 명령인 who는 rwho가 됩니다. 목록은 계속되며 집합적으로 "r" 시리즈 명령 또는 "r\*"\(r star\) 명령이라고 합니다.

r\* 명령은 주로 UNIX 시스템 간에 작동하며 신뢰할 수 있는 호스트 간의 상호 작용을 위해 설계되었습니다. 보안에 대한 배려는 거의 없으나 편리한 사용자 환경을 제공합니다.

delta라는 원격 컴퓨터에서 "cc file.c" 명령을 실행하려면 "rsh delta cc file.c"를 입력하세요. "file.c" 파일을 델타에 복사하려면 "rcp file.c delta:"를 입력하세요. 델타에 로그인하려면 "rlogin delta"를 입력하십시오. 특정 방식으로 컴퓨터를 관리했다면 비밀번호 프롬프트가 표시되지 않습니다.

---
## **8.4  NFS**

Sun Microsystems Inc가 처음 개발한 Network File System은 UDP를 사용하며 여러 컴퓨터에 UNIX 파일 시스템을 마운트하는 데 탁월합니다. 디스크가 없는 워크스테이션은 마치 디스크가 워크스테이션의 로컬인 것처럼 서버의 하드 디스크에 액세스할 수 있습니다. 데이터베이스의 파일 시스템이 "베타"에 마운트된 NFS인 경우 메인프레임 "알파"에 있는 데이터베이스의 단일 디스크 복사본을 메인프레임 "베타"에서도 사용할 수 있습니다.

NFS는 네트워크에 상당한 로드를 추가하고 느린 링크 전반에 걸쳐 유용성이 떨어지지만 이점은 강력합니다. NFS 클라이언트는 커널에 구현되어 모든 애플리케이션과 명령이 NFS 마운트 디스크를 로컬 디스크인 것처럼 사용할 수 있도록 합니다.

---
## **8.5  SNMP**

SNMP\(Simple Network Management Protocol\)는 UDP를 사용하며 중앙 네트워크 관리 스테이션에서 사용하도록 설계되었습니다. 충분한 데이터가 제공되면 네트워크 관리자가 이를 감지하고 분석할 수 있다는 것은 잘 알려진 사실입니다.

네트워크 문제를 진단합니다. 중앙 스테이션은 SNMP를 사용하여 네트워크의 다른 컴퓨터로부터 이 데이터를 수집합니다. SNMP는 데이터 형식을 정의합니다. 데이터를 해석하는 것은 중앙 스테이션이나 네트워크 관리자에게 맡겨집니다.

---
## **8.6  X-Window**

X Window 시스템은 TCP의 X Window 프로토콜을 사용하여 워크스테이션의 비트맵 디스플레이에 창을 그립니다. X Window는 창을 그리는 유틸리티 그 이상입니다. 이는 사용자 인터페이스 디자인에 대한 전체적인 철학입니다.

---
## **9.  Other Information**

이 튜토리얼에는 인터넷 기술에 대한 많은 정보가 포함되지 않았습니다. 이 섹션에는 더 많은 정보를 원하는 독자를 위한 다음 수준의 세부 정보로 간주되는 정보가 나열되어 있습니다.

```text
     o administration commands: arp, route, and netstat
     o ARP: permanent entry, publish entry, time-out entry, spoofing
     o IP route table: host entry, default gateway, subnets
     o IP: time-to-live counter, fragmentation, ICMP
     o RIP, routing loops
     o Domain Name System
```

---
## **10.  References**

\[1\] Comer, D., "TCP/IP 원리, 프로토콜 및 아키텍처와의 인터네트워킹", Prentice Hall, Englewood Cliffs, New Jersey, 미국, 1988.

\[2\] Feinler, E. 등, DDN 프로토콜 핸드북, 볼륨 2 및 3, DDN 네트워크 정보 센터, SRI International, 333 Ravenswood Avenue, Room EJ291, Menlow Park, California, U.S.A., 1985.

\[3\] Spider Systems, Ltd., "패킷 및 프로토콜", Spider Systems Ltd., Stanwell Street, Edinburgh, 영국 EH6 5NG, 1990.

---
## **11.  Relation to other RFCs**

이 RFC는 튜토리얼이며 다른 RFC를 업데이트하거나 폐기하지 않습니다.

---
## **12.  Security Considerations**

TCP/IP 프로토콜 제품군에는 보안 고려 사항이 있습니다. 어떤 사람들에게는 이러한 고려 사항이 심각한 문제이지만 다른 사람들에게는 그렇지 않습니다. 사용자 요구 사항에 따라 다릅니다.

이 튜토리얼에서는 이러한 문제를 다루지 않지만 더 자세히 알아보려면 ARP 스푸핑 주제부터 시작한 다음 RFC 1122의 "보안 고려 사항" 섹션을 사용하여 추가 정보를 확인해야 합니다.

---
## **13.  Authors' Addresses**

```text
   Theodore John Socolofsky
   Spider Systems Limited
   Spider Park
   Stanwell Street
   Edinburgh EH6 5NG
   United Kingdom

   Phone:
     from UK        031-554-9424
     from USA 011-44-31-554-9424
   Fax:
     from UK        031-554-0649
     from USA 011-44-31-554-0649

   EMail: TEDS@SPIDER.CO.UK

   Claudia Jeanne Kale
   12 Gosford Place
   Edinburgh EH6 4BJ
   United Kingdom

   Phone:
     from UK        031-554-7432
     from USA 011-44-31-554-7432

   EMail: CLAUDIAK@SPIDER.CO.UK
```
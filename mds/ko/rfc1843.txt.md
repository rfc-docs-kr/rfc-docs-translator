

```text
Network Working Group                                             F. Lee
Request for Comments: 1843                           Stanford University
Category: Informational                                      August 1995
```

HZ - 파일 교환을 위한 데이터 형식

- 중국어와 ASCII 문자를 임의로 혼합

---
# **Status of this Memo**

이 메모는 인터넷 커뮤니티에 대한 정보를 제공합니다. 이 메모는 어떤 종류의 인터넷 표준도 지정하지 않습니다. 이 메모의 배포는 무제한입니다.

---
# **Abstract**

이 메모의 내용은 필자가 1989년 9월 4일에 작성한 동명의 기사와 동일하다. 이 메모에서 GB는 GB2312-80을 의미한다. 제목은 역사적인 이유로만 유지됩니다. HZ는 "파일 교환" 이외의 목적으로 널리 사용되었습니다.

---
## **1. Introduction**

중국어와 ASCII 문자가 임의로 혼합된 텍스트 파일을 처리할 수 있는 대부분의 기존 컴퓨터 시스템은 8비트 코드를 사용합니다. ASCII 컴퓨터 시스템에서 전자 메일을 통해 이러한 텍스트 파일을 교환하려면 해당 텍스트 파일을 7비트 형식으로 인코딩해야 합니다. 현재 이러한 8비트 코드에 대한 보편적인 표준이 없기 때문에 ASCII 인코더에 대한 일반 바이너리로는 충분하지 않습니다. 예를 들어 CCDOS와 Macintosh의 중국어 OS는 서로 다른 내부 코드를 사용합니다. 다행스럽게도 한자 인코딩에 대한 중국 국가 표준인 GuoBiao\(GB\)가 있으며, 위 시스템에서 인코딩된 한자는 간단한 공식을 통해 쉽게 GB로 변환할 수 있습니다. \(\* ROC 표준 BIG-5는 이 기사의 범위를 벗어납니다.\)

HZ는 임의로 혼합된 GB 및 ASCII 텍스트 파일 교환을 위해 제안된 7비트 데이터 형식입니다. HZ는 또한 혼합 중국어 및 ASCII 텍스트 파일을 실시간으로 표시하고 편집하는 터미널 에뮬레이터의 설계를 위해 만들어졌습니다.

---
## **2. Specification**

HZ의 형식은 다음과 같습니다.

일반성을 잃지 않고 모든 중국어 문자\(HanZi\)가 이미 GB로 인코딩되었다고 가정합니다. GB\(GB1 및 GB2\) 코드는 2바이트 코드로, 첫 번째 바이트는 $21-$77\(16진수\) 범위에 있고 두 번째 바이트는 $21-$7E 범위에 있습니다.

그래픽 ASCII 문자는 $21-$7E 범위의 바이트입니다. 비그래픽 ASCII 문자는 $0-$20 범위 또는 $7F 값의 바이트입니다.

그래픽 ASCII 문자의 범위가 GB 바이트의 범위와 겹치기 때문에 $21-$7E 범위의 바이트는 현재 모드에 따라 해석됩니다. 두 가지 모드, 즉 ASCII 모드와 GB 모드가 있습니다.

규칙에 따라 비그래픽 ASCII 문자는 ASCII 모드에서만 나타나야 합니다.

기본 모드는 ASCII 모드입니다.

ASCII 모드에서는 '\~'가 발생하지 않는 한 바이트는 ASCII 문자로 해석됩니다. '\~' 문자는 이스케이프 문자입니다. 관례적으로, 바로 뒤에는 '\~', '{' 또는 '\n'\(<LF\>\)만 와야 하며 다음과 같은 특별한 의미를 갖습니다.

o 이스케이프 시퀀스 '\~\~'는 '\~'로 해석됩니다. o GB로 탈출 시퀀스 '\~{'는 모드를 ASCII에서 GB로 전환합니다. o 이스케이프 시퀀스 '\~\n'은 출력이 생성되지 않고 소비되는 줄 연속 표시입니다.

GB 모드에서 문자는 GB 탈출 코드 '\~}'를 읽을 때까지 한 번에 2바이트씩 \(순수\) GB 코드로 해석됩니다. 이 코드는 모드를 GB에서 다시 ASCII로 전환합니다. \(GB 이탈 코드 '\~}'\($7E7D\)는 정의된 GB 범위를 벗어났습니다.\)

디코딩 프로세스는 위의 설명에서 명확합니다.

```text
   The encoding process is straightforward. Note that an (ASCII) '~' is
   always encoded as '~~'. A sequence of GB codes is enclosed in '~{'
   and '~}'.
```

---
## **3. Remarks & Recommendations**

우리는 2바이트 코드가 아닌 '\~'를 제외한 모든 ASCII 문자를 그대로 인코딩하기로 선택했으며 다음과 같은 이유로 ASCII를 기본 모드로 선택했습니다. 우리가 사용하는 컴퓨터 시스템은 ASCII 기반입니다. '\~'를 제외하고 순수 ASCII 문자\(즉, 한자가 없는\)를 포함하는 HZ 파일은 정확하게 순수 ASCII 파일입니다. 일반적으로 HZ 파일의 영어\(ASCII\) 부분은 직접 읽을 수 있습니다.

이스케이프 문자 '\~'가 선택되는 이유는 ASCII 세계에서 일반적으로 사용되기 때문일 뿐만 아니라 '\~'\($7E\)가 GB 코드의 첫 번째 바이트의 정의된 범위\($21-$77\)를 벗어나기 때문입니다.

ASCII 모드에서 다른 잠재적 이스케이프 시퀀스, 즉 '\~'로 시작하는 2바이트 시퀀스\('\~\~', '\~{', '\~\n' 제외\)는 현재 유효하지 않은 HZ 시퀀스입니다. 따라서 향후 완전한 상향 호환성을 갖춘 HZ 확장에 사용할 수 있습니다.

줄 연속 표시자 '\~\n'은 디코딩 프로세스에서 추가 개행 문자를 도입하지 않고 원본 텍스트의 긴 줄을 이 데이터 형식의 짧은 줄로 인코딩하려는 경우 유용합니다.

줄 길이에는 제한이 없습니다. 실제로 전체 파일은 하나의 긴 줄이거나 개행 문자를 포함하지 않을 수도 있습니다. 이 HZ 데이터 형식의 모든 디코더는 라인 개념으로 작동해서는 안 되며 작동할 필요도 없습니다.

HZ용 인코더와 디코더를 작성하는 것은 쉽습니다. 인코더 또는 디코더는 입력 데이터 스트림에서 최대 한 문자를 미리 봐야 합니다.

현재 모드에서는 뒤로 스캔하여 HZ 데이터 스트림을 디코딩하는 것도 가능하고 쉽습니다. 그 의미 중 하나는 "백스페이스"가 터미널 에뮬레이터에서 올바르게 처리될 수 있다는 것입니다.

HZ 형식을 이해하는 터미널 에뮬레이터를 사용하여 UNIX에서 "more"와 같은 줄/페이지 건너뛰기를 지원하는 프로그램을 효과적으로 사용하려면 ENCODER\(HZ로 출력\)에서 최대 줄 크기를 80자 미만으로 설정하는 것이 좋습니다. . '\n'은 ASCII 문자이므로 HZ 구문은 줄 끝에 나타나는 GB 코드가 GB 탈출 코드 '\~}'로 종료되어야 함을 자동으로 암시하고 줄 연속 표시 ' \~\n'을 적절하게 삽입해야 합니다. 지불해야 할 대가는 인코딩된 파일 크기가 약간 더 크다는 것입니다.\(SHOULD\)

다음 차이점을 이해하는 것이 중요합니다. 위의 권장 사항은 HZ 형식을 변경하지 않습니다. 이는 단순히 HZ 구문을 따르는 인코딩 "스타일"입니다. 참고하세요

"스타일"은 HZ에 내장되어 있지 않습니다. 이는 HZ "위에" 구축된 추가 규칙입니다. 다른 응용 프로그램에는 다른 "스타일"이 필요할 수 있지만 동일한 기본 HZ DECODER가 항상 작동합니다. HZ의 본질은 중국어와 ASCII 문자가 임의로 혼합된 파일에 대해 유연한 기본 데이터 형식을 제공하는 것입니다.

---
## **4. Examples**

HZ 인코딩의 "문체적" 문제를 설명하기 위해 동일한 디코딩된 출력을 생성해야 하는 인코딩된 텍스트의 다음 네 가지 예를 제공합니다. \(마지막 섹션의 권장 사항은 예제 2를 참조합니다.\)

예 1: \(줄 크기 제한이 없다고 가정합니다.\) 이 문장은 ASCII입니다. 다음 문장은 GB입니다.\~{<:Ky2;S{#,NpJ\)l6HK!#\~}안녕하세요.

예 2: \(최대 줄 크기가 42라고 가정합니다.\) 이 문장은 ASCII입니다. 다음 문장은 GB입니다.\~{<:Ky2;S{#,\~}\~ \~{NpJ\)l6HK!#\~}안녕하세요.

예 3: \(모드 스위치가 있을 때마다 새 줄이 시작된다고 가정합니다.\) 이 문장은 ASCII입니다. 다음 문장은 GB입니다.\~ \~{<:Ky2;S{#,NpJ\)l6HK!#\~}\~ 안녕.

---
# **Acknowledgement**

Edmund Lai는 이 주제에 대해 내가 관심을 갖게 된 첫 번째 사람이었습니다. Ed, Tin-Fook Ngai, Yagui Wei 및 Ricky Yeung과의 토론은 이 기사의 아이디어를 구체화하는 데 매우 도움이 되었습니다. 초안을 주의 깊게 검토하고 수많은 흥미로운 제안을 해주신 Tin-Fook에게 감사드립니다.

---
# **References**

\[1\] Fung Fung Lee, "HZ - 임의로 혼합된 중국어 및 ASCII 문자 파일 교환을 위한 데이터 형식", 1989년 9월 4일. //ftp.ifcss.org/software/unix/convert/HZ-2.0의 일부 .tar.gz

---
# **Security Considerations**

이 메모에서는 보안 문제를 다루지 않습니다.

---
# **Author's Address**

```text
   Fung Fung Lee
   Computer Systems Laboratory
   Stanford University
   Stanford, CA 94309

   Phone: +1 415 723 1450
   EMail: lee@csl.stanford.edu
```
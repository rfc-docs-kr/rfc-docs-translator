

```text
﻿

Independent Submission                                       S. Kanugovi
Request for Comments: 8743                               Nokia Bell Labs
Category: Informational                                      F. Baboescu
ISSN: 2070-1721                                                 Broadcom
                                                                  J. Zhu
                                                                   Intel
                                                                  S. Seo
                                                           Korea Telecom
                                                              March 2020

                Multi-Access Management Services (MAMS)
```

---
# **Abstract**

다중 연결 시나리오에서 클라이언트는 Wi-Fi, LTE, DSL과 같은 다양한 액세스 기술 및 네트워크 아키텍처를 기반으로 여러 네트워크에 동시에 연결할 수 있습니다. 변화하는 네트워크 조건에 동적으로 적응할 수 있는 액세스 및 핵심 네트워크 경로의 현명한 선택과 결합을 통해 사용자 경험의 질과 전반적인 네트워크 활용도 및 효율성이 모두 향상될 수 있습니다.

이 문서에서는 통합된 문제 설명을 제시하고 다중 연결 관리를 위한 솔루션을 소개합니다. 이 솔루션은 IETF 및 3GPP를 포함한 여러 표준 기관에서의 경험을 바탕으로 작성자가 개발했습니다. 그러나 이 문서는 인터넷 표준 트랙 사양이 아니며 IETF의 합의된 의견을 나타내지 않습니다.

이 문서에서는 MAMS\(다중 액세스 관리 서비스\) 프레임워크의 요구 사항, 솔루션 원칙 및 아키텍처에 대해 설명합니다. MAMS 프레임워크는 다양한 다중 연결 배포에서 쉽게 구현하면서 최고의 성능을 제공하는 것을 목표로 합니다. 이는 \(1\) 업링크 및 다운링크에 대한 액세스 및 핵심 네트워크 경로의 최상의 조합을 유연하게 선택하고, \(2\) 선택한 링크에 대한 사용자 평면 처리\(예: 터널링, 암호화\) 및 트래픽 배포를 결정하기 위한 프로토콜을 지정합니다. 네트워크 효율성과 최고의 애플리케이션 성능을 보장합니다.

---
# **Status of This Memo**

이 문서는 인터넷 표준 추적 사양이 아닙니다. 정보 제공의 목적으로 게시됩니다.

이것은 다른 RFC 스트림과 독립적으로 RFC 시리즈에 대한 기여입니다. RFC 편집자는 재량에 따라 이 문서를 게시하도록 선택했으며 구현 또는 배포의 가치에 대해 언급하지 않습니다. RFC 편집자가 게시하도록 승인한 문서는 인터넷 표준 수준의 후보가 아닙니다. RFC 7841의 섹션 2를 참조하십시오.

이 문서의 현재 상태, 정오표, 피드백 제공 방법에 대한 정보는 https://www.rfc-editor.org/info/rfc8743에서 얻을 수 있습니다.

---
# **Copyright Notice**

Copyright \(c\) 2020 IETF Trust 및 문서 작성자로 확인된 사람. 판권 소유.

이 문서는 이 문서의 발행일에 유효한 BCP 78 및 IETF 문서에 관한 IETF 트러스트의 법적 조항\(https://trustee.ietf.org/license-info\)의 적용을 받습니다. 이 문서와 관련된 귀하의 권리 및 제한 사항을 설명하므로 이 문서를 주의 깊게 검토하십시오.

---
# **Table of Contents**

```text
   1.  Introduction
   2.  Terminology
   3.  Problem Statement
   4.  Requirements
     4.1.  Access-Technology-Agnostic Interworking
     4.2.  Support for Common Transport Deployments
     4.3.  Independent Access Path Selection for Uplink and Downlink
     4.4.  Core Selection Independent of Uplink and Downlink Access
     4.5.  Adaptive Access Network Path Selection
     4.6.  Multipath Support and Aggregation of Access Link Capacities
     4.7.  Scalable Mechanism Based on User-Plane Interworking
     4.8.  Separate Control-Plane and User-Plane Functions
     4.9.  Lossless Path (Connection) Switching
     4.10. Concatenation and Fragmentation for Adaptation to MTU
            Differences
     4.11. Configuring Network Middleboxes Based on Negotiated
            Protocols
     4.12. Policy-Based Optimal Path Selection
     4.13. Access-Technology-Agnostic Control Signaling
     4.14. Service Discovery and Reachability
   5.  Solution Principles
   6.  MAMS Reference Architecture
   7.  MAMS Protocol Architecture
     7.1.  MAMS Control-Plane Protocol
     7.2.  MAMS User-Plane Protocol
   8.  MAMS Control-Plane Procedures
     8.1.  Overview
     8.2.  Common Fields in MAMS Control Messages
     8.3.  Common Procedures for MAMS Control Messages
       8.3.1.  Message Timeout
       8.3.2.  Keep-Alive Procedure
     8.4.  Discovery and Capability Exchange
     8.5.  User-Plane Configuration
     8.6.  MAMS Path Quality Estimation
       8.6.1.  MX Control PDU Definition
       8.6.2.  Keep-Alive Message
       8.6.3.  Probe-REQ/ACK Message
     8.7.  MAMS Traffic Steering
     8.8.  MAMS Application MADP Association
     8.9.  MAMS Network ID Indication
     8.10. MAMS Client Measurement Configuration and Reporting
     8.11. MAMS Session Termination Procedure
     8.12. MAMS Network Analytics Request Procedure
   9.  Generic MAMS Signaling Flow
   10. Relationship to IETF Technologies
   11. Applying MAMS Control Procedures with MPTCP Proxy as User Plane
   12. Applying MAMS Control Procedures for Network-Assisted Traffic
           Steering When There Is No Convergence Layer
   13. Coexistence of MX Adaptation and MX Convergence Layers
   14. Security Considerations
     14.1.  MAMS Control-Plane Security
     14.2.  MAMS User-Plane Security
   15. Implementation Considerations
   16. Applicability to Multi-Access Edge Computing
   17. Related Work in Other Industry and Standards Forums
   18. IANA Considerations
   19. References
     19.1.  Normative References
     19.2.  Informative References
   Appendix A.  MAMS Control-Plane Optimization over Secure
           Connections
   Appendix B.  MAMS Application Interface
     B.1.  Overall Design
     B.2.  Notation
     B.3.  Error Indication
     B.4.  CCM APIs
       B.4.1.  GET Capabilities
       B.4.2.  Posting Application Requirements
       B.4.3.  Getting Predictive Link Parameters
   Appendix C.  MAMS Control-Plane Messages Described Using JSON
     C.1.  Protocol Specification: General Processing
       C.1.1.  Notation
       C.1.2.  Discovery Procedure
       C.1.3.  System Information Procedure
       C.1.4.  Capability Exchange Procedure
       C.1.5.  User-Plane Configuration Procedure
       C.1.6.  Reconfiguration Procedure
       C.1.7.  Path Estimation Procedure
       C.1.8.  Traffic-Steering Procedure
       C.1.9.  MAMS Application MADP Association
       C.1.10. MX SSID Indication
       C.1.11. Measurements
       C.1.12. Keep-Alive
       C.1.13. Session Termination Procedure
       C.1.14. Network Analytics
     C.2.  Protocol Specification: Data Types
       C.2.1.  MXBase
       C.2.2.  Unique Session ID
       C.2.3.  NCM Connections
       C.2.4.  Connection Information
       C.2.5.  Features and Their Activation Status
       C.2.6.  Anchor Connections
       C.2.7.  Delivery Connections
       C.2.8.  Method Support
       C.2.9.  Convergence Methods
       C.2.10. Adaptation Methods
       C.2.11. Setup of Anchor Connections
       C.2.12. Init Probe Results
       C.2.13. Active Probe Results
       C.2.14. Downlink Delivery
       C.2.15. Uplink Delivery
       C.2.16. Traffic Flow Template
       C.2.17. Measurement Report Configuration
       C.2.18. Measurement Report
     C.3.  Schemas in JSON
       C.3.1.  MX Base Schema
       C.3.2.  MX Definitions
       C.3.3.  MX Discover
       C.3.4.  MX System Info
       C.3.5.  MX Capability Request
       C.3.6.  MX Capability Response
       C.3.7.  MX Capability Acknowledge
       C.3.8.  MX Reconfiguration Request
       C.3.9.  MX Reconfiguration Response
       C.3.10. MX UP Setup Configuration Request
       C.3.11. MX UP Setup Confirmation
       C.3.12. MX Traffic Steering Request
       C.3.13. MX Traffic Steering Response
       C.3.14. MX Application MADP Association Request
       C.3.15. MX Application MADP Association Response
       C.3.16. MX Path Estimation Request
       C.3.17. MX Path Estimation Results
       C.3.18. MX SSID Indication
       C.3.19. MX Measurement Configuration
       C.3.20. MX Measurement Report
       C.3.21. MX Keep-Alive Request
       C.3.22. MX Keep-Alive Response
       C.3.23. MX Session Termination Request
       C.3.24. MX Session Termination Response
       C.3.25. MX Network Analytics Request
       C.3.26. MX Network Analytics Response
     C.4.  Examples in JSON
       C.4.1.  MX Discover
       C.4.2.  MX System Info
       C.4.3.  MX Capability Request
       C.4.4.  MX Capability Response
       C.4.5.  MX Capability Acknowledge
       C.4.6.  MX Reconfiguration Request
       C.4.7.  MX Reconfiguration Response
       C.4.8.  MX UP Setup Configuration Request
       C.4.9.  MX UP Setup Confirmation
       C.4.10. MX Traffic Steering Request
       C.4.11. MX Traffic Steering Response
       C.4.12. MX Application MADP Association Request
       C.4.13. MX Application MADP Association Response
       C.4.14. MX Path Estimation Request
       C.4.15. MX Path Estimation Results
       C.4.16. MX SSID Indication
       C.4.17. MX Measurement Configuration
       C.4.18. MX Measurement Report
       C.4.19. MX Keep-Alive Request
       C.4.20. MX Keep-Alive Response
       C.4.21. MX Session Termination Request
       C.4.22. MX Session Termination Response
       C.4.23. MX Network Analytics Request
       C.4.24. MX Network Analytics Response
   Appendix D.  Definition of APIs Provided by the CCM to the
           Applications at the Client
   Appendix E.  Implementation Example Using Python for MAMS Client
           and Server
     E.1.  Client-Side Implementation
     E.2.  Server-Side Implementation
   Acknowledgments
   Contributors
   Authors' Addresses
```

---
## **1.  Introduction**

MAMS\(다중 액세스 관리 서비스\)는 애플리케이션 요구 사항에 따라 MX\(다중 액세스\) 통신 환경에서 네트워크 경로를 유연하게 선택할 수 있는 메커니즘을 제공하는 프로그래밍 가능한 프레임워크입니다. MAMS 프레임워크는 네트워크 인텔리전스와 정책을 활용하여 선택한 경로 및 사용자 평면 처리\(예: Wi-Fi를 통한 전송에 필요한 암호화 또는 클라이언트와 다중 경로 프록시 간의 NAT를 극복하는 데 필요한 터널링\) 전반에 걸쳐 트래픽 분산을 변화하는 네트워크// 링크 조건. 네트워크 경로 선택 및 구성 메시지는 네트워크의 기능 요소와 클라이언트 사이에 사용자 평면 데이터로 전달되므로 기본 액세스 네트워크의 제어 평면 신호 체계에 영향을 주지 않습니다. 예를 들어, LTE 및 Wi-Fi 기술을 사용하는 다중 액세스 네트워크에서는 기존 LTE 및 Wi-Fi 신호 절차를 사용하여 각각 LTE 및 Wi-Fi 연결을 설정하고 MAMS 관련 제어 평면 메시지는 LTE 또는 Wi-Fi 사용자 평면 데이터로 전달됩니다. 본 문서에 정의된 MAMS 프레임워크는 액세스 경로와 핵심 네트워크 경로의 유연한 조합을 스마트하게 선택하고 트래픽이 선택된 경로에 분산될 때 사용자 평면 처리를 선택할 수 있는 기능을 제공합니다. 따라서 이는 3GPP 클라이언트가 발견하고 선택하도록 지원하기 위한 정책 및 규칙을 제공하는 액세스 네트워크 검색 및 선택 기능\(ANDSF\) \[ANDSF\]에서 제공하는 것과 같은 네트워크 정책의 단순한 공유 이상의 기능을 제공하는 광범위한 프로그래밍 가능 프레임워크입니다. 사용 가능한 액세스 네트워크. 또한 애플리케이션의 필요에 따라 경로를 통한 트래픽에 대한 사용자 평면 처리를 선택하고 구성할 수 있습니다.

MAMS 프레임워크 메커니즘은 특정 액세스 네트워크 유형이나 사용자 평면 프로토콜\(예: TCP, UDP, GRE\(Generic Routing Encapsulation\) \[RFC2784\] \[RFC2890\], 다중 경로 TCP\(MPTCP\) \[RFC6824\]\)에 종속되지 않습니다. MAMS 프레임워크는 클라이언트 및 네트워크 기능과 각 액세스 네트워크 경로의 특정 요구 사항을 기반으로 주어진 다중 액세스 시나리오에 맞게 프로토콜을 협상하고 구성하는 방법을 제공함으로써 기존 프로토콜을 공존하고 보완합니다. 또한 MAMS 프레임워크를 사용하면 선택된 액세스 네트워크 경로를 통한 트래픽 흐름의 로드 밸런싱과 네트워크 상태 정보 교환을 통해 네트워크 인텔리전스에 사용되어 해당 프로토콜의 성능을 최적화할 수 있습니다.

이 문서에서는 MAMS 프레임워크를 구현하기 위한 요구 사항, 솔루션 원칙, 기능 아키텍처 및 프로토콜을 제시합니다. MAMS 프레임워크의 중요한 목표는 MAMS 기능 요소가 여러 경로에 걸쳐 IP 오버레이를 형성한다는 사실을 넘어 참여 링크의 실제 액세스 기술에 대한 종속성을 최소화하거나 \(더 나은 경우\) 종속성이 없도록 하는 것입니다. 이를 통해 기존 액세스 및 핵심 네트워크의 독립적인 기술 발전과 새로운 액세스 기술의 원활한 통합을 허용함으로써 이 계획이 "미래 보장형"이 될 수 있습니다.

이 문서에 설명된 솔루션은 IETF 및 3GPP를 포함한 여러 표준 기관에서의 경험을 바탕으로 작성자가 개발한 것입니다. 그러나 이 문서는 인터넷 표준 트랙 사양이 아니며 IETF의 합의된 의견을 나타내지 않습니다.

---
## **2.  Terminology**

키워드 "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY" 및 "OPTIONAL" "는 BCP 14 \[RFC2119\] \[RFC8174\]에 설명된 대로 여기에 표시된 것처럼 모두 대문자로 표시되는 경우에만 해석됩니다.\(MUST NOT\)

클라이언트: 다양한 액세스 기술을 통해 여러 액세스 노드와의 연결을 지원하는 최종 사용자 장치입니다. 사용자 장치 또는 사용자 장비\(UE\)라고도 합니다.

다중 연결 클라이언트: 다중 네트워크를 가진 클라이언트

- 연결.

액세스 네트워크: Wi-Fi 에어링크, LTE 에어링크 또는 DSL과 같은 액세스 링크를 통해 사용자 데이터 패킷을 클라이언트에 전달하는 네트워크의 세그먼트입니다.

핵심: 네트워크를 통해 애플리케이션과 통신하는 데 사용되는 클라이언트 IP 주소를 고정하는 기능 요소입니다.

NCM\(Network Connection Manager\): 클라이언트의 MAMS 제어 메시지를 처리하고 사용 가능한 액세스 및 핵심 네트워크 경로를 통한 데이터 패킷 배포를 구성하고 사용자 평면 처리\(예: 터널링, 암호화\)를 관리하는 네트워크의 기능 엔터티입니다. \) 트래픽 흐름.

CCM\(클라이언트 연결 관리자\): NCM과 MAMS 신호 메시지를 교환하고 사용자 데이터 전송을 위해 클라이언트에서 네트워크 경로를 구성하는 클라이언트의 기능 엔터티입니다.

N-MADP\(네트워크 다중 액세스 데이터 프록시\): 여러 네트워크 경로를 통해 사용자 데이터 트래픽 전달을 처리하는 네트워크의 기능적 엔터티입니다. N-MADP는 네트워크에서 MAMS 관련 사용자 평면 기능을 담당합니다.

C-MADP\(클라이언트 다중 액세스 데이터 프록시\): 여러 네트워크 경로를 통해 사용자 데이터 트래픽 전달을 처리하는 클라이언트의 기능 엔터티입니다. C-MADP는 클라이언트의 MAMS 관련 사용자 평면 기능을 담당합니다.

앵커 연결: N-MADP에서 클라이언트에 IP 주소를 할당한 사용자 평면 게이트웨이\(IP 앵커\)까지의 네트워크 경로를 나타냅니다.

전달 연결\(Delivery Connection\): N-MADP에서 클라이언트까지의 네트워크 경로를 의미합니다.

업링크\(이 문서에서는 "UL"이라고도 함\): 클라이언트에서 네트워크로 향하는 연결 방향을 나타냅니다.

다운링크\(이 문서에서는 "DL"이라고도 함\): 네트워크에서 클라이언트로의 연결 방향을 나타냅니다.

---
## **3.  Problem Statement**

일반적으로 클라이언트는 LTE, Wi-Fi, DSL 또는 MulteFire와 같은 애플리케이션 서비스에 액세스하기 위한 다양한 기술을 기반으로 하는 여러 통신 네트워크에 액세스할 수 있습니다. 다양한 기술은 다양한 시나리오에서 이점과 한계를 나타냅니다. 예를 들어, Wi-Fi는 Wi-Fi 범위가 좋을 때 최종 사용자에게 높은 처리량을 제공하지만 특정 사용자가 Wi-Fi 범위 영역\(일반적으로 몇 킬로미터 범위\)의 가장자리에 더 가까이 이동함에 따라 처리량은 크게 저하됩니다. 수십 미터\) 또는 사용자 인구가 많은 경우\(경합 기반 Wi-Fi 액세스 방식으로 인해\) LTE 네트워크에서는 허가된 스펙트럼의 제한된 가용성으로 인해 용량이 제한되는 경우가 많습니다. 그러나 제어된 일정 및 라이센스 스펙트럼 사용으로 인해 다중 사용자 시나리오에서도 서비스 품질을 예측할 수 있습니다.

또한 특정 액세스 네트워크 경로의 사용은 관련 핵심 네트워크 및 해당 네트워크에서 제공하는 서비스의 사용과 결합되는 경우가 많습니다. 예를 들어, Wi-Fi와 LTE 네트워크를 모두 구축한 기업에서는 프린터, 기업 음성/화상 회의 등의 기업 서비스는 기업에서 호스팅하는\(Wi-Fi\) 네트워크에 연결된 Wi-Fi 액세스를 통해서만 액세스할 수 있습니다. 핵심인 반면, LTE 액세스는 공용 인터넷 액세스를 포함한 이동통신사 서비스를 받는 데 사용될 수 있습니다.

따라서 다양한 시나리오의 애플리케이션 성능은 액세스 네트워크\(예: Wi-Fi, LTE\) 선택과 사용되는 네트워크 및 전송 프로토콜\(예: VPN, MPTCP, GRE\)에 따라 달라집니다. 따라서 다양한 시나리오에서 가능한 최고의 애플리케이션 성능을 달성하려면 액세스 및 코어 네트워크 경로는 물론 업링크 및 다운링크 데이터 전달에 사용되는 프로토콜을 선택하고 유연하게 조합할 수 있는 프레임워크가 필요합니다.

예를 들어 혼잡하지 않은 시나리오에서 사용자의 Wi-Fi 범위가 좋은 경우 엔터프라이즈 애플리케이션에 대해 항상 최상의 성능을 보장하려면 엔터프라이즈 애플리케이션에 연결하기 위한 업링크 및 다운링크 모두에 Wi-Fi 액세스를 사용하는 것이 좋습니다. 그러나 혼잡한 시나리오에서 또는 사용자가 Wi-Fi 적용 범위의 가장자리에 가까워지는 경우 여러 사용자가 업링크에서 Wi-Fi를 사용하면 경합으로 인해 용량이 저하되고 지연이 증가할 수 있습니다. 이 경우, 증가된 업링크 커버리지를 위해 적어도 LTE 액세스를 사용하는 것이 유리할 것이며, 반면 다운링크에는 Wi-Fi를 계속 사용할 수 있습니다.

---
## **4.  Requirements**

이 섹션에 명시된 요구 사항은 MAMS 메커니즘의 동작과 관련 기능 요소를 정의합니다.

---
### **4.1.  Access-Technology-Agnostic Interworking**

액세스 노드는 다양한 기술 유형\(LTE, Wi-Fi 등\)을 사용할 수 있습니다. 그러나 프레임워크는 액세스 네트워크에서 사용되는 기본 기술 유형에 대해 불가지론적이어야 합니다.\(MAY, MUST\)

---
### **4.2.  Support for Common Transport Deployments**

네트워크 경로 선택 및 사용자 데이터 배포는 종단 간 IPsec, VPN, NAT 및 프록시와 같은 미들박스를 포함하는 다양한 전송 배포에서 투명하게 작동해야 합니다.\(MUST\)

---
### **4.3.  Independent Access Path Selection for Uplink and Downlink**

클라이언트는 하나 이상의 액세스 네트워크를 사용하여 업링크에서 전송하고 다운링크에서 수신할 수 있어야 합니다. 업링크와 다운링크에 대한 액세스 경로 선택은 독립적으로 이루어져야 합니다.\(SHOULD, SHOULD\)

---
### **4.4.  Core Selection Independent of Uplink and Downlink Access**

클라이언트는 애플리케이션의 요구 사항, 로컬 정책 및 MAMS 제어 평면 협상 결과에 따라 코어에 도달하는 데 사용되는 액세스 경로와 독립적으로 코어를 유연하게 선택해야 합니다.\(SHOULD\)

---
### **4.5.  Adaptive Access Network Path Selection**

프레임워크에는 각 네트워크 경로의 품질\(예: 액세스 링크 지연 및 용량\)을 결정하는 기능이 있어야 합니다. 네트워크 경로 품질에 관한 이 정보는 사용자 데이터 전송에 사용할 네트워크 경로 조합을 선택하기 위한 논리에서 고려되어야 합니다. 경로 선택 알고리즘은 네트워크 정책과 같은 다른 고려 사항 외에도 네트워크 경로 품질에 관한 정보를 사용하여 네트워크 사용을 최적화하고 사용자에게 전달되는 QoE\(체감 품질\)를 향상시킬 수 있습니다.\(MUST\)

---
### **4.6.  Multipath Support and Aggregation of Access Link Capacities**

프레임워크는 IP 계층의 여러 네트워크 경로에 걸쳐 사용자 데이터의 배포 및 집계를 지원해야 합니다. 클라이언트는 여러 네트워크 경로를 통해 사용자 데이터를 동시에 전송할 수 있도록 하여 여러 네트워크 연결의 결합된 용량을 활용할 수 있어야 합니다. 필요한 경우 수신자에서 패킷 재정렬을 수행해야 합니다. 프레임워크는 클라이언트와 네트워크 사용자 평면 엔터티가 지원하는 기능을 기반으로 흐름 조정 및 집계 프로토콜을 선택할 수 있는 유연성을 허용해야 합니다\(MUST\). 다중 연결 집계 솔루션은 TCP, UDP, GRE와 같은 기존 전송 및 네트워크 계층 프로토콜을 지원해야 합니다. 프레임워크는 MPTCP 및 SCTP \[RFC4960\]와 같은 기존 집계 프로토콜의 사용 및 구성을 허용해야 합니다\(MUST\).\(MUST, SHOULD, MUST, MUST, MUST\)

---
### **4.7.  Scalable Mechanism Based on User-Plane Interworking**

프레임워크는 일반적으로 사용 가능한 전송, 라우팅 및 터널링 기능을 활용하여 사용자 평면 상호연동 기능을 제공해야 합니다. 클라이언트와 네트워크 사이의 사용자 평면 경로에 기능 요소를 추가해도 액세스 기술별 절차에 영향을 주어서는 안 됩니다. 이를 통해 다양한 네트워크를 추가하거나 제거할 때 솔루션을 쉽게 배포하고 확장할 수 있습니다.\(MUST, MUST NOT\)

---
### **4.8.  Separate Control-Plane and User-Plane Functions**

클라이언트는 제어 평면 프로토콜을 사용하여 네트워크와 다음 사항을 협상해야 합니다. \(1\) 업링크와 다운링크 모두에 대한 액세스 및 핵심 네트워크 경로 선택, \(2\) 사용자 평면 프로토콜 처리. 제어 평면은 이 협상에 따라 실제 사용자 평면 데이터 배포 기능을 구성해야 합니다. 공통 제어 프로토콜은 잠재적으로 다른 사용자 평면\(예: 터널링\) 프로토콜 유형을 사용하여 여러 사용자 평면 기능 인스턴스의 생성을 허용해야 합니다\(SHOULD\). 이를 통해 제어 평면과 사용자 평면 기능 간의 명확한 분리를 유지할 수 있으므로 소프트웨어 정의 네트워킹\(SDN\) 기반 아키텍처 및 구현을 사용하여 프레임워크를 확장할 수 있습니다.\(MUST, MUST, SHOULD\)

---
### **4.9.  Lossless Path (Connection) Switching**

한 경로\(연결\)에서 다른 경로\(연결\)로 데이터 트래픽을 전환할 때 패킷이 손실되거나 순서가 잘못 전달될 수 있습니다. 이는 TCP와 같은 상위 계층 프로토콜의 성능에 부정적인 영향을 미칩니다. 프레임워크는 경로 전환 중과 같이 수신기에서 순차적인 전달을 보장하는 데 필요한 메커니즘을 제공해야 합니다\(SHOULD\). 프레임워크는 액세스 네트워크 이동성 기능으로 인해 발생할 수 있는 손실 이상의 패킷 손실을 유발해서는 안 됩니다.\(SHOULD, MUST NOT\)

---
### **4.10.  Concatenation and Fragmentation for Adaptation to MTU Differences**

네트워크 경로마다 보안 및 미들박스\(예: NAT\) 구성이 다를 수 있습니다. 이러한 구성으로 인해 네트워크 사용자 평면 기능과 클라이언트 간의 데이터 전송을 위해 다양한 터널링 프로토콜이 사용됩니다. 결과적으로 네트워크 경로당 서로 다른 유효 페이로드 크기가 가능합니다\(예: 가변 캡슐화 헤더 오버헤드로 인해\). 따라서 MAMS 프레임워크는 서로 다른 경로의 패킷을 집계할 때 IP 패킷 조각화를 방지하기 위해 MTU 크기의 IP 패킷에서 단일 페이로드의 조각화를 지원해야 합니다. 또한 MTU 크기를 패킹할 때 효율성을 높이기 위해 여러 IP 패킷을 단일 IP 패킷으로 연결하는 것도 지원되어야 합니다.\(SHOULD, SHOULD\)

---
### **4.11.  Configuring Network Middleboxes Based on Negotiated Protocols**

프레임워크는 클라이언트와 네트워크 간에 협상된 매개변수를 기반으로 무선 링크 휴면 타이머, 바인딩 만료 시간, 지원되는 MTU와 같은 최적의 설정을 식별할 수 있어야 하며, 이는 사용자 평면 프로토콜의 효율적인 작동을 위해 미들박스를 구성하는 데 사용될 수 있습니다. , 예를 들어 UDP와 TCP를 사용할 때 더 긴 바인딩 만료 시간으로 NAT를 구성합니다.\(SHOULD\)

---
### **4.12.  Policy-Based Optimal Path Selection**

프레임워크는 클라이언트에서의 정책 구현과 다양한 애플리케이션 요구 사항을 해결하는 네트워크 경로 선택을 위한 네트워크의 지침을 모두 지원해야 합니다.\(MUST\)

---
### **4.13.  Access-Technology-Agnostic Control Signaling**

제어 평면 시그널링은 기본 액세스 기술 절차에 의존해서는 안 됩니다. 즉, 애플리케이션 데이터처럼 사용자 평면에서 투명하게 전달됩니다. MAMS 프레임워크는 기존 인터넷 프로토콜\(예: TCP 또는 UDP\)을 통한 제어 평면 신호 전달을 지원해야 합니다.\(MUST NOT, SHOULD\)

---
### **4.14.  Service Discovery and Reachability**

프레임워크의 제어 평면 및 사용자 평면 기능 요소의 여러 인스턴스가 있을 수 있으며, 별도의 네트워크 요소에 함께 배치되거나 호스팅되고 사용 가능한 사용자 평면 경로를 통해 도달할 수 있습니다. 클라이언트는 네트워크에서 적절한 제어 평면 인스턴스를 선택하고 원하는 사용자 평면 기능 요소 인스턴스를 선택하기 위해 제어 평면 신호를 사용할 수 있는 유연성을 가져야 합니다. 클라이언트의 선택은 네트워크 기능에 도달할 수 있는 링크의 품질, 클라이언트 기본 설정, 사전 구성 등과 같은 고려 사항을 기반으로 할 수 있지만 이에 국한되지는 않습니다.\(MUST\)

---
## **5.  Solution Principles**

이 문서에서는 업링크와 다운링크에 대한 액세스 및 핵심 네트워크 경로의 유연한 조합을 동적으로 선택하고 선택한 링크에 분산된 트래픽에 대한 사용자 평면 처리를 위한 MAMS\(다중 액세스 관리 서비스\) 프레임워크에 대해 설명합니다. 사용자 평면 경로, 액세스 및 코어 네트워크 연결은 업링크와 다운링크에 대해 독립적으로 선택할 수 있습니다. 예를 들어, 업링크용으로 선택한 네트워크 경로는 다운링크용 경로 선택에 어떤 제약도 적용하지 않습니다. 업링크 및 다운링크 네트워크 경로는 애플리케이션 요구 사항과 다양한 네트워크 연결의 특성 및 사용 가능한 리소스를 기반으로 선택할 수 있습니다. 예를 들어, 네트워크에서 클라이언트로 고대역폭 데이터를 전송하기 위한 다운링크로 Wi-Fi 연결을 선택할 수 있는 반면, 저대역폭 피드백을 애플리케이션 서버로 전달하기 위해 LTE 연결을 선택할 수 있습니다.

또한 액세스 네트워크 링크의 특성에 따라 서로 다른 네트워크 경로의 사용자 평면 패킷에 대해 서로 다른 처리가 필요할 수 있습니다. 사용자 평면 패킷을 보호하려면 Wi-Fi 링크에서는 암호화가 필요하지만 LTE 링크에서는 암호화가 필요하지 않습니다. NAT를 통한 클라이언트 및 네트워크 끝점 연결을 보장하려면 터널링이 필요합니다. 이러한 차별화된 사용자 평면 처리는 각 링크에 특정한 사용자 평면 프로토콜\(예: IPsec\)을 구성하여 수행할 수 있습니다.

MAMS 프레임워크는 네트워크와 클라이언트에서 명확하게 분리된 제어 및 사용자 평면 기능으로 구성됩니다. 제어 평면 프로토콜을 사용하면 애플리케이션 트래픽 전송을 위해 사용자 평면 프로토콜과 원하는 네트워크 경로를 구성할 수 있습니다. 제어 평면 메시지는 클라이언트와 네트워크의 피어 제어 평면 기능 요소 사이에 사용 가능한 네트워크 경로를 통해 사용자 평면 데이터로 전달됩니다. 다중 사용자 평면 경로는 다중 액세스 네트워크에 걸쳐 동적으로 분산되고 N-MADP에 의해 네트워크에 집계됩니다. 액세스 네트워크의 다양성은 애플리케이션 서버에 노출되지 않지만 이 프레임워크에 정의된 요소의 범위 내에서 유지됩니다. 이는 이동성 이벤트나 링크 특성 변경으로 인한 액세스 링크 변경에 반응해야 하는 애플리케이션 서버에 가해지는 부담을 줄여줍니다.

트래픽의 경로 선택 및 사용자 평면 처리는 \(1\) 클라이언트 및 네트워크 기능의 협상, \(2\) 링크 검색\(즉, 클라이언트의 사용자 평면 기능 요소 간의 링크 품질 확인\)을 기반으로 합니다. 그리고 네트워크\). 이 프레임워크를 사용하면 네트워크 인텔리전스를 활용하여 클라이언트 및 네트워크 기능, 애플리케이션 요구 사항, 네트워크 상태에 대한 지식을 기반으로 최상의 액세스 네트워크 경로 조합을 설정하고 동적으로 구성할 수 있습니다.

---
## **6.  MAMS Reference Architecture**

그림 1은 클라이언트가 여러\(n\) 네트워크에서 서비스를 받는 시나리오에 대한 MAMS 아키텍처를 보여줍니다. 또한 다음과 같은 기능 요소를 소개합니다.

\* 제어 평면의 NCM 및 CCM.

\* 사용자 평면의 N-MADP 및 C-MADP.

```text
        +--------------------------------------------------------+
        |          +----------------+       +----------------+   |
        |          |                |       |                |   |
        |          |Core (IP anchor)| ..... |Core (IP anchor)|   |
        |          |Network 1       |       |Network "n"     |   |
        |          |                |       |                |   |
        |          +----------------+       +----------------+   |
        |                           \             /              |
        |                     Anchor \  ...... Anchor            |
        |                     Connection 1     Connection "n"    |
        |                              \       /                 |
        |              +---------------+\+---+/+------+          |
        |              | +-----+      +----------+    |          |
        | +--------------| NCM |      |  N-MADP  |    |          |
        | |            | +-----+      +----------+    |          |
        | |            +------------------------------+          |
        | |                           /           \              |
        | |Control-Plane       Delivery  ...... Delivery         |
        | |Path (over any      Connection 1     Connection "n"   |
        | |access user plane)      /                 \           |
        | |                       /                   \          |
        | |       +------------------+        +---------------+  |
        | |       |    Access        | ...... | Access        |  |
        | |       |    Network 1     |        | Network "n"   |  |
        | |       +------------------+        +---------------+  |
        +-----------------------------\----------------/---------+
          |                            \              /
          |                  +----------\------------/-+
          |                  | +---+     \ +------+ /  |
          +--------------------+CCM|      \|C-MADP|/   |
                             | +---+       +------+    |
                             |       Client            |
                             +-------------------------+

                   Figure 1: MAMS Reference Architecture
```

NCM은 MAMS 제어 평면 절차를 처리하는 네트워크의 기능 요소입니다. 사용 가능한 액세스 네트워크 경로, 프로토콜 및 사용자 평면 트래픽 처리 규칙을 사용하기 위해 클라이언트와 협상하는 등 네트워크\(N-MADP\) 및 클라이언트\(C-MADP\) 사용자 평면 기능을 구성합니다. 링크 모니터링 절차로. NCM과 CCM 간의 제어 평면 메시지는 기본 액세스 네트워크에 영향을 주지 않고 사용자 평면에서 오버레이로 전송됩니다.

CCM은 MAMS 제어 평면 절차를 처리하기 위한 클라이언트의 피어 기능 요소입니다. 클라이언트에서 여러 네트워크 연결을 관리합니다. CCM은 NCM과 MAMS 시그널링 메시지를 교환하여 사용자 데이터 패킷 전송을 위한 UL 및 DL 사용자 네트워크 경로 구성, 링크 프로빙 결과를 보고함으로써 NCM의 네트워크 경로 적응적 선택 등의 기능을 지원합니다. 다운링크에서는 클라이언트가 수신한 사용자 데이터에 대해 패킷이 클라이언트의 적절한 애플리케이션에 도달할 수 있도록 애플리케이션 데이터 패킷이 모든 액세스 링크를 통해 수신될 수 있도록 C-MADP를 구성합니다. 업링크에서는 클라이언트가 전송한 데이터에 대해 NCM이 전달한 로컬 정책과 네트워크 정책의 조합을 기반으로 업링크 데이터에 사용할 최상의 액세스 링크를 결정하도록 C-MADP를 구성합니다.

N-MADP는 여러 네트워크 경로를 통한 사용자 데이터 트래픽 전달은 물론 기타 사용자 평면 기능\(예: 캡슐화, 단편화, 연결, 재정렬, 재전송\)을 처리하는 네트워크의 기능 요소입니다. N-MADP는 \(1\) 업링크 사용자 평면 트래픽을 코어 네트워크를 향한 적절한 앵커 연결로 라우팅하고 \(2\) 적절한 전달 연결을 통해 클라이언트로 다운링크 사용자 트래픽을 라우팅하는 배포 노드입니다. 다운링크에서 NCM은 사용자 데이터 트래픽을 전송하기 위해 N-MADP에서 전달 연결 및 사용자 평면 프로토콜의 사용을 구성합니다. N-MADP는 다운링크 트래픽에 대한 ECMP 지원을 구현해야 합니다. 또는 ECMP 기능이 있는 라우터에 연결될 수도 있습니다. N-MADP의 로드 밸런싱 알고리즘은 특정 사용자 데이터 트래픽 유형에 대한 액세스 및 코어 경로 할당, 사용자 볼륨 기반 백분율 분포 및 링크 가용성과 같은 정적 및/또는 동적 네트워크 정책을 기반으로 NCM에 의해 구성됩니다. MAMS 신호 메시지를 클라이언트에서 CCM과 교환하여 얻은 피드백 정보입니다. N-MADP는 적절한 사용자 평면 프로토콜로 구성되어 전달 연결 전반에 걸쳐 흐름별 및 패킷별 트래픽 분산을 모두 지원할 수 있습니다. 업링크에서 N-MADP는 \(전송 연결을 통해\) 클라이언트로부터 수신된 사용자 데이터 트래픽을 전달할 적절한 앵커 연결을 선택합니다. N-MADP의 업링크 전달 규칙은 애플리케이션 요구 사항\(예: Wi-Fi 앵커를 통한 기업 호스팅 애플리케이션 흐름 또는 셀룰러 코어를 통한 모바일 운영자 호스팅 애플리케이션\)을 기반으로 NCM에 의해 구성됩니다.\(SHOULD, MAY\)

C-MADP는 MAMS 사용자 평면 데이터 절차를 처리하는 클라이언트의 기능 요소입니다. C-MADP는 NCM과의 신호 교환 및 클라이언트의 로컬 정책을 기반으로 CCM에 의해 구성됩니다. CCM은 NCM과 교환된 신호 메시지를 기반으로 업링크 사용자 데이터 트래픽에 사용할 전송 연결 선택 및 사용자 평면 프로토콜을 구성합니다. C-MADP 엔터티는 여러 전달 연결 및 관련 사용자 평면 기능\(예: 캡슐화, 조각화, 연결, 재정렬, 재전송\)을 통해 사용자 평면 데이터의 전달을 처리합니다.

NCM과 N-MADP는 서로 다른 네트워크 노드에 함께 배치되거나 인스턴스화될 수 있습니다. NCM은 네트워크에 여러 N-MADP 인스턴스를 설정할 수 있습니다. NCM은 클라이언트의 N-MADP 인스턴스 선택과 N-MADP 인스턴스 전반의 사용자 트래픽 배포 규칙을 제어합니다. 이는 다음 예제와 같은 여러 배포 시나리오에 유용합니다.

\* 클라이언트 간 로드 밸런싱을 위해 다양한 클라이언트 세트를 처리하는 다양한 N-MADP 인스턴스.

\* N-MADP가 액세스 에지 또는 코어 네트워크의 사용자 평면 노드에서 호스팅되는 반면 NCM은 액세스 에지 노드에서 호스팅되는 네트워크 토폴로지입니다.

\* LTE 및 DSL 네트워크 전반에 걸쳐 트래픽 분산을 관리하기 위해 핵심 네트워크 노드에 N-MADP 인스턴스가 있고, LTE 및 Wi-Fi 네트워크 전반에 걸쳐 트래픽 분산을 관리하기 위해 액세스 네트워크 노드에 N-MADP 인스턴스가 있는 액세스 네트워크 기술 아키텍처입니다.

\* 단일 클라이언트는 여러 N-MADP를 사용하도록 구성될 수 있습니다.

- 인스턴스. 이는 다양한 애플리케이션 요구 사항을 해결하는 데 유용합니다. 예를 들어 TCP 및 UDP 전송을 기반으로 하는 트래픽을 처리하려면 별도의 N-MADP 인스턴스를 사용하세요.

따라서 MAMS 아키텍처는 여러 네트워크 배포를 유연하게 처리합니다.

---
## **7.  MAMS Protocol Architecture**

이 섹션에서는 MAMS 사용자 평면 및 제어 평면 기능 요소의 프로토콜 구조를 설명합니다.

---
### **7.1.  MAMS Control-Plane Protocol**

그림 2는 기본 MAMS 제어 평면 프로토콜 스택을 보여줍니다. WebSocket \[RFC6455\]은 NCM과 CCM 간에 관리 및 제어 메시지를 전송하는 데 사용됩니다.

```text
               +------------------------------------------+
               |                                          |
               |    Multi-Access (MX) Control Message     |
               |                                          |
               +------------------------------------------+
               |                                          |
               |                WebSocket                 |
               |                                          |
               +------------------------------------------+
               |                                          |
               |                 TCP/TLS                  |
               |                                          |
               +------------------------------------------+

           Figure 2: TCP-Based MAMS Control-Plane Protocol Stack
```

---
### **7.2.  MAMS User-Plane Protocol**

그림 3은 사용자 페이로드\(예: IP PDU\)를 전송하기 위한 MAMS 사용자 평면 프로토콜 스택을 보여줍니다.

```text
          +-----------------------------------------------------+
          |   User Payload, e.g., IP Protocol Data Unit (PDU)   |
          +-----------------------------------------------------+

       +-----------------------------------------------------------+
       |  +-----------------------------------------------------+  |
       |  | Multi-Access (MX) Convergence Layer                 |  |
       |  +-----------------------------------------------------+  |
       |  +-----------------------------------------------------+  |
       |  | MX Adaptation   | MX Adaptation   | MX Adaptation   |  |
       |  | Layer           | Layer           | Layer           |  |
       |  | (optional)      | (optional)      | (optional)      |  |
       |  +-----------------+-----------------+-----------------+  |
       |  | Access #1 IP    | Access #2 IP    | Access #3 IP    |  |
       |  +-----------------------------------------------------+  |
       |                            MAMS User-Plane Protocol Stack |
       +-----------------------------------------------------------+

                  Figure 3: MAMS User-Plane Protocol Stack
```

MAMS 사용자 평면 프로토콜은 다음 두 계층으로 구성됩니다.

\* 다중 액세스\(MX\) 융합 계층: MAMS 프레임워크는 사용자 평면에서 다중 액세스 관련 작업을 수행하도록 융합 계층을 구성합니다. 이 계층은 액세스\(경로\) 선택, 다중 링크\(경로\) 통합, 분할/재정렬, 무손실 전환, 단편화 또는 연결과 같은 기능을 수행합니다. MX 수렴 계층은 MPTCP \[RFC6824\] 또는 다중 경로 QUIC\(MPQUIC\) \[QUIC-MULTIPATH\]와 같은 기존 사용자 평면 프로토콜을 사용하거나 GRE \[RFC2784\] \[RFC2890\] 또는 Generic과 같은 캡슐화 헤더/트레일러 체계를 적용하여 구현할 수 있습니다. 다중 액세스\(GMA\) \[INTAREA-GMA\].

\* 다중 액세스\(MX\) 적응 계층: MAMS 프레임워크는 사용자 평면의 도달 가능성 및 보안과 같은 전송 네트워크 관련 측면을 처리하도록 적응 계층을 구성합니다. 이 계층은 터널링, 네트워크 계층 보안 및 NAT를 처리하는 기능을 수행합니다. MX 적응 계층은 IPsec, DTLS \[RFC6347\] 또는 클라이언트 NAT\(N-MADP \[INTAREA-MAMS\]에서 역 매핑을 사용하는 클라이언트의 소스 NAT\)를 사용하여 구현할 수 있습니다. MX 적응 계층은 선택 사항이며 각 액세스 링크에 대해 독립적으로 구성될 수 있습니다. 예를 들어, LTE\(보안된 것으로 가정\) 및 Wi-Fi\(보안되지 않은 것으로 가정\) 배포에서는 LTE 링크에 대해 MX 적응 계층을 생략할 수 있지만 Wi-Fi 링크를 보호하기 위해 IPsec로 구성됩니다. MAMS 사용자 평면에 대한 자세한 내용은 \[INTAREA-MAMS\]에 제공됩니다.\(MAY\)

---
## **8.  MAMS Control-Plane Procedures**
---
### **8.1.  Overview**

CCM과 NCM은 클라이언트와 네트워크에서 각각 C-MADP와 N-MADP를 통해 사용자 평면 기능을 구성하기 위해 신호 메시지를 교환합니다. 초기 검색 메시지를 보내기 위해 CCM이 NCM 자격 증명\(FQDN\(정규화된 도메인 이름\) 또는 IP 주소\)을 얻는 방법은 이 문서의 범위를 벗어납니다. 예를 들어, 클라이언트는 프로비저닝이나 DNS 쿼리와 같은 방법을 사용하여 NCM 자격 증명을 얻을 수 있습니다. 검색 프로세스가 성공하면 \(초기\) NCM은 후속 제어 전송을 위해 MX Discover 메시지에서 수신된 MCC\(모바일 국가 코드\)/MNC\(모바일 네트워크 코드\) 튜플 정보를 기반으로 추가 NCM 주소를 업데이트하고 할당할 수 있습니다. - 비행기 메시지.

CCM은 NCM과 기능을 발견하고 교환합니다. NCM은 N-MADP 엔드포인트의 자격 증명을 제공하고 CCM과 사용자 평면에 대한 매개변수를 협상합니다. CCM은 자격 증명\(예: \(MPTCP/UDP\) 프록시 IP 주소 및 포트, 관련 코어\)을 기반으로 N-MADP와의 사용자 평면 경로\(예: MPTCP/UDP 프록시 연결\)를 설정하도록 C-MADP를 구성합니다. 네트워크 경로\) 및 NCM과 교환된 매개변수입니다. 또한 NCM과 CCM은 링크 상태 정보를 교환하여 트래픽 조정 및 사용자 평면 처리를 동적 네트워크 조건에 맞게 조정합니다. 주요 절차는 다음 하위 섹션에 자세히 설명되어 있습니다.

```text
                     +-----+                 +-----+
                     | CCM |                 | NCM |
                     +--+--+                 +--+--+
                        |     Discovery and     |
                        |     Capability        |
                        |     Exchange          |
                        |<--------------------->|
                        |                       |
                        |     Setup of          |
                        |     User-Plane        |
                        |     Protocols         |
                        |<--------------------->|
                        |                       |
                        |     Path Quality      |
                        |     Estimation        |
                        |<--------------------->|
                        |                       |
                        | Network Capabilities  |
                        | e.g., RNIS [ETSIRNIS] |
                        |<----------------------|
                        |                       |
                        |   Network Policies    |
                        |<----------------------|
                        +                       +

           "RNIS" stands for "Radio Network Information Service"

                  Figure 4: MAMS Control-Plane Procedures
```

---
### **8.2.  Common Fields in MAMS Control Messages**

각 MAMS 제어 메시지는 다음과 같은 공통 필드로 구성됩니다.

\* 버전: MAMS 제어 프로토콜의 버전을 나타냅니다.

\* 메시지 유형: 메시지 유형을 나타냅니다\(예: MX\).

- 검색, MX 기능 요청\(REQ\)/응답\(RSP\).

\* 시퀀스 번호: 특정 메시지 교환\(예: MX 기능 요청/응답\)을 고유하게 식별하기 위해 자동으로 증가하는 정수입니다.

---
### **8.3.  Common Procedures for MAMS Control Messages**

이 섹션에서는 MAMS 제어 메시지의 일반적인 절차를 설명합니다.

---
#### **8.3.1.  Message Timeout**

MAMS 제어 메시지를 보낸 후 MAMS 제어 평면 피어\(NCM 또는 CCM\)는 응답이 예상되는 경우 시간 초과되기 전에 MAMS\_TIMEOUT ms 동안 기다립니다. 메시지 발신자는 응답이 수신되지 않으면 실패를 선언하기 전에 MAMS\_RETRY 시간 동안 메시지를 재전송합니다. 실패는 MAMS 피어가 작동하지 않거나 연결할 수 없음을 의미하며 발신자는 기본 비다중 액세스/단일 경로 모드로 되돌아갑니다. CCM은 MAMS 세션을 재설정하기 위해 MAMS 발견 절차를 시작할 수 있습니다.

---
#### **8.3.2.  Keep-Alive Procedure**

MAMS 제어 평면 피어는 연결 유지 절차를 실행하여 다른 피어에 연결할 수 있는지 확인하고 데드 피어 시나리오에서 복구합니다. 각 MAMS 제어 평면 엔드포인트는 MAMS\_KEEP\_ALIVE\_TIMEOUT 기간 동안 설정된 Keep-Alive 타이머를 유지 관리합니다. Keep-Alive 타이머는 피어가 MAMS 제어 메시지를 받을 때마다 재설정됩니다. Keep-Alive 타이머가 만료되면 MX Keep-Alive 요청이 전송됩니다.

연결 유지 절차에 사용되는 MAMS\_RETRY 및 MAMS\_KEEP\_ALIVE\_TIMEOUT 매개 변수의 값은 배포에 따라 다르며 이를 얻는 방법은 이 문서의 범위를 벗어납니다. 예를 들어 클라이언트와 네트워크는 프로비저닝을 사용하여 값을 얻을 수 있습니다. MX Keep-Alive 요청을 수신하면 수신자는 MX Keep-Alive 응답으로 응답합니다. 보낸 사람이 MX 연결 유지 요청의 MAMS\_RETRY 재시도에 대한 응답으로 MAMS 제어 메시지를 받지 못한 경우 MAMS 피어는 해당 피어가 작동하지 않거나 연결할 수 없다고 선언합니다. CCM은 MAMS 세션을 재설정하기 위해 MAMS 발견 절차를 시작할 수 있습니다.\(MAY\)

추가적으로, CCM은 한 기지국/액세스 포인트에서 다른 기지국/액세스 포인트로의 핸드오버를 감지할 때마다 즉시 MX Keep-Alive 요청을 NCM에 보내야 합니다. 이 시간 동안 클라이언트는 NCM으로부터 MX Keep-Alive 응답을 수신할 때까지 업링크 방향에서 MAMS 사용자 평면 기능 사용을 중지해야 합니다.\(MUST, MUST\)

MX 연결 유지 요청에는 다음 정보가 포함됩니다.

\* 이유: 타임아웃 또는 핸드오버가 발생할 수 있습니다. 핸드오버는 핸드오버 감지 시에만 CCM에 의해 사용됩니다.

```text
   *  Unique Session ID: See Section 8.4.
```

\* 연결 ID: 핸드오버 사유인 경우 필수 입력 항목입니다.

\* Delivery Node ID: 클라이언트가 연결된 노드의 ID입니다. LTE의 경우 E-UTRAN ECGI\(Cell Global Identifier\)이다. Wi-Fi의 경우 AP ID 또는 MAC\(Media Access Control\) 주소입니다. 이유가 "Handover"인 경우 이 필드를 필수로 포함해야 합니다.

---
### **8.4.  Discovery and Capability Exchange**

그림 5는 MAMS 검색 및 기능 교환 절차를 보여줍니다.

```text
      CCM                                                  NCM
       |                                                    |
       |------- MX Discover Message ----------------------->|
       |                                         +-----------------+
       |                                         | Learn CCM       |
       |                                         | IP address      |
       |                                         | and port        |
       |                                         +-----------------+
       |                                                    |
       |<----------------------------- MX System Info ------|
       |                                                    |
       |------------------------------ MX Capability REQ -->|
       |<----- MX Capability RSP ---------------------------|
       |------------------------------ MX Capability ACK -->|
       |                                                    |
       +                                                    +

       Figure 5: MAMS Control Procedure for Discovery and Capability
                                  Exchange
```

이 절차는 다음과 같은 주요 단계로 구성됩니다.

1단계\(검색\): CCM은 MX 시스템 정보 메시지가 승인으로 수신될 때까지 미리 정의된\(NCM\) IP 주소/포트로 MX Discover 메시지를 주기적으로 보냅니다.

\* MX Discover 메시지에는 다음 정보가 포함됩니다.

```text
      -  MAMS Version.
```

- - 모바일 국가 코드\(MCC\) / 모바일 네트워크 코드\(MNC\) 튜플: \[ITU-E212\]에 지정된 형식을 준수하여 클라이언트가 가입된 사업자 네트워크를 식별하는 선택적 매개변수입니다.

\* MX 시스템 정보 메시지에는 다음 정보가 포함됩니다.

- - 앵커 연결 수.

- 각 앵커 연결에 대해 다음 매개변수가 포함됩니다.

- o 연결 ID: 앵커 연결의 고유 식별자입니다.

```text
         o  Connection Type (e.g., Wi-Fi, 5G NR, MulteFire, LTE).
```

- o NCM 끝점 주소\(이 연결을 통한 제어 평면 메시지용\):

- + IP 주소 또는 FQDN

```text
            +  Port Number
```

2단계\(능력 교환\): CCM은 MX System Info 메시지로부터 IP 주소와 포트를 학습합니다. 그런 다음 다음 매개변수가 포함된 MX Capability REQ 메시지를 보냅니다.

\* MX 기능 활성화 목록: 무손실 스위칭, 단편화, 연결, 업링크 집계, 다운링크 집계, 측정, 프로빙 등 해당 기능의 지원 여부를 나타냅니다.

\* 앵커 연결 수\(핵심 네트워크\).

- 각 앵커 연결에 대해 다음 매개변수가 포함됩니다.

```text
      -  Connection ID

      -  Connection Type (e.g., Wi-Fi, 5G NR, MulteFire, LTE)
```

\* 배달 연결\(액세스 링크\) 수.

- 각 배송 연결에는 다음 매개변수가 포함됩니다.

```text
      -  Connection ID

      -  Connection Type (e.g., Wi-Fi, 5G NR, MulteFire, LTE)

   *  MX Convergence Method Support List:

      -  GMA

      -  MPTCP Proxy

      -  GRE Aggregation Proxy

      -  MPQUIC

   *  MX Adaptation Method Support List:
```

- - DTLS가 없는 UDP

- - DTLS를 사용한 UDP

```text
      -  IPsec [RFC3948]

      -  Client NAT
```

이에 대한 응답으로 NCM은 CCM 세션에 대한 고유 ID를 생성하고 다음 정보를 포함하는 MX 기능 응답을 보냅니다.

\* MX 기능 활성화 목록: Lossless Switching, Fragmentation, Concatenation, Uplink Aggregation, Downlink Aggregation, Measurement, Probing 등 해당 기능의 활성화 여부를 나타냅니다.

\* 앵커 연결 수\(핵심 네트워크\):

- 각 앵커 연결에 대해 다음 매개변수가 포함됩니다.

```text
      -  Connection ID

      -  Connection Type (e.g., Wi-Fi, 5G NR, MulteFire, LTE)
```

\* 전달 연결 수\(액세스 링크\):

- 각 배송 연결에는 다음 매개변수가 포함됩니다.

```text
      -  Connection ID

      -  Connection Type (e.g., Wi-Fi, 5G NR, MulteFire, LTE)

   *  MX Convergence Method Support List:

      -  GMA

      -  MPTCP Proxy

      -  GRE Aggregation Proxy

      -  MPQUIC

   *  MX Adaptation Method Support List:
```

- - DTLS가 없는 UDP

- - DTLS를 사용한 UDP

```text
      -  IPsec [RFC3948]

      -  Client NAT
```

\* 고유 세션 ID: 연결을 설정하는 CCM의 고유 세션 식별자입니다. 세션이 이미 존재하는 경우 기존 고유 세션 식별자가 반환됩니다.

- - NCM ID: 사업자 네트워크 내 NCM의 고유 ID입니다.

- - 세션 ID: 이 NCM 인스턴스에 의해 CCM 인스턴스에 할당된 고유 ID입니다.

MX 기능 응답에 대한 응답으로 CCM은 MX 기능 확인을 통해 확인\(또는 거부\)을 보냅니다. MX 기능 승인에는 다음 매개변수가 포함됩니다.

\* 고유 세션 ID: MX 기능 응답에 제공된 식별자와 동일한 식별자입니다.

\* 승인\(Acknowledgement\): 클라이언트가 기능 교환 단계를 수락했는지 거부했는지 여부를 나타냅니다.

- - MX ACCEPT: CCM은 NCM이 제안한 기능 집합을 수락합니다.

- - MX REJECT: CCM은 NCM이 제안한 기능 세트를 거부합니다.

NCM이 MX\_REJECT를 수신하면 현재 MAMS 세션이 종료됩니다.

CCM이 더 이상 현재 기능을 계속할 수 없는 경우 MAMS 세션을 종료하기 위해 MX 세션 종료 요청을 보내야 합니다. 이에 대한 응답으로 NCM은 MX 세션 종료 응답을 보내 종료를 확인해야 합니다.\(SHOULD, SHOULD\)

---
### **8.5.  User-Plane Configuration**

그림 6은 사용자 평면\(UP\) 구성 절차를 보여줍니다.

```text
        CCM                                              NCM
         |                                                |
         |---- MX Reconfiguration REQ (setup) ----------->|
         |<-------------------- MX Reconfiguration RSP ---|
         |                                  +-------------------------+
         |                                  | NCM prepares N-MADP for |
         |                                  | User-Plane Setup        |
         |                                  +-------------------------+
         |<-------------------- MX UP Setup Config -------|
         |---- MX UP Setup Confirmation ----------------->|
    +-------------------+                                 |
    |Link "X" is up/down|                                 |
    +-------------------+                                 |
         |---- MX Reconfiguration REQ (update/release) -->|
         |<-------------------- MX Reconfiguration RSP ---|

       Figure 6: MAMS Control Procedure for User-Plane Configuration
```

이 절차는 다음 두 가지 주요 단계로 구성됩니다.

\* 재구성: CCM은 클라이언트 연결의 변경 사항\(새 연결 설정, 기존 연결 해제 또는 기존 연결과 관련된 매개변수 업데이트\)에 대해 NCM에 알립니다. 이는 연결 구성에 대한 업데이트를 요청하여 절차를 트리거하는 클라이언트와 NCM의 응답으로 구성됩니다.

\* UP 설정: NCM은 클라이언트와 네트워크에서 사용자 평면 프로토콜을 구성합니다. NCM은 MX UP 설정 구성 요청을 클라이언트에 전송하여 UP 설정을 시작합니다. 클라이언트는 CNF\(사용자 평면 설정 확인\) 메시지를 사용하여 상호 허용 가능한 매개변수 집합을 확인합니다.

이러한 단계는 다음과 같이 자세히 설명됩니다.

재구성: 클라이언트가 링크가 작동/중단되거나 IP 주소가 변경되었음을 감지하면\(예: 클라이언트 OS에서 제공하는 API를 통해\) CCM은 연결을 설정, 업데이트 또는 해제하기 위해 MX 재구성 요청을 보냅니다. 메시지에는 다음 정보가 포함되어야 합니다.\(SHOULD\)

\* 고유 세션 ID: NCM에서 기능 교환 단계 동안 NCM에 의해 생성된 CCM의 ID입니다.

\* 재구성 동작: 재구성 동작\(릴리스, 설정 또는 업데이트\)을 나타냅니다.

\* 연결 ID: 재구성할 연결을 식별합니다.

재구성 작업이 "설정" 또는 "업데이트"로 설정된 경우 메시지에는 다음 매개변수가 포함됩니다.

\* 연결의 IP 주소.

\* SSID\(Wi-Fi 연결의 서비스 세트 식별자\).

\* 연결의 MTU: N-MADP에서 단편화 및 연결 절차\[INTAREA-MAMS\]를 구성하기 위해 NCM이 사용하기 위해 클라이언트에서 계산되는 전달 경로의 MTU입니다.

\* Delivery Node ID: 클라이언트가 연결된 노드의 ID입니다. LTE의 경우 ECGI이다. Wi-Fi의 경우 AP ID 또는 MAC 주소입니다.

연결 설정이 시작될 때 CCM은 재구성 작업이 "설정"으로 설정된 MX 재구성 요청을 사용하여 NCM에 연결 상태를 알립니다. NCM은 아래 설명된 대로 연결 설정 상태를 확인하고 사용자 평면 설정을 위해 CCM과 매개변수를 교환합니다.

사용자 평면 프로토콜 설정: NCM은 협상된 기능을 기반으로 N-MADP에서 사용자 평면\(Adaptation Layer 및 Convergence Layer\) 프로토콜을 설정하고 N-MADP에서 설정할 사용자 평면 프로토콜을 CCM에 알립니다. 클라이언트\(C-MADP\)와 C-MADP가 N-MADP에 연결하기 위한 매개변수입니다.

MX UP 설정 구성 요청은 하나 이상의 MADP 인스턴스를 생성하는 데 사용되며, 각 앵커 연결에는 하나 이상의 구성, 즉 MX 구성이 있습니다. MX UP 설정 구성 요청은 다음 매개변수로 구성됩니다.

\* 앵커 연결 수\(핵심 네트워크\).

- 각 앵커 연결에 대해 다음 매개변수가 포함됩니다.

```text
      -  Anchor Connection ID

      -  Connection Type (e.g., Wi-Fi, 5G NR, MulteFire, LTE)
```

- - 활성 MX 구성 수\(앵커 연결에 대해 둘 이상의 MX 구성이 활성화된 경우에만 포함됨\).

- 각 활성 MX 구성에는 다음 매개변수가 포함됩니다.

```text
         o  MX Configuration ID (included if more than one MX
            configuration is present)
```

-o MX 수렴 방법. 다음 중 하나:

```text
            +  GMA

            +  MPTCP Proxy

            +  GRE Aggregation Proxy

            +  MPQUIC

         o  MX Convergence Method Parameters:

            +  Convergence Proxy IP Address

            +  Convergence Proxy Port

            +  Client Key
```

- o MX 수렴 제어 매개변수\(MX 제어 PDU 유형\(예: Probe-REQ/ACK\)이 지원되는 경우 포함\):

```text
            +  UDP port number for sending and receiving MX Control PDUs
               (e.g., Probe-REQ/ACK, Keep-Alive)

            +  Convergence Proxy Port
```

- o 배달 연결 수.

- 각 배송 연결에는 다음이 포함됩니다.

```text
            +  Delivery Connection ID

            +  Connection Type (e.g., Wi-Fi, 5G NR, MulteFire, LTE)
```

- + MX 적응 방법. 다음 중 하나:

- \* DTLS가 없는 UDP

- \* DTLS를 사용한 UDP

```text
               *  IPsec

               *  Client NAT

            +  MX Adaptation Method Parameters:

               *  Tunnel Endpoint IP Address

               *  Tunnel Endpoint Port

               *  Shared Secret

               *  Header Optimization (included only if the MX
                  Convergence Method is GMA)
```

예를 들어, LTE와 Wi-Fi가 두 가지 사용자 평면 액세스인 경우 NCM은 다음 매개변수를 사용하여 IPsec을 Wi-Fi 액세스를 통해 MX 적응 계층으로 설정해야 함을 CCM에 전달합니다. 주소 및 사전 공유 키. NAT 없이 안전하다고 간주되는 경우 적응 계층이 필요하지 않습니다. 또는 클라이언트 NAT가 LTE 액세스를 통해 사용될 수 있습니다.

마찬가지로, MX 수렴 방법의 예로서 구성은 MPTCP 프록시에 대한 연결 매개변수, 즉 TCP 애플리케이션용 MPTCP 프록시의 IP 주소 및 포트와 함께 MPTCP 프록시로서의 수렴 방법을 나타냅니다.

사용자 평면 프로토콜이 구성되면 CCM은 MX UP 설정 확인을 통해 NCM에 상태를 알립니다. MX UP 설정 확인은 다음 매개변수로 구성됩니다.

\* 고유 세션 ID: MX 기능 응답에서 클라이언트에 제공되는 세션 식별자입니다.

\* MX 수렴 제어 매개변수\(MX 제어 PDU 유형\(예: Probe-REQ/ACK, Keep-Alive\)이 지원되는 경우 포함\):

```text
      -  UDP port number for sending and receiving MX Control PDUs
         (e.g., Probe-REQ/ACK, Keep-Alive)

      -  MX Configuration ID (if an MX Configuration ID is specified in
         an MX UP Setup Configuration Request) to indicate the MX
         Configuration that will be used for probing)

   *  Client Adaptation-Layer Parameters:
```

- - 전달 연결 수.

- 각 배송 연결에는 다음이 포함됩니다.

```text
         o  Delivery Connection ID
```

- o UDP 포트 번호: UDP 기반 적응을 사용하는 경우 C-MADP 측의 UDP 포트

---
### **8.6.  MAMS Path Quality Estimation**

경로 품질 추정은 수동적으로 또는 적극적으로 수행될 수 있습니다. 네트워크의 트래픽 측정은 클라이언트의 실시간 데이터 처리량과 네트워크에서 사용 가능한 용량을 비교하여 수동적으로 수행할 수 있습니다. NCM에 액세스 노드와의 인터페이스가 있는 특수 배포에서는 직접 인터페이스를 사용하여 경로 품질에 관한 정보를 수집할 수 있습니다. 예를 들어, 클라이언트가 연결된 LTE 액세스 노드\(Evolved Node B라고도 함\)의 활용도는 추가 트래픽 오버헤드를 생성하지 않고 경로 품질 추정을 위한 데이터로 사용될 수 있습니다. 클라이언트의 활성 측정은 경로 품질을 추정하는 대체 방법을 제공합니다.

```text
         CCM                                                  NCM
          |                                                    |
          |<-------------- MX Path Estimation Request ---------|
          |------ MX Path Estimation Results ----------------->|
          |                                                    |

     Figure 7: MAMS Control-Plane Procedure for Path Quality Estimation
```

NCM은 MX 경로 추정 요청에 포함된 다음 구성 매개변수를 CCM으로 보냅니다.

```text
   *  Connection ID (of the delivery connection whose path quality needs
      to be estimated)

   *  Init Probe Test Duration (ms)

   *  Init Probe Test Rate (Mbps)

   *  Init Probe Size (bytes)

   *  Init Probe-ACK Required (0 -> No / 1 -> Yes)

   *  Active Probe Frequency (ms)

   *  Active Probe Size (bytes)

   *  Active Probe Test Duration (ms)

   *  Active Probe-ACK Required (0 -> No / 1 -> Yes)
```

CCM은 이러한 매개변수를 기반으로 하는 프로브 수신과 다음 구성에 따른 통계 수집을 위해 C-MADP를 구성합니다.

\* 고유 세션 ID: MX 기능 응답에서 클라이언트에 제공되는 세션 식별자입니다.

```text
   *  Init Probe Results Configuration:

      -  Lost Probes (percent)

      -  Probe Receiving Rate (packets per second)

   *  Active Probe Results Configuration:
```

- - 마지막 프로브 기간의 평균 처리량

사용자 평면 프로빙은 초기화 단계와 활성 단계의 두 단계로 나뉩니다.

\* 초기화 단계: 사용자 데이터 전송을 위해 N-MADP에 포함되지 않은 네트워크 경로는 초기화 단계에 있는 것으로 간주됩니다. 사용자 데이터는 다른 사용 가능한 네트워크 경로를 통해 전송될 수 있습니다.

\* 활성 단계\(Active Phase\): 사용자 데이터 전송을 위해 N-MADP에 포함된 네트워크 경로는 활성 단계에 있는 것으로 간주됩니다.

초기화 단계에서 NCM은 Init Probe-REQ 메시지를 보내도록 N-MADP를 구성합니다. CCM은 C-MADP에서 Init Probe 통계를 수집하고 초기화 프로브 결과 구성에 따라 MX 경로 추정 결과 메시지를 NCM으로 보냅니다.

Active 단계에서 NCM은 Active Probe-REQ 메시지를 보내도록 N-MADP를 구성합니다. C-MADP는 활성 프로브 결과 구성에 지정된 대로 메트릭을 계산합니다. CCM은 C-MADP로부터 Active Probe 통계를 수집하고 Active Probe Results 구성에 따라 MX Path Estimation Results 메시지를 NCM으로 보냅니다.

다음 하위 섹션에서는 경로 품질 추정을 지원하기 위해 Keep-Alive 및 Probe-REQ/ACK 메시지에 대한 제어 PDU 인코딩을 정의합니다.

---
#### **8.6.1.  MX Control PDU Definition**

제어 PDU는 C-MADP와 N-MADP 간에 UDP 메시지로 전송되어 연결 유지 또는 경로 품질 추정을 위한 제어 메시지를 교환합니다. MX 프로브 매개변수는 사용자 평면 설정 단계\(MX UP 설정 구성 요청 및 MX UP 설정 확인\) 중에 협상됩니다. 그림 8은 다음 필드가 포함된 MX 제어 PDU 형식을 보여줍니다.

\* 유형\(1바이트\): MX Control 메시지의 유형입니다.

```text
      -  0: Keep-Alive

      -  1: Probe-REQ/ACK

      -  Others: Reserved
```

\* CID\(1바이트\) : MX Control 메시지 전송을 위한 전달 연결의 연결 ID입니다.

\* MX Control Message\(변수\): MX Control 메시지의 페이로드.

MX 제어 PDU는 품질과 도달 가능성을 결정해야 하는 원하는 전달 연결을 통해 일반 사용자 평면 패킷으로 전송됩니다.

```text
                            |                                          |
                            |<--------- MX Control PDU Payload ------->|
                            |                                          |
   +-----------+-------------------+-----+-----------------------------+
   | IP Header | UDP Header | Type | CID |       MX Control Message    |
   +-----------+-------------------+-----+-----------------------------+

                      Figure 8: MX Control PDU Format
```

---
#### **8.6.2.  Keep-Alive Message**

연결 유지 메시지의 경우 "유형" 필드는 "0"으로 설정됩니다. C-MADP는 하나 이상의 전달 연결을 통해 주기적으로 Keep-Alive 메시지를 보낼 수 있습니다. 특히 UDP 터널링이 경로의 NAT 기능을 사용하여 전달 연결에 대한 적응 방법으로 사용되는 경우 더욱 그렇습니다.

Keep-Alive 메시지는 길이가 2바이트이고 다음 필드로 구성됩니다.

\* Keep-Alive Sequence Number\(2바이트\): Keep-Alive 메시지의 시퀀스 번호입니다.

---
#### **8.6.3.  Probe-REQ/ACK Message**

Probe-REQ/ACK 메시지의 경우 "유형" 필드는 "1"로 설정됩니다. N-MADP는 경로 품질 추정을 위해 Probe-REQ 메시지를 보낼 수 있습니다. 이에 대한 응답으로 C-MADP는 Probe-ACK 메시지를 반환할 수 있다.

Probe-REQ 메시지는 다음 필드로 구성됩니다.

\* 프로빙 시퀀스 번호\(2바이트\): 프로브 REQ 메시지의 시퀀스 번호입니다.

```text
   *  Probing Flag (1 byte):
```

- - 비트 0: Probe-ACK 메시지가 예상되는지\(1\) 또는 예상되지 않는지\(0\)를 나타내는 Probe-ACK 플래그입니다.

- - Bit 1: 사용자 데이터 전송을 위한 네트워크 경로가 포함되지 않은 초기화 단계\(0\)에서 Probe-REQ/ACK 메시지가 전송되었는지, 아니면 사용자 데이터 전송을 위한 활성 단계\(1\)에서 전송되었는지를 나타내는 Probe Type 플래그입니다. 사용자 데이터 전송을 위해 네트워크 경로가 포함됩니다.

- - 비트 2: 역방향 연결 ID\(R-CID\) 필드의 존재를 나타내는 비트 플래그입니다.

```text
      -  Bits 3-7: Reserved.
```

\* Reverse Connection ID\(R-CID\)\(1byte\) : 역방향 경로로 Probe-ACK 메시지를 보내기 위한 전달 연결의 연결 ID이다.

```text
   *  Padding (variable).
```

"R-CID" 필드는 "프로빙 플래그" 필드의 비트 0과 비트 2가 모두 "1"로 설정된 경우에만 존재합니다. 또한, 비트 0이 "0"인 경우 "Probing Flag" 필드의 비트 2는 "0"으로 설정되어야 하며 이는 Probe-ACK 메시지가 예상되지 않음을 나타냅니다.\(SHOULD\)

"R-CID" 필드가 없지만 "Probing Flag" 필드의 비트 0이 "1"로 설정된 경우 Probe-ACK 메시지는 Probe-REQ 메시지와 동일한 전달 연결을 통해 전송되어야 합니다.\(SHOULD\)

"패딩" 필드는 Probe-REQ 메시지의 길이를 제어하는 ​​데 사용됩니다.

C-MADP는 Probe-ACK 플래그가 "1"로 설정된 Probe-REQ 메시지에 대한 응답으로 Probe-ACK 메시지를 보내야 합니다.\(SHOULD\)

Probe-ACK 메시지는 길이가 3바이트이고 다음 필드로 구성됩니다.

\* 프로빙 승인 번호\(2바이트\): 해당 Probe-REQ 메시지의 시퀀스 번호입니다.

---
### **8.7.  MAMS Traffic Steering**

```text
    CCM                                               NCM
     |                                                 |
     |                                +------------------------------+
     |                                |Steer user traffic to Path "X"|
     |                                +------------------------------+
     |<----------------- MX Traffic Steering REQ ------|
     |----- MX Traffic Steering RSP ------------------>|

                 Figure 9: MAMS Traffic-Steering Procedure
```

NCM은 데이터 트래픽을 조정하기 위해 MX 트래픽 조정 요청을 보냅니다. 여러 연결을 통해 동시에 데이터 트래픽을 보내는 것도 가능합니다\(즉, 집계\). 메시지에는 다음 정보가 포함됩니다.

\* 앵커 연결 ID: 앵커 연결의 연결 ID입니다.

\* MX 구성 ID\(MX UP 설치 구성 요청에 MX 구성 ID가 지정된 경우\).

\* DL Connection ID List: DL 전달 연결 목록으로, Connection ID로 제공됩니다.

\* UL 연결 ID: 기본 UL 전달 연결의 연결 ID입니다.

\* 특정 UL 트래픽 템플릿 수의 경우 메시지에는 다음이 포함됩니다.

- - UL 트래픽을 식별하기 위한 트래픽 흐름 템플릿입니다.

- - UL 연결 ID 목록: UL 트래픽 전송에 사용되는 연결 ID로 제공되는 UL 전달 연결 목록입니다.

\* MX 기능 활성화 목록. 각 매개변수는 무손실 스위칭, 단편화, 연결, 업링크 집계, 다운링크 집계, 측정, 프로빙 등 해당 기능의 활성화 여부를 나타냅니다.

이에 대한 응답으로 CCM은 다음 정보를 포함하여 MX 트래픽 조정 응답을 보냅니다.

\* 고유 세션 ID: MX 기능 응답에서 클라이언트에 제공되는 세션 식별자입니다.

\* MX 기능 활성화 목록. 각 매개변수는 무손실 스위칭, 단편화, 연결, 업링크 집계, 다운링크 집계, 측정, 프로빙 등 해당 기능의 활성화 여부를 나타냅니다.

---
### **8.8.  MAMS Application MADP Association**

```text
           CCM                                         NCM
            |                                           |
            |                        +-------------------------+
            |                        | Associate MADP instance |
            |                        | with application flow   |
            |                        +-------------------------+
            |---------- MX App MADP ------------------->|
            |           Association REQ                 |
            |                                           |
            |<----------------- MX App MADP ------------|
            |                   Association RSP         |

           Figure 10: MAMS Application MADP Association Procedure
```

CCM은 여러 활성 MX 구성이 있는 앵커 연결을 위해 특정 MADP 인스턴스 ID와 특정 애플리케이션 흐름의 연결을 요청하기 위해 MX 애플리케이션 MADP 연결 요청을 보냅니다. MADP 인스턴스 ID는 튜플\(앵커 연결 ID, MX 구성 ID\)입니다. 이는 클라이언트가 해당 흐름의 요구 사항에 따라 다양한 애플리케이션 흐름과 연결되어야 하는 사용자 평면 처리를 나타내는 기능을 제공합니다. 애플리케이션 흐름은 연관된 트래픽 흐름 템플릿으로 식별됩니다.

MX 애플리케이션 MADP 연결 요청에는 다음 정보가 포함됩니다.

\* 신청 흐름 수.

트래픽 흐름으로 식별되는 각 애플리케이션 흐름에 대해

- 템플릿:

```text
      -  Anchor Connection ID

      -  MX Configuration ID (if more than one MX configuration is
         associated with an anchor connection)
```

- - UL 트래픽 식별을 위한 트래픽 흐름 템플릿

- - DL 트래픽 식별을 위한 트래픽 흐름 템플릿

이에 대한 응답으로 NCM은 다음 정보를 포함하여 MX 애플리케이션 MADP 연관 응답을 보냅니다.

\* 신청 흐름 수.

트래픽 흐름으로 식별되는 각 애플리케이션 흐름에 대해

- 템플릿:

```text
      -  Status (Success or Failure)
```

---
### **8.9.  MAMS Network ID Indication**

```text
     CCM                                               NCM
      |                                                 |
      |                            +---------------------------------+
      |                            |NCM determines preferred networks|
      |                            +---------------------------------+
      |                                                 |
      |<----------------- MX SSID Indication -----------|
      |                                                 |

              Figure 11: MAMS Network ID Indication Procedure
```

NCM은 클라이언트가 연결해야 하는 네트워크에 관해 클라이언트를 안내하기 위해 기본 네트워크 목록을 CCM에 나타냅니다. 선호하는 Wi-Fi 네트워크를 나타내기 위해 NCM은 \[IEEE-80211\]에 정의된 대로 SSID\(Service Set Identifier\)/BSSID\(Basic Service Set Identifier\)/HESSID\(Homogeneous Extended Service Set Identifier\)로 표시되는 WLAN 목록을 전송합니다. \]\), MX SSID 표시에서 사용할 수 있습니다.

---
### **8.10.  MAMS Client Measurement Configuration and Reporting**

```text
             CCM                                               NCM
              |                                                 |
              |<--------------- MX Measurement Config ----------|
              |                                                 |
        +---------------------------------+                     |
        |Client ready to send measurements|                     |
        +---------------------------------+                     |
              |                                                 |
              |----- MX Measurement Report -------------------->|
              |                                                 |

       Figure 12: MAMS Client Measurement Configuration and Reporting
                                 Procedure
```

NCM은 클라이언트가 보고할 관련 임계값과 함께 다양한 매개변수\(예: 무선 링크 정보\)로 CCM을 구성합니다. MX 측정 구성 메시지에는 각 전달 연결에 대한 다음 매개변수가 포함되어 있습니다.

```text
   *  Delivery Connection ID.

   *  Connection Type (e.g., Wi-Fi, 5G NR, MulteFire, LTE).
```

\* 연결 유형이 Wi-Fi인 경우:

- - Wi-Fi 링크의 평균 RSSI\(수신 신호 강도 표시기\) 전송에 대한 높은 및 낮은 임계값입니다.

- - Wi-Fi 링크의 평균 RSSI 전송 주기\(ms\)입니다.

- - WLAN 시스템 로딩 전송을 위한 높고 낮은 임계값입니다.

- - WLAN 시스템 로딩을 보내는 주기\(ms\)입니다.

- - Wi-Fi 링크에서 역방향 링크 처리량을 보내기 위한 높고 낮은 임계값입니다.

- - Wi-Fi 링크에서 역방향 링크 처리량을 보내는 주기\(ms\)입니다.

- - Wi-Fi 링크에서 순방향 링크 처리량을 보내기 위한 높고 낮은 임계값입니다.

- - Wi-Fi 링크에서 순방향 링크 처리량을 보내는 주기\(ms\)입니다.

- - Wi-Fi 링크에서 역방향 링크 처리량\(\[IEEE-80211\]에 정의된 EstimatedThroughputOutbound\) 전송을 위한 높고 낮은 임계값입니다.

- - Wi-Fi 링크에서 역방향 링크 처리량\(\[IEEE-80211\]에 정의된 EstimatedThroughputOutbound\)을 전송하기 위한 주기\(ms\)입니다.

- - Wi-Fi 링크에서 순방향 링크 처리량\(\[IEEE-80211\]에 정의된 EstimatedThroughputInbound\) 전송을 위한 높고 낮은 임계값입니다.

- - Wi-Fi 링크에서 순방향 링크 처리량\(\[IEEE-80211\]에 정의된 EstimatedThroughputInbound\)을 전송하기 위한 주기\(ms\)입니다.

\* 연결 유형이 LTE인 경우:

- - 서비스 중인 LTE 링크의 RSRP\(참조 신호 수신 전력\) 전송에 대한 높은 및 낮은 임계값입니다.

- - 서비스 중인 LTE 링크의 RSRP를 전송하는 주기\(ms\)입니다.

- - 서비스 중인 LTE 링크의 RSRQ\(참조 신호 수신 품질\) 전송에 대한 높은 및 낮은 임계값입니다.

- - 서비스 중인 LTE 링크의 RSRP를 전송하는 주기\(ms\)입니다.

- - 서비스 제공 LTE 링크에서 역방향 링크 처리량을 전송하기 위한 높고 낮은 임계값입니다.

- - 서비스 제공 LTE 링크에서 역방향 링크 처리량을 전송하기 위한 주기\(ms\)입니다.

- 순방향 링크 전송을 위한 높고 낮은 임계값

- 서비스 제공 LTE 링크의 처리량.

- - 서비스 제공 LTE 링크에서 순방향 링크 처리량을 전송하기 위한 주기\(ms\)입니다.

\* 연결 유형이 5G NR인 경우:

- - 서빙 NR 링크의 RSRP 전송을 위한 높고 낮은 임계값입니다.

- - 서빙 NR 링크의 RSRP를 전송하기 위한 주기\(ms\)입니다.

- - 서비스 NR 링크의 RSRQ 전송을 위한 높고 낮은 임계값.

- - 서빙 NR 링크의 RSRP를 전송하기 위한 주기\(ms\)입니다.

- - 서빙 NR 링크에서 역방향 링크 처리량을 보내기 위한 높고 낮은 임계값입니다.

- - 서빙 NR 링크에서 역방향 링크 처리량을 전송하기 위한 주기\(ms\)입니다.

- - 서빙 NR 링크에서 순방향 링크 처리량을 보내기 위한 높고 낮은 임계값입니다.

- - 서빙 NR 링크에서 순방향 링크 처리량을 전송하기 위한 주기\(ms\)입니다.

MX 측정 보고서에는 다음 매개변수가 포함되어 있습니다.

\* 고유 세션 ID: MX 기능 응답에서 클라이언트에 제공되는 세션 식별자입니다.

\* 각 배송 연결에는 다음이 포함됩니다.

```text
      -  Delivery Connection ID

      -  Connection Type (e.g., Wi-Fi, 5G NR, MulteFire, LTE)
```

- - Delivery Node ID\(LTE의 경우 ECGI. Wi-Fi의 경우 AP ID 또는 MAC 주소입니다.\)

- - 연결 유형이 Wi-Fi인 경우:

- o Wi-Fi 링크의 평균 RSSI.

- o WLAN 시스템 로딩.

- o Wi-Fi 링크의 역방향 링크 처리량.

- o Wi-Fi 링크의 전달 링크 처리량.

o Wi-Fi 링크의 예상 역방향 링크 처리량

- \(\[IEEE-80211\]에 정의된 EstimatedThroughputOutbound\).

o Wi-Fi 링크의 예상 순방향 링크 처리량

- \(\[IEEE-80211\]에 정의된 대로 EstimatedThroughputInbound\).

- - 연결 유형이 LTE인 경우:

- o 서비스 제공 LTE 링크의 RSRP.

- o 서비스 제공 LTE 링크의 RSRQ.

- o 서비스 제공 LTE 링크의 역방향 링크 처리량.

- o 서비스 제공 LTE 링크의 순방향 링크 처리량.

- - 연결 유형이 5G NR인 경우:

- o 서빙 NR 링크의 RSRP.

- o 서빙 NR 링크의 RSRQ.

- o 서빙 NR 링크의 역방향 링크 처리량.

- o 서빙 NR 링크의 순방향 링크 처리량.

---
### **8.11.  MAMS Session Termination Procedure**

```text
             CCM                                  NCM
              |                                    |
              |---- MX Session Termination REQ --->|
              |                                    |
              |                                    |
              |<--- MX Session Termination RSP ----|
              |                                    |
              |                           +------------------+
              |                           | Remove Resources |
              |                           +------------------+
              |                                    |

    Figure 13: MAMS Session Termination Procedure - Initiated by Client

                     CCM                                  NCM
                      |                                    |
                      |<--- MX Session Termination REQ ----|
                      |                                    |
                      |                                    |
                      |---- MX Session Termination RSP --->|
                      |                                    |
             +------------------+                          |
             | Remove Resources |                          |
             +------------------+                          |
                      |                                    |

    Figure 14: MAMS Session Termination Procedure - Initiated by Network
```

MAMS 처리의 어느 시점에서든 CCM 또는 NCM이 더 이상 MAMS 기능을 지원할 수 없는 경우 둘 중 하나가 MX 세션 종료 요청을 피어에 전송하여 종료 절차를 시작할 수 있습니다. 피어는 MX 세션 종료 응답 메시지를 전송하여 종료를 승인해야 합니다. 세션 연결이 끊어진 후 CCM은 MX Discover 메시지를 사용하여 새로운 절차를 시작해야 합니다. MX 세션 종료 요청에는 고유 세션 ID와 종료 이유가 포함됩니다. 가능한 종료 이유는 다음과 같습니다.\(MUST, MUST\)

```text
   *  Normal Release
```

\* 피어로부터 응답 없음

```text
   *  Internal Error
```

---
### **8.12.  MAMS Network Analytics Request Procedure**

```text
                  CCM                                 NCM
                   |                                   |
                   |----- MX Network Analytics REQ --->|
                   |                                   |
                   |                                   |
                   |<--- MX Network Analytics RSP -----|
                   |                                   |

            Figure 15: MAMS Network Analytics Request Procedure
```

CCM은 MX 네트워크 분석 요청을 NCM에 전송하여 네트워크에서의 분석 적용을 기반으로 대역폭, 대기 시간, 지터, 신호 품질 등의 네트워크 매개변수와 관련된 정보를 요청합니다\(수신된 경로 측정 및 클라이언트 측정 보고 활용\). .

MX 네트워크 분석 요청은 다음 매개변수로 구성됩니다.

\* 링크 품질 지표. 다음 중 하나 이상:

```text
      -  Bandwidth

      -  Jitter

      -  Latency

      -  Signal Quality
```

NCM은 CCM이 관심을 가질 수 있는 분석 정보를 전달하기 위해 MX 네트워크 분석 응답을 보냅니다. 이 메시지에는 예상 가능성과 함께 네트워크 매개변수가 포함됩니다.

MX 네트워크 분석 응답은 다음 매개변수로 구성됩니다.

\* 배달 연결 수.

- 각 배송 연결에는 다음이 포함됩니다.

```text
      -  Access Link Identifier:

         o  Connection Type

         o  Connection ID

      -  Link Quality Indicator:

         o  Bandwidth:

            +  Predicted Value (Mbps)

            +  Likelihood (percent)

            +  Prediction Validity (Validity Time, in seconds)

         o  Jitter:

            +  Predicted Value (in seconds)

            +  Likelihood (percent)

            +  Prediction Validity (Validity Time, in seconds)

         o  Latency:

            +  Predicted Value (in seconds)

            +  Likelihood (percent)

            +  Prediction Validity (Validity Time, in seconds)

         o  Signal Quality:

            +  If delivery connection type is LTE, LTE_RSRP Predicted
               Value in decibel-milliwatts (dBm)

            +  If delivery connection type is LTE, LTE_RSRQ Predicted
               Value (dBm)

            +  If delivery connection type is 5G NR, NR_RSRP Predicted
               Value (dBm)

            +  If delivery connection type is 5G NR, NR_RSRQ Predicted
               Value (dBm)

            +  If delivery connection type is Wi-Fi, WLAN_RSSI Predicted
               Value (dBm)

            +  Likelihood (percent)

            +  Prediction Validity (Validity Time, in seconds)
```

---
## **9.  Generic MAMS Signaling Flow**

그림 16은 클라이언트와 네트워크 간의 네트워크 경로 및 흐름 프로토콜 협상을 위한 MAMS 신호 메커니즘을 보여줍니다. 이 예제 시나리오에서 클라이언트는 두 개의 네트워크\(LTE 및 Wi-Fi\)에 연결되어 있습니다.

```text
                          +--------------------------------------------+
                          |      MAMS-enabled Network of Networks      |
                          | +-------+   +-------+   +-----+   +------+ |
   +------------------+   | |       |   |       |   |     |   |      | |
   |      Client      |   | |Network|   |Network|   |     |   |      | |
   | +------+ +-----+ |   | |   1   |   |   2   |   | NCM |   |N-MADP| |
   | |C-MADP| | CCM | |   | | (LTE) |   |(Wi-Fi)|   |     |   |      | |
   | +------+ +-----+ |   | +-------+   +-------+   +-----+   +------+ |
   |    |        |    |   |     |           |          |          |    |
   ++---+--------+----+   +-----+-----------+----------+----------+----+
    |   |        |              |           |          |          |
    |   |        |              |           |          |          |
    |   |  1. Setup Connection  |           |          |          |
    |<-----------+------------->|           |          |          |
    |   |        |              |           |          |          |
    |   |        |  2. MAMS Capabilities Exchange      |          |
    |   |        |<-------------+-----------+--------->|          |
    |   |        |              |           |          |          |
    |   |  3. Setup Connection  |           |          |          |
    |<--+---------------------------------->|          |          |
    |   |        |              |           |          |          |
    | 4c. Config | 4a. Negotiate network paths,        |4b. Config|
    |   | C-MADP |     Flow protocol, and parameters   |    N-MADP|
    |   |<------>|<-------------+-----------+--------->|<-------->|
    |   |        |              |           |          |          |
    |   |        | 5. Establish user-plane path according         |
    |   |        |    to selected flow protocol        |          |
    |   |<----------------------+-----------+-------------------->|
    |   |        |              |           |          |          |
    +   +        +              +           +          +          +

                         Figure 16: MAMS Call Flow
```

1. 클라이언트는 네트워크 1에 연결하고 네트워크 1에서 할당한 IP 주소를 얻습니다.

2. CCM은 네트워크 1 연결을 통해 NCM 기능 요소와 통신하고 MAMS 작동을 위한 기능과 매개변수를 교환합니다. 참고: NCM 자격 증명\(예: NCM의 IP 주소\)은 프로비저닝을 통해 클라이언트에 알려질 수 있습니다.

3. 클라이언트는 네트워크 2와의 연결을 설정하고 네트워크 2에서 할당된 IP 주소를 얻습니다.

4. CCM과 NCM은 네트워크 경로 설정을 위한 기능과 매개변수를 협상합니다. 그런 다음 협상된 기능과 매개변수는 사용자 평면 기능, 즉 네트워크의 N-MADP와 클라이언트의 C-MADP를 구성하는 데 사용됩니다.

- 4a. CCM과 NCM은 네트워크 경로, 흐름 라우팅 및 집계 프로토콜, 관련 매개변수를 협상합니다.

- 4b. NCM은 N-MADP와 통신하여 CCM과 협상된 사항에 맞춰 흐름 집계 프로토콜, 정책 및 매개변수를 교환하고 구성합니다.

- 4c. CCM은 C-MADP와 통신하여 NCM과 협상된 항목에 맞춰 흐름 집계 프로토콜, 정책 및 매개변수를 교환하고 구성합니다.

5. C-MADP 및 N-MADP는 NCM이 지정한 협상된 흐름 집합 프로토콜 및 매개변수를 기반으로 인터넷 키 교환 프로토콜\(IKE\) \[RFC7296\] 신호를 사용하여 사용자 평면 경로를 설정합니다.

CCM과 NCM은 NCM에 의한 링크 유지 관리를 위해 액세스 링크 측정이 포함된 메시지를 추가로 교환할 수 있습니다. NCM은 CCM 및/또는 링크 프로빙 기술에 의해 보고된 링크 측정을 기반으로 LTE 및 Wi-Fi 전반에 걸쳐 UL 및 DL의 링크 상태를 평가하고 UL 및 DL 사용자 데이터 배포에 대한 정책을 결정합니다. NCM과 CCM은 또한 DSCP\(Differentiated Services Code Point\), 대상 IP 주소 및 해당 애플리케이션 범주의 데이터를 전송하는 데 사용해야 하는 사용 가능한 네트워크 경로 결정 등을 기반으로 애플리케이션을 분류하기 위한 애플리케이션 수준 정책을 협상합니다. . NCM은 협상된 애플리케이션 정책에 따라 N-MADP를 구성하고, CCM은 C-MADP를 구성합니다. CCM은 NCM이 전달하는 애플리케이션 정책 외에 로컬 애플리케이션 정책을 적용할 수도 있습니다.

---
## **10.  Relationship to IETF Technologies**

MAMS 프레임워크는 IETF에서 개발된 기술\(예: MPTCP 및 GRE\)을 활용하고 제어 평면 프레임워크가 클라이언트와 네트워크 간에 이러한 프로토콜 사용을 협상할 수 있도록 합니다. 또한 다른 멀티호밍 프로토콜 범위의 제한 사항도 해결합니다. 예를 들어 IKEv2 Mobility and Multihoming Protocol\(MOBIKE \[RFC4555\]\) 범위는 IPsec 클라이언트\(터널 모드 IPsec 보안 연결\) 간의 멀티호밍으로 제한되며 로드 밸런싱을 지원하지 않음을 나타냅니다. 멀티호밍 시나리오 처리 방법과 관련된 이러한 제한 사항을 해결하기 위해 MAMS 프레임워크는 MPTCP와 같은 프로토콜 사용을 협상하여 여러 액세스 경로를 동시에 사용하는 로드 밸런싱을 지원합니다. IPsec 터널 모드 보안 연결에 연결된 엔드포인트에만 적용되는 MOBIKE와 달리 MAMS 프레임워크는 적응 계층에서 광범위한 터널링 프로토콜을 사용할 수 있는 유연성을 허용합니다.

---
## **11.  Applying MAMS Control Procedures with MPTCP Proxy as User Plane**

NCM이 N-MADP가 MX Convergence Protocol로서 MPTCP로 인스턴스화되어야 한다고 결정하면 검색 및 기능 교환 절차에서 MPTCP 기능 지원을 교환합니다. MPTCP 프록시\(예: \[TCPM-CONVERTERS\] 참조\)는 N-MADP 인스턴스로 구성됩니다. 그런 다음 NCM은 관련 매개변수와 함께 MPTCP 프록시 인스턴스의 자격 증명을 CCM에 제공합니다. CCM은 이 MPTCP 프록시 인스턴스에 연결하기 위해 이러한 매개변수를 사용하여 C-MADP를 구성합니다.

그림 17은 MPTCP가 "MX Convergence Layer" 프로토콜로 구성될 때 사용자 평면 프로토콜 계층화를 보여줍니다. MPTCP는 여러 전달 연결을 통해 트래픽 분산 및 집계를 관리합니다.

```text
          +-----------------------------------------------------+
          |                        MPTCP                        |
          +-----------------+-----------------+-----------------+
          |       TCP       |       TCP       |       TCP       |
          +-----------------------------------------------------+
          |  MX Adaptation  |  MX Adaptation  |  MX Adaptation  |
          |  Layer          |  Layer          |  Layer          |
          |  (optional)     |  (optional)     |  (optional)     |
          +-----------------------------------------------------+
          |  Access #1 IP   |  Access #2 IP   |  Access #3 IP   |
          +-----------------+-----------------+-----------------+
```

- 그림 17: MPTCP를 MX 수렴 계층으로 사용하는 MAMS 사용자 평면 프로토콜 스택

클라이언트\(C-MADP\)는 우선 N-MADP와 MPTCP 연결을 설정합니다. 그런 다음 MAMS 제어 절차가 적용되어 다음을 수행합니다.

\* 적절한 MPTCP 네트워크 엔드포인트\(예: MPTCP 프록시\)에 연결합니다\(그림 18 참조\).

\* Wi-Fi 연결이 설정되고 양호한 것으로 간주된 후 두 번째 TCP 하위 흐름의 추가를 제어합니다\(그림 19 참조\).

\* 예를 들어 UL에서는 LTE 서브플로우만 사용하고 DL에서는 LTE 및 Wi-Fi 서브플로우를 모두 사용하여 MPTCP 스케줄러의 동작을 제어합니다\(그림 20 참조\).

\* 링크 상태가 좋지 않을 때 Wi-Fi를 통해 TCP 하위 흐름을 사전에 삭제하여 Wi-Fi 링크 저하에 더 빠르게 대응하고 최적의 성능을 유지합니다\(그림 21 참조\).

그림 18은 MPTCP 프록시를 사용자 평면의 컨버전스 프로토콜로 사용하는 시나리오에서 사용자 평면을 구성하고 동적 최적 경로 선택에 적용되는 MAMS 제어 절차를 설명하는 호출 흐름을 보여줍니다.

```text
   +------+   +--------+   +--------+   +-------+   +-------+   +------+
   |      |   |        |   |        |   |       |   |       |   |      |
   | CCM  |   | C-MADP |   | Wi-Fi  |   |  LTE  |   |  NCM  |   |N-MADP|
   |      |   |        |   |  N/W   |   |  N/W  |   |       |   |      |
   +------+   +--------+   +--------+   +-------+   +-------+   +------+
    +------------------------------------------------------------------+
    |           1. LTE Session Setup and IP Address Allocation         |
    +-----------------------------------------+-----------+------------+
     |                                        |           |        |
     |2. MX Discover (MAMS Version, MCC/MNC)  |           |        |
     +----------------------------------------+---------->|        |
     |3. MX System Info (Serving NCM IP/Port Address)     |        |
     |<------------+-------------+-------------+----------+        |
     |             |             |             |          |        |
     |4. MX Capability REQ (Supported Anchor/Delivery     |        |
     |             |        Links (Wi-Fi, LTE))           |        |
     +--------------------------------------------------->|        |
     |5. MX Capability RSP (Convergence/Adaptation Parameters)     |
     |<----------------------------------------+----------+        |
     |6. MX Capability ACK (ACCEPT)            |          |        |
     +-------------+-------------+----------------------->|        |
     |             |             |             |          |        |
     |7. MX Meas Config (Wi-Fi/LTE Measurement Thresholds/Period)  |
     |<---------------------------------------------------+        |
     |8. MX Meas Report (LTE RSRP, UL/DL TPUT) |          |        |
     +-----------------------------------------+--------->|        |
     |9. MX SSID Indication (List of SSIDs)    |          |        |
     |<------------+-------------+------------------------+        |
     |             |             |             |          |        |
     |10. MX Reconfiguration REQ (LTE IP)      |          |        |
     +--------------------------------------------------->|        |
     |11. MX Reconfiguration RSP               |          |        |
     |<----------------------------------------+----------+        |
     |12. MX UP Setup REQ (MPTCP proxy IP/Port, Aggregation)       |
     |<--------------------------+-------------+----------+        |
     |13. MX UP Setup RSP        |             |          |        |
     +-------------+-------------+-------------+--------->|        |
     |             | 14. MPTCP connection with designated |        |
     |             |     MPTCP proxy over LTE             |        |
     |             +-------------+-------------+----------+------->|
     |             |             |             |          |        |
     +             +             +             +          +        +

        Figure 18: MAMS-Assisted MPTCP Proxy as User Plane - Initial
                             Setup with LTE Leg
```

통화 흐름에 설명된 주요 단계는 다음과 같습니다. 클라이언트는 LTE 네트워크에 연결하고 IP 주소를 얻습니다\(LTE가 첫 번째 연결이라고 가정\). 그런 다음 NCM 검색 절차를 시작하고 네트워크와 클라이언트 모두에서 통합 프로토콜인 MPTCP에 대한 지원을 포함하여 기능을 교환합니다.

CCM은 NCM에 LTE 연결 매개변수를 제공합니다. NCM은 Convergence Layer 구성을 위해 MPTCP 프록시 IP 주소/포트, MPTCP 클라이언트 키와 같은 매개변수를 제공합니다. 이는 다른 액세스 네트워크에서 다른 IP 주소 또는/및 포트를 통해 N-MADP에 연결할 수 있는 경우 유용합니다. 현재 MPTCP 신호는 다중 액세스 네트워크에서 MPTCP 프록시 IP 주소 및 포트를 식별하거나 구별할 수 없습니다. 클라이언트는 서브플로우 생성 중에 MPTCP 클라이언트 키를 사용하며 이를 통해 NAT가 존재하는 경우에도 N-MADP가 클라이언트를 고유하게 식별할 수 있습니다. 그런 다음 N-MADP는 NCM에 서브플로우 생성 및 추가 서브플로우 생성과 관련된 매개변수를 알릴 수 있습니다. LTE가 유일한 연결이므로 사용자 평면 트래픽은 LTE 연결을 통해 단일 TCP 하위 흐름을 통해 흐릅니다. 선택적으로 NCM은 연결할 수 있는 인접/선호 Wi-Fi 네트워크의 클라이언트에 지원 정보를 제공합니다.

그림 19에서는 클라이언트가 Wi-Fi 연결을 설정하는 단계를 설명합니다. CCM은 Wi-Fi IP 주소 또는 SSID와 같은 매개변수와 함께 Wi-Fi 연결을 NCM에 알립니다. NCM은 Wi-Fi 연결에 보안이 필요하다고 판단하고 IPsec을 사용하도록 적응 계층을 구성한 후 CCM에 필요한 매개변수를 제공합니다. 또한 NCM은 Convergence Layer 구성을 위한 정보\(예: MPTCP 프록시 IP 주소\)를 제공하고 클라이언트가 LTE 액세스만 사용해야 함을 나타내는 MX Traffic Steering Request를 제공합니다. 예를 들어, NCM은 Wi-Fi 링크가 지속적으로 충분하지 않다는 측정 결과를 확인한 경우 이 작업을 수행할 수 있습니다. Wi-Fi 링크 상태가 개선됨에 따라 NCM은 Wi-Fi 액세스도 사용하기 위해 MX Traffic Steering Request를 보냅니다. 그러면 클라이언트가 MPTCP 프록시와의 Wi-Fi 링크를 통해 TCP 하위 흐름을 설정하도록 트리거됩니다.\(SHOULD\)

```text
   +------+   +--------+   +--------+   +-------+   +-------+   +------+
   |      |   |        |   |        |   |       |   |       |   |      |
   | CCM  |   | C-MADP |   | Wi-Fi  |   |  LTE  |   |  NCM  |   |N-MADP|
   |      |   |        |   |  N/W   |   |  N/W  |   |       |   |      |
   +------+   +--------+   +--------+   +-------+   +-------+   +------+
   +-------------------------------------------------------------------+
   |    Traffic over LTE in UL and DL over MPTCP Connection            |
   +-------------------------------------------------------------------+
   +-------------------------------------------------------------------+
   |    Wi-Fi Connection Establishment and IP Address Allocation       |
   +----------------------------------------------------------------+--+
    |             |             |             |          |         |
    |15. MX Reconfiguration REQ (Wi-Fi IP)    |          |         |
    +--------------------------------------------------->|         |
    |16. MX Reconfiguration RSP               |          |         |
    |<----------------------------------------+----------+         |
    |17. MX UP Setup REQ (MPTCP proxy IP/Port, Aggregation)        |
    |<--------------------------+-------------+----------+         |
    |18. MX UP Setup RSP        |             |          |         |
    +-------------+-------------+-------------+--------->|         |
    |             |19. IPsec Tunnel Establishment over Wi-Fi Path  |
    |             |<-------------------------------------+-------->|
    |             |             |             |          |         |
    |20. MX Meas Report (Wi-Fi RSSI,          |          |         |
    |    LTE RSRP, UL/DL TPUT)                |          |+------------+
    +-------------+-------------+-------------+--------->||Wait for    |
    |             |             |             |          ||good reports|
    |             |             |             |          |+------------+
    |21. MX Traffic Steering REQ (UL/DL access,          |         |
    |    Traffic Flow Templates (TFTs))                  | +----------+
    |<----------------------------------------+----------+ |Allow use |
    |                                         |          | |    of    |
    |22. MX Traffic Steering RSP (...)        |          | |Wi-Fi link|
    +-------------+-------------+----------------------->| +----------+
    |             |             |             |          |         |
    |             | 23. Add TCP subflow to the MPTCP connection    |
    |             |     over Wi-Fi link (IPsec Tunnel)             |
    |             |<---------------------------------------------->|
    |             |             |             |          |         |
   +----------------------------------------------------------------+
   ||      Aggregated Wi-Fi and LTE capacity for UL and DL         ||
   +----------------------------------------------------------------+
    |                                                              |
    |                                                              |

     Figure 19: MAMS-Assisted MPTCP Proxy as User Plane - Add Wi-Fi Leg
```

그림 20은 클라이언트가 UL에서 Wi-Fi 링크 상태가 저하되었음을 보고하는 단계를 설명합니다. MAMS 제어 평면은 Wi-Fi 및 LTE 연결의 액세스 링크 상태를 지속적으로 모니터링하는 데 사용됩니다. NCM은 어느 시점에서 Wi-Fi 네트워크의 UL 트래픽 증가를 판단하고 UL 성능을 향상시키기 위해 MX 트래픽 조정 요청을 통해 UL에서 LTE만 사용하도록 클라이언트를 트리거할 수 있습니다.

```text
   +------+   +--------+   +--------+   +-------+   +-------+   +------+
   |      |   |        |   |        |   |       |   |       |   |      |
   | CCM  |   | C-MADP |   | Wi-Fi  |   |  LTE  |   |  NCM  |   |N-MADP|
   |      |   |        |   |  N/W   |   |  N/W  |   |       |   |      |
   +------+   +--------+   +--------+   +-------+   +-------+   +------+
   +-------------------------------------------------------------------+
   |   Traffic over LTE and Wi-Fi in UL And DL over MPTCP              |
   ++------------+-------------+-------------+------------+--------+---+
    |            |             |             |            |        |
    |24. MX Meas Report (Wi-Fi RSSI, LTE RSRP, UL/DL TPUT)| +------+---+
    +------------+-------------+-------------+----------->| |Reports of|
    |            |             |             |            | |bad Wi-Fi |
    |            |             |             |            | |UL tput   |
    |            |             |             |            | +----------+
    |25. MX Traffic Steering REQ (UL/DL Access, TFTs)     | +----------+
    |<---------------------------------------+------------+ |Disallow  |
    |            |             |             |            | |use of    |
    |26. MX Traffic Steering RSP (...)       |            | |Wi-Fi UL  |
    |------------+-------------+------------------------->| +------+---+
    |            |             |             |            |        |
   ++------------+-------------+-------------+------------+--------+---+
   | UL data to use TCP subflow over LTE link only,                    |
   |    aggregated Wi-Fi+LTE capacity for DL                           |
   ++------------+-------------+-------------+------------+--------+---+
    |            |             |             |            |        |
    +            +             +             +            +        +

       Figure 20: MAMS-Assisted MPTCP Proxy as User Plane - Wi-Fi UL
                                  Degrades
```

그림 21은 클라이언트가 UL과 DL 모두에서 Wi-Fi 링크 상태가 저하되었음을 보고하는 단계를 설명합니다. Wi-Fi 링크 상태가 더욱 악화됨에 따라 NCM은 클라이언트에게 Wi-Fi 사용을 중지하고 UL 및 DL 모두에서 LTE 액세스만 사용하도록 지시하는 MX Traffic Steering Request를 보내기로 결정할 수 있습니다. 이 조건은 보고된 측정값을 기반으로 NCM이 Wi-Fi 링크를 다시 사용할 수 있다고 결정할 때까지 유지될 수 있습니다.

```text
   +------+   +--------+   +--------+   +-------+   +-------+   +------+
   |      |   |        |   |        |   |       |   |       |   |      |
   | CCM  |   | C-MADP |   | Wi-Fi  |   |  LTE  |   |  NCM  |   |N-MADP|
   |      |   |        |   |  N/W   |   |  N/W  |   |       |   |      |
   +------+   +--------+   +--------+   +-------+   +-------+   +------+
   +------------------------------------------------------------------+
   |          UL data to use TCP subflow over LTE link only,          |
   |               aggregated Wi-Fi+LTE capacity for DL               |
   ++------------+-------------+-------------+----------+---------+---+
    |            |             |             |          |         |
    |            |             |             |          |         |
    |27. MX Meas Report (Wi-Fi RSSI,         |          |         |
    |    LTE RSRP, UL/DL TPUT)               |          | +-------+----+
    +------------+-------------+-------------+--------->| | Reports of |
    |            |             |             |          | | bad Wi-Fi  |
    |            |             |             |          | | UL/DL tput |
    |            |             |             |          | +------------+
    |28. MX Traffic Steering REQ (UL/DL Access, TFTs)   | +------------+
    |<---------------------------------------+----------+ | Disallow   |
    |            |             |             |          | | use of     |
    |29. MX Traffic Steering RSP (...)       |          | | Wi-Fi      |
    +----------------------------------------+--------->| +------------+
    |            |30. Delete TCP subflow from MPTCP     |         |
    |            |    connection over Wi-Fi link        |         |
    |            |<---------------------------------------------->|
    |            |             |             |          |         |
   +--------------------------------------------------------------+
   ||            Traffic over LTE link only for DL and UL         |
   ||      (until client reports better Wi-Fi link conditions)    |
   +--------------------------------------------------------------+
    |            |             |             |          |         |
    +            +             +             +          +         +

        Figure 21: MAMS-Assisted MPTCP Proxy as User Plane - Part 4
```

12. 수렴 계층이 없을 때 네트워크 지원 트래픽 조정을 위한 MAMS 제어 절차 적용

그림 22는 Convergence 및 Adaptation Layer 프로토콜이 생략된 시나리오에서 동적 최적 경로 선택에 적용되는 MAMS 제어 절차를 설명하는 호출 흐름을 보여줍니다. 이 시나리오는 MAMS 제어 평면에만 솔루션을 적용할 수 있음을 나타냅니다.

기능 교환 메시지에서 NCM과 CCM은 Convergence-Layer 및 Adaptation-Layer 프로토콜이 필요하지 않음\(또는 지원되지 않음\)을 협상합니다. CCM은 NCM에 LTE 및 Wi-Fi 링크의 가용성을 알립니다. NCM은 보고된 링크 품질 측정값을 기반으로 사용할 액세스 링크\(Wi-Fi 또는 LTE\)를 동적으로 결정합니다.

```text
   +------+   +--------+   +--------+   +-------+   +-------+   +------+
   |      |   |        |   |        |   |       |   |       |   |      |
   | CCM  |   | C-MADP |   | Wi-Fi  |   |  LTE  |   |  NCM  |   |N-MADP|
   |      |   |        |   |  N/W   |   |  N/W  |   |       |   |      |
   +------+   +--------+   +--------+   +-------+   +-------+   +------+
    +------------------------------------------------------------------+
    |       1. LTE Session Setup and IP Address Allocation             |
    +---------------------------------------+-------------+----------+-+
     |2. MX Discover (MAMS Version, MCC/MNC )             |          |
     +--------------------------------------+------------>|          |
     |3. MX System Info (Serving NCM IP/Port address)     |          |
     |<------------+-------------+----------+-------------|          |
     |             |             |          |             |          |
     |4. MX Capability REQ (Supported       |             |          |
     |   Anchor/Delivery Links (Wi-Fi, LTE))|             |          |
     +--------------------------------------------------->|          |
     |5. MX Capability RSP (No Convergence/Adaptation parameters)    |
     |<-------------------------------------+-------------+          |
     |6. MX Capability ACK (ACCEPT)         |             |          |
     +-------------+-------------+----------------------->|          |
     |             |             |          |             |          |
     |7. MX Meas Config (Wi-Fi/LTE Measurement Thresholds/Period)    |
     |<---------------------------------------------------|          |
     |8. MX Meas Report (LTE RSRP, UL/DL TPUT)            |          |
     |--------------------------------------+------------>|          |
     |9. MX SSID Ind (List of SSIDs)        |             |          |
     |<---------------------------------------------------|          |
   +-----------------------------------------------------------------++
   |      10. Wi-Fi Connection Setup and IP Address Allocation        |
   +-+-------------+-------------+----------+-------------+----------++
     |             |             |          |             |          |
     |11. MX Reconfiguration REQ (LTE IP, Wi-Fi IP)       |          |
     |--------------------------------------+------------>|          |
     |12. MX Reconfiguration RSP            |             |          |
     |<---------------------------------------------------|          |
   +-----------------------------------------------------------------++
   | Initial Condition, Data over LTE link only, Wi-Fi link is poor   |
   +------------------------------------------------------+----------++
     |             |             |          |             |          |
     |13. MX Meas Report (Wi-Fi RSSI,       |             |          |
     |    LTE RSRP, UL/DL TPUT)|            |             |+----------+
     |--------------------------------------------------->||Wi-Fi link|
     |             |             |          |             ||conditions|
     |             |             |          |             ||reported  |
     |             |             |          |             ||good      |
     |             |             |          |             |+----------+
     |             |             |          |             |          |
     |14. MX Traffic Steering REQ (UL/DL Access, TFTs)    |+----------+
     |<------------+-------------+----------+-------------||Steer     |
     |             |             |          |             ||traffic to|
     |15. MX Traffic Steering RSP (...)     |             ||use Wi-Fi |
     |<------------+-------------+----------+-------------||link      |
     |             |             |          |             |+----------+
     |             |             |          |             |          |
   +-----------------------------------------------------------------++
   |    Use Wi-Fi link for Data                                       |
   +------------------------------------------------------+----------++
     |             |             |          |             |          |
     +             +             +          +             +          +

                 Figure 22: MAMS with No Convergence Layer
```

---
## **13.  Coexistence of MX Adaptation and MX Convergence Layers**

MAMS 사용자 평면은 MX 적응 및 수렴 계층에서 사용되는 여러 인스턴스와 프로토콜 조합을 지원합니다.

예를 들어 MX Convergence Layer의 한 인스턴스는 MPTCP 프록시일 수 있고 다른 인스턴스는 GMA일 수 있습니다. 각각에 대한 MX 적응은 UDP 터널 또는 IPsec일 수 있습니다. IPsec은 네트워크 경로를 보호해야 할 때\(예: 클라이언트와 MPTCP 프록시 사이의 네트워크 경로를 통과하는 TCP 하위 흐름을 보호하기 위해\) 설정될 수 있습니다.

MAMS 사용자 평면의 각 인스턴스, 즉 MX Convergence-Layer 및 MX Adaptation-Layer 프로토콜의 조합은 동시에 공존할 수 있으며 서로 다른 트래픽 유형을 독립적으로 처리할 수 있습니다.

---
## **14.  Security Considerations**
---
### **14.1.  MAMS Control-Plane Security**

NCM 기능 요소는 보안 네트워크\(예: 운영자 네트워크\) 내에 있는 것으로 가정되고 하이재킹 공격으로부터 보호되는 것으로 가정되는 네트워크 노드에서 호스팅됩니다.

클라이언트가 제어 평면 메시지 교환을 위해 특정 네트워크 경로를 사용하도록 구성\(예: 네트워크 운영자에 의해\)되고 네트워크 경로가 안전하다고 가정되는 배포 시나리오의 경우 MAMS 제어 메시지는 다음에서 제공하는 보안에 의존합니다. 기본 네트워크.

네트워크 경로의 보안을 가정할 수 없는 배포 시나리오의 경우 NCM 및 CCM 구현은 "wss" URI 체계 \[RFC6455\] 및 TLS\(전송 계층 보안\) \[RFC8446\]를 지원하여 네트워크 간 제어 평면 메시지 교환을 보호해야 합니다. NCM과 CCM.\(MUST\)

클라이언트 인증이 필요한 배포 시나리오의 경우 WebSocket 서버는 쿠키, HTTP 인증 또는 TLS 인증과 같이 일반 HTTP 서버에 사용 가능한 모든 클라이언트 인증 메커니즘을 사용할 수 있습니다.

---
### **14.2.  MAMS User-Plane Security**

MAMS 프레임워크의 사용자 데이터는 기본 네트워크 전송 경로의 보안에 의존합니다. 이 보안을 가정할 수 없는 경우 NCM은 보안을 위해 MX 적응 계층에서 프로토콜\(예: IPsec \[RFC4301\] \[RFC3948\]\) 사용을 구성합니다.

---
## **15.  Implementation Considerations**

MAMS 아키텍처는 널리 사용되는 클라이언트 운영 체제를 통해 소프트웨어 업데이트를 제공하는 데 사용할 수 있는 클라이언트에서 일반적으로 사용 가능한 기능을 기반으로 구축되므로 배포된 클라이언트의 대규모 기반을 신속하게 배포하고 처리할 수 있습니다.

---
## **16.  Applicability to Multi-Access Edge Computing**

이전에 모바일 엣지 컴퓨팅\(Mobile Edge Computing\)으로 알려진 다중 액세스 엣지 컴퓨팅\(MEC\)은 유럽 통신 표준 협회\(ETSI\)\[ETSIMEC\]에서 고려 중인 액세스 엣지 클라우드 플랫폼입니다. 셀룰러\(예: LTE와 같은 3GPP 기술\) 액세스 에지가 있으며 이제 범위가 3GPP 이상의 액세스 기술을 지원하도록 확장되고 있습니다. 이 문서에 설명된 프레임워크의 MEC 플랫폼 적용 가능성은 작성자에 의해 다양한 네트워크 구성에서 평가 및 테스트되었습니다.

NCM은 다중 기술 액세스 네트워크 가장자리의 사용자 평면 경로에 위치한 MEC 클라우드 서버에서 호스팅될 수 있습니다. NCM과 CCM은 애플리케이션의 요구 사항과 여러 경로에서 사용되는 필수 사용자 평면 프로토콜을 기반으로 네트워크 경로 조합을 협상할 수 있습니다. CCM이 NCM에 보고하는 네트워크 상황은 MEC 클라우드 서버에 상주하는 무선 분석 애플리케이션\(ETSIRNIS\)을 통해 보완되어 변화하는 무선 및 혼잡 상황에 따라 업링크 및 다운링크 액세스 경로를 구성할 수 있습니다.

사용자 평면 기능 요소인 N-MADP는 MEC 클라우드 서버\(예: MEC 호스팅 애플리케이션\)에서 NCM과 함께 배치되거나 여러 네트워크에 걸쳐 공통 사용자 평면 게이트웨이와 같은 별도의 네트워크 요소에 배치될 수 있습니다.

또한 N-MADP가 배포되지 않은 시나리오에서도 NCM을 사용하여 클라이언트의 트래픽 조정 결정을 강화할 수 있습니다.

이러한 개선 사항의 목적은 애플리케이션의 요구 사항과 네트워크 조건을 기반으로 최상의 네트워크 경로를 활용하고 대기 시간을 크게 줄인 이점과 무선 네트워크 정보의 동적 실시간 노출을 기반으로 하여 최종 사용자의 QoE를 향상시키는 것입니다. MEC.

---
## **17.  Related Work in Other Industry and Standards Forums**

이 문서에 설명된 MAMS 프레임워크는 여러 산업 포럼 및 표준에서 다중 액세스 통합을 해결하기 위한 솔루션으로 통합되었거나 통합을 위해 제안되었습니다. 이 섹션에서는 다른 업계 포럼 및 표준 조직의 관련 작업에 대해 설명합니다.

Wireless Broadband Alliance 업계 파트너는 "5G 네트워크와의 무면허 통합" 프로젝트\[WBAUnl5G\]의 일환으로 다양한 배포에 대한 다중 액세스 통합을 위한 다양한 기술의 적용 가능성을 설명하는 백서를 발표했습니다. 백서에는 5G 코어망 이상으로 비면허\(Wi-Fi\) 네트워크를 5G 네트워크와 통합하기 위한 기술로 본 문서에서 설명하는 MAMS 프레임워크가 포함되어 있습니다.

3GPP는 액세스 트래픽 조정, 전환 및 분할\(ATSSS\)에 관한 연구 항목 작업 항목의 일부로 기술 보고서를 개발하고 있습니다. 해당 보고서 TR 23.793 \[ATSSS\]에는 여러 가지 잠재적인 솔루션이 포함되어 있습니다. \[ATSSS\]의 솔루션 1은 이 문서에 설명된 MAMS 아키텍처와 유사한 방식으로 사용자 평면 프로토콜 및 경로 측정의 유연한 협상을 위해 별도의 제어 평면을 활용합니다.

스몰셀포럼\(SCF\) \[SCFTECH5G\]에서는 LTE/5G 및 Wi-Fi 업무 항목의 일환으로 백서를 개발할 계획이다. 본 백서에 MAMS를 포함하자는 제안이 있습니다.

ETSI 다중 액세스 엣지 컴퓨팅 2단계 기술 작업에서는 QoE 및 리소스 활용 최적화를 위한 사용 사례를 포함하여 이 작업의 여러 측면을 검토하고 있습니다. 이 문서에 설명된 MAMS 아키텍처 및 절차는 ETSI의 사용 사례 및 요구 사항 문서 \[ETSIMAMS\]에 포함되어 있습니다.

---
## **18.  IANA Considerations**

이 문서에는 IANA 작업이 없습니다.

---
## **19.  References**
---
### **19.1.  Normative References**

```text
   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC4301]  Kent, S. and K. Seo, "Security Architecture for the
              Internet Protocol", RFC 4301, DOI 10.17487/RFC4301,
              December 2005, <https://www.rfc-editor.org/info/rfc4301>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.
```

---
### **19.2.  Informative References**

```text
   [ANDSF]    3rd Generation Partnership Project, "Access Network
              Discovery and Selection Function (ANDSF) Management Object
              (MO)", 3GPP TS 24.312 version 15.0.0, Technical
              Specification Group Core Network and Terminals, June 2018,
              <https://www.3gpp.org/ftp//Specs/
              archive/24_series/24.312/24312-f00.zip>.

   [ATSSS]    3rd Generation Partnership Project, "Study on access
              traffic steering, switch and splitting support in the 5G
              System (5GS) architecture", Work in Progress, 3GPP TR
              23.793 v16.0.0, December 2018,
              <https://www.3gpp.org/ftp/Specs/
              archive/23_series/23.793/>.

   [ETSIMAMS] European Telecommunications Standards Institute, "Multi-
              access Edge Computing (MEC); Phase 2: Use Cases and
              Requirements", ETSI GS MEC 002 v2.1.1, October 2018,
              <https://www.etsi.org/deliver/etsi_gs/
              MEC/001_099/002/02.01.01_60/gs_MEC002v020101p.pdf>.

   [ETSIMEC]  European Telecommunications Standards Institute, "Multi-
              access Edge Computing (MEC)",
              <https://www.etsi.org/technologies/multi-access-edge-
              computing>.

   [ETSIRNIS] European Telecommunications Standards Institute, "Mobile
              Edge Computing (MEC) Radio Network Information API", ETSI
              GS MEC 012 v1.1.1, July 2017,
              <https://www.etsi.org/deliver/etsi_gs/
              MEC/001_099/012/01.01.01_60/gs_MEC012v010101p.pdf>.

   [IEEE-80211]
              IEEE, "IEEE Standard for Information technology-
              Telecommunications and information exchange between
              systems - Local and metropolitan area networks-Specific
              requirements - Part 11: Wireless LAN Medium Access Control
              (MAC) and Physical Layer (PHY) Specifications",
              IEEE 802.11-2016,
              <https://ieeexplore.ieee.org/document/7786995>.

   [INTAREA-GMA]
              Zhu, J. and S. Kanugovi, "Generic Multi-Access (GMA)
              Convergence Encapsulation Protocols", Work in Progress,
              Internet-Draft, draft-zhu-intarea-gma-05, 16 December
              2019,
              <https://tools.ietf.org/html/draft-zhu-intarea-gma-05>.

   [INTAREA-MAMS]
              Zhu, J., Seo, S., Kanugovi, S., and S. Peng, "User-Plane
              Protocols for Multiple Access Management Service", Work in
              Progress, Internet-Draft, draft-zhu-intarea-mams-user-
              protocol-09, 4 March 2020, <https://tools.ietf.org/html/
              draft-zhu-intarea-mams-user-protocol-09>.

   [ITU-E212] International Telecommunication Union, "The international
              identification plan for public networks and
              subscriptions", ITU-T Recommendation E.212, September
              2016, <https://www.itu.int/rec/T-REC-E.212-201609-I/en>.

   [QUIC-MULTIPATH]
              Coninck, Q. and O. Bonaventure, "Multipath Extensions for
              QUIC (MP-QUIC)", Work in Progress, Internet-Draft, draft-
              deconinck-quic-multipath-04, 5 March 2020,
              <https://tools.ietf.org/html/draft-deconinck-quic-
              multipath-04>.

   [RFC2784]  Farinacci, D., Li, T., Hanks, S., Meyer, D., and P.
              Traina, "Generic Routing Encapsulation (GRE)", RFC 2784,
              DOI 10.17487/RFC2784, March 2000,
              <https://www.rfc-editor.org/info/rfc2784>.

   [RFC2890]  Dommety, G., "Key and Sequence Number Extensions to GRE",
              RFC 2890, DOI 10.17487/RFC2890, September 2000,
              <https://www.rfc-editor.org/info/rfc2890>.

   [RFC3948]  Huttunen, A., Swander, B., Volpe, V., DiBurro, L., and M.
              Stenberg, "UDP Encapsulation of IPsec ESP Packets",
              RFC 3948, DOI 10.17487/RFC3948, January 2005,
              <https://www.rfc-editor.org/info/rfc3948>.

   [RFC4555]  Eronen, P., "IKEv2 Mobility and Multihoming Protocol
              (MOBIKE)", RFC 4555, DOI 10.17487/RFC4555, June 2006,
              <https://www.rfc-editor.org/info/rfc4555>.

   [RFC4960]  Stewart, R., Ed., "Stream Control Transmission Protocol",
              RFC 4960, DOI 10.17487/RFC4960, September 2007,
              <https://www.rfc-editor.org/info/rfc4960>.

   [RFC6347]  Rescorla, E. and N. Modadugu, "Datagram Transport Layer
              Security Version 1.2", RFC 6347, DOI 10.17487/RFC6347,
              January 2012, <https://www.rfc-editor.org/info/rfc6347>.

   [RFC6455]  Fette, I. and A. Melnikov, "The WebSocket Protocol",
              RFC 6455, DOI 10.17487/RFC6455, December 2011,
              <https://www.rfc-editor.org/info/rfc6455>.

   [RFC6824]  Ford, A., Raiciu, C., Handley, M., and O. Bonaventure,
              "TCP Extensions for Multipath Operation with Multiple
              Addresses", RFC 6824, DOI 10.17487/RFC6824, January 2013,
              <https://www.rfc-editor.org/info/rfc6824>.

   [RFC7231]  Fielding, R., Ed. and J. Reschke, Ed., "Hypertext Transfer
              Protocol (HTTP/1.1): Semantics and Content", RFC 7231,
              DOI 10.17487/RFC7231, June 2014,
              <https://www.rfc-editor.org/info/rfc7231>.

   [RFC7296]  Kaufman, C., Hoffman, P., Nir, Y., Eronen, P., and T.
              Kivinen, "Internet Key Exchange Protocol Version 2
              (IKEv2)", STD 79, RFC 7296, DOI 10.17487/RFC7296, October
              2014, <https://www.rfc-editor.org/info/rfc7296>.

   [RFC8259]  Bray, T., Ed., "The JavaScript Object Notation (JSON) Data
              Interchange Format", STD 90, RFC 8259,
              DOI 10.17487/RFC8259, December 2017,
              <https://www.rfc-editor.org/info/rfc8259>.

   [RFC8446]  Rescorla, E., "The Transport Layer Security (TLS) Protocol
              Version 1.3", RFC 8446, DOI 10.17487/RFC8446, August 2018,
              <https://www.rfc-editor.org/info/rfc8446>.

   [SCFTECH5G]
              Small Cell Forum, "Small Cell Forum", <https://scf.io/>.

   [ServDesc3GPP]
              3rd Generation Partnership Project, "General Packet Radio
              Service (GPRS); Service description; Stage 2", 3GPP TS
              23.060 version 16.0.0, Technical Specification Group
              Services and System Aspects, March 2019,
              <https://www.3gpp.org/ftp/Specs/
              archive/23_series/23.060/23060-g00.zip>.

   [TCPM-CONVERTERS]
              Bonaventure, O., Boucadair, M., Gundavelli, S., Seo, S.,
              and B. Hesmans, "0-RTT TCP Convert Protocol", Work in
              Progress, Internet-Draft, draft-ietf-tcpm-converters-19,
              22 March 2020, <https://tools.ietf.org/html/draft-ietf-
              tcpm-converters-19>.

   [WBAUnl5G] Wireless Broadband Alliance, "Unlicensed Integration with
              5G Networks", <https://wballiance.com/resource/unlicensed-
              integration-with-5g-networks/>.
```

---
# **Appendix A.  MAMS Control-Plane Optimization over Secure Connections**

이 부록은 정보를 제공하며 MAMS 작동 방식에 대한 정보를 제공합니다.

MAMS 제어 평면 메시지가 전송되는 CCM과 NCM 간의 연결이 안전하다고 가정되는 경우 UDP는 NCM과 CCM 간의 관리 및 제어 메시지 전송으로 사용됩니다\(그림 23 참조\).

```text
            +-------------------------------------------------+
            |        Multi-Access (MX) Control Message        |
            |-------------------------------------------------|
            |                       UDP                       |
            |-------------------------------------------------|

           Figure 23: UDP-Based MAMS Control-Plane Protocol Stack
```

---
# **Appendix B.  MAMS Application Interface**

이 부록에서는 MAMS 애플리케이션 인터페이스에 대해 설명합니다. MAMS 프레임워크 또는 프로토콜 정의에 대한 규범적인 텍스트를 제공하지는 않지만 MAMS 프레임워크를 기반으로 시스템을 구성하는 데 사용할 수 있는 추가 정보를 제공합니다.

---
### **B.1.  Overall Design**

CCM은 애플리케이션이 통신하고 서비스를 요청할 수 있도록 HTTPS 서버를 호스팅합니다. 이 문서에서는 보안 관점에서 모든 CCM과 통신 애플리케이션 인스턴스가 단일 관리 도메인에서 호스팅된다고 가정합니다.

메시지 내용은 JSON\(JavaScript Object Notation\) 형식으로 설명됩니다. 통신을 위한 RESTful API를 제공합니다.

애플리케이션이 CCM의 엔드포인트를 어떻게 아는지에 대한 정확한 메커니즘은 이 문서의 범위를 벗어납니다. 이 메커니즘은 대신 애플리케이션 설정의 일부로 제공될 수 있습니다.

---
### **B.2.  Notation**

API 문서는 Swagger v2.0을 사용하여 OpenAPI 형식으로 제공됩니다. 부록 D를 참조하세요.

---
### **B.3.  Error Indication**

모든 API에 대해 API의 목적이 충족되지 않으면 오류 응답이 있을 수 있습니다. \[RFC7231\]을 참조하세요.

---
### **B.4.  CCM APIs**

다음 하위 섹션에서는 CCM이 애플리케이션에 공개하는 API에 대해 설명합니다.

---
#### **B.4.1.  GET Capabilities**

CCM은 애플리케이션이 CCM 인스턴스에서 지원하는 기능을 쿼리할 수 있도록 "/ccm/v1.0/capability"로 HTTPS GET 인터페이스를 제공합니다.

```text
   +---------+                                            +-----------+
   |         |                                            |           |
   |   App   |--------- HTTPS GET / Capabilities -------->|    CCM    |
   |         |                                            |           |
   +---------+                                            +-----------+

                    Figure 24: CCM API - GET Procedures
```

CCM은 다음과 같이 그 능력에 관한 정보를 제공해야 한다:

\* 지원되는 기능: MX 기능 요청\(부록 C.2.5\)의 MX 기능 활성화 목록 매개변수에 정의된 "기능 이름" 값 중 하나 이상입니다.

\* 지원되는 연결: 지원되는 연결 유형 및 연결 ID입니다.

\* 지원되는 MX 적응 계층: N-MADP 인스턴스에서 지원하는 MX 적응 계층 프로토콜 목록과 함께 지원되는 연결 유형 및 해당 매개변수입니다.

\* 지원되는 MX Convergence Layers: 지원되는 MX Convergence Layer 프로토콜 목록과 해당 융합 기술과 관련된 매개변수입니다.

---
#### **B.4.2.  Posting Application Requirements**

CCM은 애플리케이션이 애플리케이션 데이터 스트림의 요구 사항을 CCM 인스턴스에 게시할 수 있도록 "/ccm/v1.0/app\_requirements"로 HTTPS POST 인터페이스를 제공합니다.

```text
   +---------+                                            +-----------+
   |         |                                            |           |
   |   App   |-------- HTTPS POST / App Requirements ---->|    CCM    |
   |         |                                            |           |
   +---------+                                            +-----------+

                    Figure 25: CCM API - POST Procedures
```

CCM은 애플리케이션이 다양한 데이터 스트림에 대해 다음 요구 사항을 게시하도록 규정해야 합니다.

\* 데이터 스트림 유형의 수.

\* 각 데이터 스트림 유형에 대해 애플리케이션에서 선호하는 다음 링크 매개변수를 지정합니다.

- - 프로토콜 유형: 애플리케이션 데이터 스트림 패킷과 관련된 전송 계층 프로토콜입니다.

- - 포트 범위: 지원되는 연결 유형 및 연결 ID입니다.

- - 트래픽 QoS: 다음과 같은 서비스 품질 매개변수:

```text
         o  Bandwidth

         o  Latency

         o  Jitter
```

---
#### **B.4.3.  Getting Predictive Link Parameters**

CCM은 애플리케이션이 CCM 인스턴스에서 예측된 링크 매개변수를 가져올 수 있도록 "/ccm/v1.0/predictive\_link\_params"로 HTTPS GET 인터페이스를 제공합니다.

```text
   +---------+                                             +-----------+
   |         |                                             |           |
   |   App   |----- HTTPS GET / Predictive Link Params --->|    CCM    |
   |         |                                             |           |
   +---------+                                             +-----------+

          Figure 26: CCM API - Getting Predictive Link Parameters
```

CCM은 MAMS 네트워크 분석 요청 절차\(8.12절\)를 통해 NCM에 링크 매개변수를 요청하고 API 호출에 대한 응답으로 해당 정보를 포함합니다.

\* 배달 연결 수.

- 각 배송 연결에는 다음이 포함됩니다.

```text
      -  Access Link Identifier:

         o  Connection Type

         o  Connection ID

      -  Link Quality Indicator

         o  Bandwidth:

            +  Predicted Value (Mbps)

            +  Likelihood (percent)

            +  Prediction Validity (Validity Time, in seconds)

         o  Jitter:

            +  Predicted Value (in seconds)

            +  Likelihood (percent)

            +  Prediction Validity (Validity Time, in seconds)

         o  Latency:

            +  Predicted Value (in seconds)

            +  Likelihood (percent)

            +  Prediction Validity (Validity Time, in seconds)

         o  Signal Quality

            +  If delivery connection type is LTE, LTE_RSRP Predicted
               Value (dBm)

            +  If delivery connection type is LTE, LTE_RSRQ Predicted
               Value (dBm)

            +  If delivery connection type is 5G NR, NR_RSRP Predicted
               Value (dBm)

            +  If delivery connection type is 5G NR, NR_RSRQ Predicted
               Value (dBm)

            +  If delivery connection type is Wi-Fi, WLAN_RSSI Predicted
               Value (dBm)

            +  Likelihood (percent)

            +  Prediction Validity (Validity Time, in seconds)
```

---
# **Appendix C.  MAMS Control-Plane Messages Described Using JSON**

MAMS 제어 평면 메시지는 CCM과 NCM 간에 교환됩니다. 이 비표준 부록은 JSON \[RFC8259\]을 사용하여 메시지의 형식과 내용을 설명합니다.

---
### **C.1.  Protocol Specification: General Processing**
---
#### **C.1.1.  Notation**

이 문서에서는 JSONString, JSONNumber 및 JSONBool을 사용하여 각각 JSON 문자열, 숫자 및 부울 유형을 나타냅니다.

이 문서에서는 C 스타일 구조체 표기법을 적용하여 JSON 개체를 설명합니다. JSON 객체는 이름/값 쌍으로 구성됩니다. 이 문서에서는 각 쌍을 필드로 참조합니다. 일부 상황에서는 이 문서에서 필드를 속성으로 참조하기도 합니다. 필드/속성의 이름을 키라고 할 수 있습니다. 선택적 필드는 "\[ \]"로 묶입니다. 정의에서 필드의 JSON 이름은 대소문자를 구분합니다. 배열은 꺾쇠 괄호 안의 두 숫자 <m..n\>으로 표시됩니다. 여기서 m은 최소 값 수를 나타내고 n은 최대 값을 나타냅니다. 이 문서에서 n에 \*를 사용하면 상한이 없음을 의미합니다.

예를 들어, 아래 텍스트는 각각 "name1", "name2" 및 "name3"이라는 세 개의 필드가 있는 새로운 유형 Type4를 설명합니다. "name3" 필드는 선택 사항이고 "name2" 필드는 하나 이상의 값으로 구성된 배열입니다.

```text
       object { Type1 name1; Type2 name2 <1..*>; [Type3 name3;] } Type4;
```

이 문서에서는 하위 유형 지정을 사용하여 한 유형이 다른 유형에서 파생되었음을 나타냅니다. 아래 예는 TypeDerived가 TypeBase에서 파생되었음을 나타냅니다. TypeDerived에는 TypeBase에 정의된 모든 필드가 포함됩니다. TypeBase에 "name1" 필드가 없으면 TypeDerived에는 "name1"이라는 새 필드가 있습니다. TypeBase에 이미 "name1"이라는 필드가 있지만 다른 유형이 있는 경우 TypeDerived에는 TypeDerived에 정의된 유형\(예: 예에서는 Type1\)이 있는 "name1"이라는 필드가 있습니다.

```text
       object { Type1 name1; } TypeDerived : TypeBase;
```

표기에도 불구하고 이 문서에서는 기계가 읽을 수 있는 표준 인터페이스 정의나 스키마가 제공되지 않습니다. 확장 문서는 필요에 따라 이를 설명할 수 있습니다.

게시 요구 사항과의 호환성을 위해 긴 JSON 문자열 안에 줄 바꿈이 삽입되었으며 다음 연속 줄은 들여쓰기되었습니다. 유효한 JSON 예제를 구성하려면 문자열 내부의 줄 바꿈을 줄 바꿈이 제거된 후 공백 및 기타 공백으로 바꿔야 합니다.

---
#### **C.1.2.  Discovery Procedure**
---
##### **C.1.2.1.  MX Discover Message**

이 메시지는 네트워크에서 NCM의 존재를 발견하기 위해 CCM이 보낸 첫 번째 메시지입니다. 여기에는 message\_type이 mx\_discover로 설정된 부록 C.2.1에 설명된 기본 정보만 포함됩니다.

메시지의 표현은 다음과 같습니다.

```text
       object {
           [JSONString MCC_MNC_Tuple;]
        } MXDiscover : MXBase;
```

---
#### **C.1.3.  System Information Procedure**
---
##### **C.1.3.1.  MX System Info Message**

이 메시지는 NCM이 MAMS 기능을 지원한다는 것을 엔드포인트에 알리기 위해 NCM에서 CCM으로 전송됩니다. 기본 정보\(부록 C.2.1\) 외에 다음 정보가 포함되어 있습니다.

```text
   (a)  NCM Connections (Appendix C.2.3).
```

메시지의 표현은 다음과 같습니다.

```text
       object {
          NCMConnections ncm_connections;
       } MXSystemInfo : MXBase;
```

---
#### **C.1.4.  Capability Exchange Procedure**
---
##### **C.1.4.1.  MX Capability Request**

이 메시지는 이전 시스템 정보 메시지에 표시된 NCM에 사용 가능한 CCM 인스턴스의 기능을 나타내기 위해 CCM에서 NCM으로 전송됩니다. 기본 정보\(부록 C.2.1\) 외에 다음 정보가 포함되어 있습니다.

\(a\) 기능 및 활성화 상태: 부록 C.2.5를 참조하세요.

\(b\) 앵커 연결 수: NCM이 지원하는 앵커 연결\(코어 방향\) 수입니다.

```text
   (c)  Anchor connections: See Appendix C.2.6.
```

\(d\) 배송 연결 수: 배송 횟수

- NCM이 지원하는 연결\(접속을 향한\).

```text
   (e)  Delivery connections: See Appendix C.2.7.

   (f)  Convergence methods: See Appendix C.2.9.

   (g)  Adaptation methods: See Appendix C.2.10.
```

메시지의 표현은 다음과 같습니다.

```text
       object {
          FeaturesActive feature_active;
          JSONNumber num_anchor_connections;
          AnchorConnections anchor_connections;
          JSONNumber num_delivery_connections;
          DeliveryConnections delivery_connections;
          ConvergenceMethods convergence_methods;
          AdaptationMethods adaptation_methods
       } MXCapabilityReq : MXBase;
```

---
##### **C.1.4.2.  MX Capability Response**

이 메시지는 NCM 인스턴스의 기능과 CCM에 대한 고유 세션 식별자를 나타내기 위해 NCM에서 CCM으로 전송됩니다. 기본 정보\(부록 C.2.1\) 외에 다음 정보가 포함되어 있습니다.

\(a\) 기능 및 활성화 상태: 부록 C.2.5를 참조하세요.

\(b\) 앵커 연결 수: NCM이 지원하는 앵커 연결\(코어 방향\) 수입니다.

```text
   (c)  Anchor connections: See Appendix C.2.6.
```

\(d\) 배송 연결 수: 배송 횟수

- NCM이 지원하는 연결\(접속을 향한\).

```text
   (e)  Delivery connections: See Appendix C.2.7.

   (f)  Convergence methods: See Appendix C.2.9.

   (g)  Adaptation methods: See Appendix C.2.10.
```

\(h\) 고유 세션 ID: 이는 네트워크에서 CCM과 NCM 간의 세션을 고유하게 식별합니다. 부록 C.2.2를 참조하세요.

메시지의 표현은 다음과 같습니다.

```text
       object {
          FeaturesActive feature_active;
          JSONNumber num_anchor_connections;
          AnchorConnections anchor_connections;
          JSONNumber num_delivery_connections;
          DeliveryConnections delivery_connections;
          ConvergenceMethods convergence_methods;
          AdaptationMethods adaptation_methods
          UniqueSessionId unique_session_id;
       } MXCapabilityRsp : MXBase;
```

---
##### **C.1.4.3.  MX Capability Acknowledge**

이 메시지는 이전 MX 기능 응답 메시지에서 NCM이 광고한 기능의 수락을 나타내기 위해 CCM에서 NCM으로 전송됩니다. 기본 정보\(부록 C.2.1\) 외에 다음 정보가 포함되어 있습니다.

\(a\) 고유 세션 ID: MX 기능 응답에 제공된 식별자와 동일한 식별자입니다. 부록 C.2.2를 참조하세요.

\(b\) 기능 승인: CCM이 보낸 기능의 수락 또는 거부를 나타냅니다. 허용되는 값으로 "MX\_ACCEPT" 또는 "MX\_REJECT"를 사용할 수 있습니다.

메시지의 표현은 다음과 같습니다.

```text
       object {
          UniqueSessionId unique_session_id;
          JSONString capability_ack;
       } MXCapabilityAck : MXBase;
```

---
#### **C.1.5.  User-Plane Configuration Procedure**
---
##### **C.1.5.1.  MX User-Plane Configuration Request**

이 메시지는 MAMS에 대한 사용자 평면을 구성하기 위해 NCM에서 CCM으로 전송됩니다. 기본 정보\(부록 C.2.1\) 외에 다음 정보가 포함되어 있습니다.

\(a\) 앵커 연결 수: NCM이 지원하는 앵커 연결 수입니다.

\(b\) 앵커 연결 설정: 부록 C.2.11을 참조하세요.

메시지의 표현은 다음과 같습니다.

```text
       object {
          JSONNumber num_anchor_connections;
          SetupAnchorConns anchor_connections;
       } MXUPSetupConfigReq : MXBase;
```

---
##### **C.1.5.2.  MX User-Plane Configuration Confirmation**

이 메시지는 클라이언트에서 사용자 플레인을 성공적으로 구성한 후 CCM에서 보낸 사용자 플레인 설정 메시지에 대한 확인입니다. 이 메시지에는 다음 정보가 포함되어 있습니다.

\(a\) 고유 세션 ID: MX 기능 응답에 제공된 식별자와 동일한 식별자입니다. 부록 C.2.2를 참조하세요.

\(b\) MX 프로브 매개변수\(프로빙이 지원되는 경우 포함\).

- \(1\) 프로브 포트: 프로브 메시지를 수신하기 위한 UDP 포트입니다.

- \(2\) 앵커 연결 ID: 프로브 기능에 사용될 앵커 연결의 식별자입니다. MX UP 설치 구성 요청에 제공됩니다.

- \(3\) MX 구성 ID: 이 매개변수는 MX 구성 ID 매개변수가 사용자 평면 설정 구성에서 사용 가능한 경우에만 포함됩니다. 프로브 기능에 사용될 앵커 연결의 MX 구성 ID를 나타냅니다.

\(c\) 각 배송에는 다음 정보가 필요합니다.

-    연결:

- \(1\) 연결 ID : 클라이언트가 지원하는 전달 연결 ID입니다.

- \(2\) 클라이언트 적응 계층 매개변수: UDP 적응 계층이 사용 중인 경우 C-MADP 측에서 사용할 UDP 포트입니다.

메시지의 표현은 다음과 같습니다.

```text
       object {
          UniqueSessionId unique_session_id;
          [ProbeParam probe_param;]
          JSONNumber num_delivery_conn;
          ClientParam client_params <1...*>;
       } MXUPSetupConfigCnf : MXBase;
```

ProbeParam은 다음과 같이 정의됩니다.

```text
       object {
          JSONNumber probe_port;
          JSONNumber anchor_conn_id;
          [JSONNumber mx_configuration_id;]
       } ProbeParam;
```

ClientParam은 다음과 같이 정의됩니다.

```text
       object {
          JSONNumber connection_id;
          [AdaptationParam adapt_param;]
       } ClientParam;
```

AdaptationParam은 다음과 같이 정의됩니다.

```text
       object {
          JSONNumber udp_adapt_port;
       } AdaptationParam;
```

---
#### **C.1.6.  Reconfiguration Procedure**
---
##### **C.1.6.1.  MX Reconfiguration Request**

이 메시지는 클라이언트 측에서 연결을 재구성하는 경우 CCM에서 NCM으로 전송됩니다. 기본 정보\(부록 C.2.1\) 외에 다음 정보가 포함되어 있습니다.

\(a\) 고유 세션 ID: CCM-NCM 연관 식별자 부록 C.2.2.

\(b\) 재구성 작업: 재구성 작업 유형은 "설정", "해제" 또는 "업데이트" 중 하나일 수 있습니다.

\(c\) 연결 ID: 재구성이 수행되는 연결 ID입니다.

\(d\) IP 주소: 재구성 작업이 "설정" 또는 "업데이트"인 경우 포함됩니다.

\(e\) SSID: 연결 유형이 Wi-Fi인 경우 이 매개변수에는 클라이언트가 연결된 SSID가 포함됩니다.

\(f\) 연결의 MTU: N-MADP에서 단편화 및 연결 절차를 구성하기 위해 NCM이 사용하기 위해 클라이언트에서 계산되는 전달 경로의 MTU입니다.

\(g\) 연결 상태: 이 매개변수는 연결 여부를 나타냅니다.

- 연결이 현재 "비활성화됨", "활성화됨" 또는 "연결됨"입니다. 기본값: "연결됨".

\(h\) 전달 노드 ID: 클라이언트가 연결된 노드의 ID입니다. LTE의 경우 ECGI이다. Wi-Fi의 경우 AP ID 또는 MAC 주소입니다.

메시지의 표현은 다음과 같습니다.

```text
       object {
          UniqueSessionId unique_session_id;
          JSONString reconf_action;
          JSONNumber connection_id;
          JSONString ip_address;
          JSONString ssid;
          JSONNumber mtu_size;
          JSONString connection_status;
          [JSONString delivery_node_id;]
       } MXReconfReq : MXBase;
```

---
##### **C.1.6.2.  MX Reconfiguration Response**

이 메시지는 수신된 MX 재구성 요청에 대한 확인으로 NCM에서 CCM으로 전송되며 기본 정보\(부록 C.2.1에 정의됨\)만 포함합니다.

메시지의 표현은 다음과 같습니다.

```text
       object {
       } MXReconfRsp : MXBase;
```

---
#### **C.1.7.  Path Estimation Procedure**
---
##### **C.1.7.1.  MX Path Estimation Request**

이 메시지는 MX 경로 추정 결과를 전송하도록 CCM을 구성하기 위해 NCM에서 CCM을 향해 전송됩니다. 기본 정보\(부록 C.2.1\) 외에 다음 정보가 포함되어 있습니다.

\(a\) 연결 ID: 해당 경로가 연결되는 연결의 ID입니다.

- 견적보고서가 필요합니다.

\(b\) Init Probe Test Duration\(초기 프로브 테스트 기간\): 초기 프로브 테스트 기간\(밀리초\)입니다.

\(c\) 초기 프로브 테스트 속도: 초기 테스트 속도\(초당 메가비트\)입니다.

\(d\) Init Probe Size: 초기 프로브에 대한 각 패킷의 크기\(바이트\)입니다.

```text
   (e)  Init Probe-ACK: If an acknowledgment for probe is required.
        (Possible values: "yes", "no")
```

\(f\) 활성 프로브 주파수: 활성 프로브가 전송되는 빈도\(밀리초\)입니다.

\(g\) 활성 프로브 크기: 활성 프로브의 크기\(바이트\)입니다.

\(h\) 활성 프로브 기간: 활성 프로브가 수행되는 기간\(초\)입니다.

```text
   (i)  Active Probe-ACK: If an acknowledgment for probe is required.
        (Possible values: "yes", "no")
```

메시지의 표현은 다음과 같습니다.

```text
       object {
          JSONNumber connection_id;
          JSONNumber init_probe_test_duration_ms;
          JSONNumber init_probe_test_rate_Mbps;
          JSONNumber init_probe_size_bytes;
          JSONString init_probe_ack_req;
          JSONNumber active_probe_freq_ms;
          JSONNumber active_probe_size_bytes;
          JSONNumber active_probe_duration_sec;
          JSONString active_probe_ack_req;
       } MXPathEstReq : MXBase;
```

---
##### **C.1.7.2.  MX Path Estimation Results**

이 메시지는 NCM이 구성한 프로브 추정을 보고하기 위해 CCM에서 NCM으로 전송됩니다. 기본 정보\(부록 C.2.1\) 외에 다음 정보가 포함되어 있습니다.

\(a\) 고유 세션 ID: MX 기능 응답에 제공된 식별자와 동일한 식별자입니다. 부록 C.2.2를 참조하세요.

\(b\) 연결 ID: MX 경로 추정 결과 메시지가 필요한 연결의 ID입니다.

```text
   (c)  Init Probe Results: See Appendix C.2.12.

   (d)  Active Probe Results: See Appendix C.2.13.
```

메시지의 표현은 다음과 같습니다.

```text
       object {
          JSONNumber connection_id;
          UniqueSessionId unique_session_id;
          [InitProbeResults init_probe_results;]
          [ActiveProbeResults active_probe_results;]
       } MXPathEstResults : MXBase;
```

---
#### **C.1.8.  Traffic-Steering Procedure**
---
##### **C.1.8.1.  MX Traffic Steering Request**

이 메시지는 업링크 및 다운링크 구성에서 전달 측의 트래픽 조정을 활성화하기 위해 NCM에서 CCM으로 전송됩니다. 기본 정보\(부록 C.2.1\) 외에 다음 정보가 포함되어 있습니다.

\(a\) 연결 ID: 트래픽 스티어링이 정의되는 앵커 연결 번호입니다.

\(b\) MX 구성 ID: 트래픽 조정이 정의되는 MX 구성입니다.

```text
   (c)  Downlink Delivery: See Appendix C.2.14.
```

\(d\) 기본 UL 전달: 업링크에 대한 기본 전달 연결입니다. 모든 트래픽은 이 연결을 통해 업링크 방향으로 전달되어야 하며, TFT\(트래픽 흐름 템플릿\) 필터는 업링크 전달에 언급된 트래픽에만 적용되어야 합니다.

```text
   (e)  Uplink Delivery: See Appendix C.2.15.
```

\(f\) 기능 및 활성화 상태: 부록 C.2.5를 참조하세요.

메시지의 표현은 다음과 같습니다.

```text
       object {
          JSONNumber connection_id;
          [JSONNumber mx_configuration_id;]
          DLDelivery downlink_delivery;
          JSONNumber default_uplink_delivery;
          ULDelivery uplink_delivery;
          FeaturesActive feature_active;
       } MXTrafficSteeringReq : MXBase;
```

---
##### **C.1.8.2.  MX Traffic Steering Response**

이 메시지는 CCM에서 NCM으로 보내는 MX 트래픽 조정 요청에 대한 응답입니다. 기본 정보\(부록 C.2.1\) 외에 다음 정보가 포함되어 있습니다.

\(a\) 고유 세션 ID: MX 기능 응답에 제공된 식별자와 동일한 식별자입니다. 부록 C.2.2를 참조하세요.

\(b\) 기능 및 활성화 상태: 부록 C.2.5를 참조하세요.

메시지의 표현은 다음과 같습니다.

```text
       object {
          UniqueSessionId unique_session_id;
          FeaturesActive feature_active;
       } MXTrafficSteeringResp : MXBase;
```

---
#### **C.1.9.  MAMS Application MADP Association**
---
##### **C.1.9.1.  MX Application MADP Association Request**

이 메시지는 애플리케이션 요구 사항에 따라 이전에 MX UP 설정 구성 요청에서 제공된 MADP 인스턴스를 선택하기 위해 CCM에서 NCM으로 전송됩니다.

기본 정보\(부록 C.2.1\) 외에도 다음이 포함됩니다.

\(a\) 고유 세션 ID: 네트워크에서 CCM과 NCM 간의 세션을 고유하게 식별합니다. 부록 C.2.2를 참조하세요.

\(b\) 각 항목이 다음과 같은 MX 응용 프로그램 MADP 연결 목록입니다.

- \(1\) 연결 ID: MADP 인스턴스의 앵커 연결 번호를 나타냅니다.

- \(2\) MX 구성 ID: MADP 인스턴스의 MX 구성을 식별합니다.

- \(3\) 트래픽 흐름 템플릿 업링크: 부록 C.2.16에 정의된 트래픽 흐름 템플릿으로 업링크 방향에서 사용됩니다.

- \(4\) 트래픽 흐름 템플릿 다운링크: 부록 C.2.16에 정의된 트래픽 흐름 템플릿으로 다운링크 방향에서 사용됩니다.

메시지의 표현은 다음과 같습니다.

```text
       object {
          UniqueSessionId unique_session_id;
          MXAppMADPAssoc app_madp_assoc_list <1..*>;
       } MXAppMADPAssocReq : MXBase;
```

각 측정값 MXAppMADPassoc은 다음과 같이 표시됩니다.

```text
       object {
          JSONNumber connection_id;
          JSONNumber mx_configuration_id
          TrafficFlowTemplate tft_ul_list <1..*>;
          TrafficFlowTemplate tft_dl_list <1..*>;
       } MXAppMADPAssoc;
```

---
##### **C.1.9.2.  MX Application MADP Association Response**

이 메시지는 CCM의 MX 애플리케이션 MADP 연결 요청에 제공된 선택된 MADP 인스턴스를 확인하기 위해 NCM에서 CCM으로 전송됩니다.

기본 정보\(부록 C.2.1\) 외에도 요청이 성공했는지 여부에 대한 정보가 포함됩니다.

메시지의 표현은 다음과 같습니다.

```text
       object {
          JSONBool is_success;
       } MXAppMADPAssocResp : MXBase;
```

---
#### **C.1.10.  MX SSID Indication**

이 메시지는 네트워크 측에서 MAMS 엔터티가 지원하는 허용된 SSID 목록을 나타내기 위해 NCM에서 CCM으로 전송됩니다. 여기에는 SSID 목록이 포함되어 있습니다.

각 SSID는 SSID 유형\(SSID, BSSID 또는 HESSID 중 하나일 수 있음\)과 SSID 자체로 구성됩니다.

메시지의 표현은 다음과 같습니다.

```text
       object {
          SSID ssid_list <1..*>;
       } MXSSIDIndication : MXBase;
```

각 SSID는 다음과 같이 정의됩니다.

```text
       object {
          JSONString ssid_type;
          JSONString ssid;
       } SSID;
```

---
#### **C.1.11.  Measurements**
---
##### **C.1.11.1.  MX Measurement Configuration**

이 메시지는 CCM에서 보고하는 주기 측정을 구성하기 위해 NCM에서 CCM으로 전송됩니다. 메시지에는 측정 구성 목록이 포함되어 있으며 각 요소에는 다음 정보가 포함되어 있습니다.

\(a\) 연결 ID: 보고가 구성되는 전달 연결의 연결 ID입니다.

\(b\) 연결 유형: 보고가 구성되는 연결 유형입니다. "LTE", "Wi-Fi", "5G\_NR"일 수 있습니다.

\(c\) 측정 보고서 구성: 부록 C.2.17에 정의된 연결 유형을 기반으로 한 실제 보고서 구성입니다.

메시지의 표현은 다음과 같습니다.

```text
       object {
          MeasReportConf measurement_configuration <1..*>;
       } MXMeasReportConf : MXBase;
```

각 측정 MeasReportConf는 다음과 같이 표시됩니다.

```text
       object {
          JSONNumber connection_id;
          JSONString connection_type;
          MeasReportConfs meas_rep_conf <1..*>;
       } MeasReportConf;
```

---
##### **C.1.11.2.  MX Measurement Report**

이 메시지는 측정 구성 후 CCM에서 NCM으로 주기적으로 전송됩니다. 기본 정보 외에도 다음 정보가 포함됩니다.

\(a\) 고유 세션 ID: MX 기능 응답에 제공된 식별자와 동일한 식별자입니다. 부록 C.2.2에 설명되어 있습니다.

\(b\) 각 배송 연결에 대한 측정 보고서는 부록 C.2.18에 정의된 대로 고객이 측정합니다.

메시지의 표현은 다음과 같습니다.

```text
       object {
          UniqueSessionId unique_session_id;
          MXMeasRep measurement_reports <1..*>;
       } MXMeasurementReport : MXBase;
```

---
#### **C.1.12.  Keep-Alive**
---
##### **C.1.12.1.  MX Keep-Alive Request**

MX Keep-Alive 요청은 Keep-Alive 타이머 또는 핸드오버 이벤트가 만료되면 NCM 또는 CCM에서 전송될 수 있습니다. 피어는 MX Keep-Alive 응답으로 이 요청에 응답해야 합니다. 피어로부터 응답이 없는 경우 MAMS 연결이 끊어진 것으로 가정하고 CCM은 MX Discover 메시지를 전송하여 새로운 연결을 설정해야 합니다.

기본 정보 외에도 다음 정보가 포함됩니다.

\(a\) 연결 유지 이유: 이 메시지를 보내는 이유는 "시간 초과" 또는 "인계"일 수 있습니다.

\(b\) 고유 세션 ID: CCM-NCM 연관 식별자 부록 C.2.2.

\(c\) 연결 ID: 이유가 "Handover"인 경우 핸드오버가 감지된 연결 ID입니다.

\(d\) Delivery Node ID: 핸드오버가 실행되는 대상 전달 노드 ID\(ECGI 또는 Wi-Fi AP ID/MAC 주소\)입니다.

메시지의 표현은 다음과 같습니다.

```text
       object {
          JSONString keep_alive_reason;
          UniqueSessionId unique_session_id;
          JSONNumber connection_id;
          JSONString delivery_node_id;
       } MXKeepAliveReq : MXBase;
```

---
##### **C.1.12.2.  MX Keep-Alive Response**

```text
   On receiving an MX Keep-Alive Request from a peer, the NCM/CCM shall
   immediately respond with an MX Keep-Alive Response on the same
   delivery path from where the request arrived.  In addition to the
   base information, it contains the unique session identifier for the
   CCM-NCM association (defined in Appendix C.2.2)
```

메시지의 표현은 다음과 같습니다.

```text
       object {
          UniqueSessionId unique_session_id;
       } MXKeepAliveResp : MXBase;
```

---
#### **C.1.13.  Session Termination Procedure**
---
##### **C.1.13.1.  MX Session Termination Request**

NCM 또는 CCM이 어떤 이유로든 더 이상 MAMS를 처리할 수 없는 경우 MX 세션 종료 요청을 피어에 보낼 수 있습니다. 기본 정보 외에도 고유 세션 ID와 종료 이유가 포함됩니다. 이는 "MX\_NORMAL\_RELEASE", "MX\_NO\_RESPONSE" 또는 "INTERNAL\_ERROR"일 수 있습니다.

메시지의 표현은 다음과 같습니다.

```text
       object {
          UniqueSessionId unique_session_id;
          JSONString reason;
       } MXSessionTerminationReq : MXBase;
```

---
##### **C.1.13.2.  MX Session Termination Response**

피어로부터 MX 세션 종료 요청을 수신하면 NCM/CCM은 요청이 도착한 동일한 전달 경로에서 MX 세션 종료 응답으로 응답하고 MAMS 관련 리소스 및 설정을 정리해야 합니다. CCM은 MX Discover 메시지로 새로운 세션을 다시 시작해야 합니다.

메시지의 표현은 다음과 같습니다.

```text
         object {
            UniqueSessionId unique_session_id;
         } MXSessionTerminationResp : MXBase;
```

---
#### **C.1.14.  Network Analytics**
---
##### **C.1.14.1.  MX Network Analytics Request**

이 메시지는 네트워크 분석 기능에서 예측한 대역폭, 지터, 대기 시간 및 신호 품질과 같은 매개변수를 요청하기 위해 CCM에서 NCM으로 전송됩니다. 기본 정보 외에도 다음 매개변수가 포함되어 있습니다.

\(a\) 고유 세션 ID: MX 기능 응답에 제공된 식별자와 동일한 식별자입니다. 부록 C.2.2에 설명되어 있습니다.

\(b\) 매개변수 목록: CCM이 포함된 매개변수 목록입니다.

- 관심 있음: "대역폭", "지터", "대기 시간" 및 "신호 품질" 중 하나 이상.

메시지의 표현은 다음과 같습니다.

```text
       object {
          UniqueSessionId unique_session_id;
          JSONString params <1..*>;
       } MXNetAnalyticsReq : MXBase;
```

params 객체는 다음 값 중 하나 이상을 사용할 수 있습니다.

```text
       "bandwidth"
       "jitter"
       "latency"
       "signal_quality"
```

---
##### **C.1.14.2.  MX Network Analytics Response**

이 메시지는 MX 네트워크 분석 요청에 대한 응답으로 NCM에서 CCM으로 전송됩니다. 클라이언트가 보유한 각 전달 연결에 대해 NCM은 요청된 매개변수 예측과 각각의 가능성\(1\~100%\)을 보고합니다.

기본 정보 외에도 다음 매개변수가 포함되어 있습니다.

\(a\) 배송 연결 수: 배송 횟수

- 현재 클라이언트에 대해 구성된 연결입니다.

\(b\) 각 배송마다 다음 정보가 제공됩니다.

-    연결:

- \(1\) 연결 ID: 매개변수가 예측되는 전달 연결의 연결 ID입니다.

- \(2\) 연결 유형: 연결 유형입니다. 'Wi-Fi', '5G\_NR', 'MulteFire' 또는 'LTE'일 수 있습니다.

- \(3\) 예측이 요청되는 매개변수 목록. 여기서 각 예측 매개변수는 다음과 같이 구성됩니다.

- \(a\) 매개변수 이름: 예측되는 매개변수의 이름입니다. "대역폭", "지터", "대기 시간" 또는 "신호 품질" 중 하나일 수 있습니다.

\(b\) 추가 매개변수: 매개변수 이름이

- "signal\_quality"이면 "lte\_rsrp", "lte\_rsrq", "nr\_rsrp", "nr\_rsrq" 또는 "wifi\_rssi"와 같은 품질 매개변수를 한정합니다.

- \(c\) 예측값: 매개변수의 예측값과 해당되는 경우 추가 매개변수를 제공합니다.

- \(d\) 가능성\(Likelihood\): 예측값의 확률론적 가능성을 제공합니다.

- \(e\) 유효 시간: 예측이 유효한 기간입니다.

메시지의 표현은 다음과 같습니다.

```text
       object {
          MXAnalyticsList param_list <1..*>;
       } MXNetAnalyticsResp : MXBase;
```

여기서 MXAnalyticsList는 다음과 같이 정의됩니다.

```text
       object {
          JSONNumber connection_id;
          JSONString connection_type;
          ParamPredictions predictions <1..*>;
       } MXAnalyticsList;
```

각 ParamPredictions 항목은 다음과 같이 정의됩니다.

```text
       object {
          JSONString param_name;
          [JSONString additional_param;]
          JSONNumber prediction;
          JSONNumber likelihood;
          JSONNumber validity_time;
       } ParamPredictions;
```

---
### **C.2.  Protocol Specification: Data Types**
---
#### **C.2.1.  MXBase**

이는 CCM과 NCM 교환기 간의 모든 메시지가 필수 정보로 가져야 하는 기본 정보입니다. 여기에는 다음 정보가 포함됩니다.

\(a\) 버전: 사용된 MAMS의 버전입니다.

\(b\) 메시지 유형: 전송되는 메시지 유형. 여기서 다음은 유효한 값으로 간주됩니다.

```text
          "mx_discover"
          "mx_system_info"
          "mx_capability_req"
          "mx_capability_rsp"
          "mx_capability_ack"
          "mx_up_setup_conf_req"
          "mx_up_setup_cnf"
          "mx_reconf_req"
          "mx_reconf_rsp"
          "mx_path_est_req"
          "mx_path_est_results"
          "mx_traffic_steering_req"
          "mx_traffic_steering_rsp"
          "mx_ssid_indication"
          "mx_keep_alive_req"
          "mx_keep_alive_rsp"
          "mx_measurement_conf"
          "mx_measurement_report"
          "mx_session_termination_req"
          "mx_session_termination_rsp"
          "mx_app_madp_assoc_req"
          "mx_app_madp_assoc_rsp"
          "mx_network_analytics_req"
          "mx_network_analytics_rsp"
```

\(c\) 일련번호: 고유하게 식별하기 위한 일련번호

- 특정 메시지 교환\(예: MX 기능 요청/응답/승인\)

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          JSONString version;
          JSONString message_type;
          JSONNumber sequence_num;
       } MXBase;
```

---
#### **C.2.2.  Unique Session ID**

이 데이터 유형은 CCM과 NCM 엔터티 간의 고유한 세션 ID를 나타냅니다. 여기에는 네트워크에서 고유한 NCM ID와 해당 세션에 대해 NCM이 할당한 세션 ID가 포함됩니다. MX Discover 메시지를 수신하면 세션이 존재하는 경우 이전 세션 ID가 MX 시스템 정보 메시지에 반환됩니다. 그렇지 않으면 NCM은 CCM에 새 세션 ID를 할당하고 MX 시스템 정보 메시지에 새 ID를 보냅니다.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          JSONNumber ncm_id;
          JSONNumber session_id;
       } UniqueSessionId;
```

---
#### **C.2.3.  NCM Connections**

이 데이터 유형은 클라이언트에 대한 MAMS 연결을 위해 NCM에서 사용할 수 있는 연결을 나타냅니다. 여기에는 사용 가능한 NCM 연결 목록이 포함되어 있으며 각 연결에는 다음 정보가 있습니다.

```text
   (a)  Connection Information: See Appendix C.2.4.
```

\(b\) NCM 엔드포인트 정보: CCM에 대해 NCM 엔드포인트에 의해 노출된 IP 주소 및 포트를 포함합니다.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          NCMConnection items <1..*>;
       } NCMConnections;
```

여기서 NCMConnection은 다음과 같이 정의됩니다.

```text
       object {
          NCMEndPoint ncm_end_point;
       } NCMConnection : ConnectionInfo;
```

여기서 NCMEndPoint는 다음과 같이 정의됩니다.

```text
       object {
          JSONString ip_address;
          JSONNumber port;
       } NCMEndPoint;
```

---
#### **C.2.4.  Connection Information**

이 데이터 유형은 연결 ID와 연결 유형의 매핑을 제공합니다. 여기에는 다음 정보가 포함됩니다.

\(a\) 연결 ID: 연결을 식별하는 고유 번호입니다.

\(b\) 연결 유형: 연결 유형은 "Wi-Fi", "5G\_NR", "MulteFire" 또는 "LTE"일 수 있습니다.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          JSONNumber connection_id;
          JSONString connection_type;
       } ConnectionInfo;
```

---
#### **C.2.5.  Features and Their Activation Status**

이 데이터 유형은 활성화 상태와 함께 모든 기능 목록을 제공합니다. 각 기능 상태에는 다음이 포함됩니다.

\(a\) 기능 이름: 기능 이름은 다음 중 하나일 수 있습니다.

- 다음:

```text
       "lossless_switching"
       "fragmentation"
       "concatenation"
       "uplink_aggregation"
       "downlink_aggregation"
       "measurement"
```

\(b\) 활성 상태: 기능의 활성화 상태: "true"는 해당 기능이 활성 상태임을 의미하고, "false"는 해당 기능이 비활성 상태임을 의미합니다.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          FeatureInfo items <1..*>;
       } FeaturesActive;
```

여기서 FeatureInfo는 다음과 같이 정의됩니다.

```text
       object {
          JSONString feature_name;
          JSONBool active;
       } FeatureInfo;
```

---
#### **C.2.6.  Anchor Connections**

이 데이터 유형에는 앵커\(코어\) 측에서 지원되는 연결 정보 항목\(부록 C.2.4\) 목록이 포함되어 있습니다.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          ConnectionInfo items <1..*>;
       } AnchorConnections;
```

---
#### **C.2.7.  Delivery Connections**

이 데이터 유형에는 전달\(액세스\) 측에서 지원되는 연결 정보\(부록 C.2.4\) 목록이 포함됩니다.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          ConnectionInfo items <1..*>;
       } DeliveryConnections;
```

---
#### **C.2.8.  Method Support**

이 데이터 유형은 특정 수렴 또는 적응 방법에 대한 지원을 제공합니다. 이는 다음으로 구성됩니다:

\(a\) 방법: 방법의 이름입니다.

\(b\) 지원 여부: 위에 나열된 방법이 지원되는지 여부입니다. 가능한 값은 "true"와 "false"입니다.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          JSONString method;
          JSONBool supported;
       } MethodSupport;
```

---
#### **C.2.9.  Convergence Methods**

이 데이터 유형에는 모든 수렴 방법 목록과 해당 지원 상태가 포함됩니다. 가능한 수렴 방법은 다음과 같습니다.

```text
       "GMA"
       "MPTCP_Proxy"
       "GRE_Aggregation_Proxy"
       "MPQUIC"
```

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          MethodSupport items <1..*>;
       } ConvergenceMethods;
```

---
#### **C.2.10.  Adaptation Methods**

이 데이터 유형에는 모든 적응 방법 목록과 해당 지원 상태가 포함됩니다. 가능한 적응 방법은 다음과 같습니다.

```text
       "UDP_without_DTLS"
       "UDP_with_DTLS"
       "IPsec"
       "Client_NAT"
```

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          MethodSupport items <1..*>;
       } AdaptationMethods;
```

---
#### **C.2.11.  Setup of Anchor Connections**

이 데이터 유형은 클라이언트 측에 필요한 각 앵커 연결에 대한 설정 구성을 나타냅니다. 여기에는 연결 ID 및 앵커 연결 유형 외에도 다음 정보가 포함됩니다.

\(a\) 활성 MX 구성 수: 이 앵커에 대해 둘 이상의 활성 구성이 있는 경우 해당 연결 수를 식별합니다.

\(b\) 각 활성 구성에 대해 다음 수렴 매개변수가 제공됩니다.

- \(1\) MX 구성 ID: 활성 구성이 여러 개인 경우 존재합니다. 이 MADP 인스턴스 ID에 대한 구성을 식별합니다.

- \(2\) 수렴방식 : 수렴방식을 선택합니다. 부록 C.2.9에 나열된 지원되는 수렴 방법 중 하나여야 합니다.

\(3\) 수렴 방법 매개 변수: 설명

- 부록 C.2.11.1

- \(4\) 전달 연결 수: 해당 앵커 연결에 대해 지원되는 전달 연결\(액세스 측\) 수입니다.

\(5\) 배송 연결 설정: 설명

- 부록 C.2.11.2.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          SetupAnchorConn items <1..*>;
       } SetupAnchorConns;
```

각 앵커 연결 구성은 다음과 같이 정의됩니다.

```text
       object {
          [JSONNumber num_active_mx_conf;]
          ConvergenceConfig convergence_config
       } SetupAnchorConn : ConnectionInfo;
```

여기서 각 Convergence 구성은 다음과 같이 정의됩니다.

```text
       object {
          [JSONNumber mx_configuration_id;]
          JSONString convergence_method;
          ConvergenceMethodParam convergence_method_params;
          JSONNumber num_delivery_connections;
          SetupDeliveryConns delivery_connections;
       } ConvergenceConfig;
```

---
##### **C.2.11.1.  Convergence Method Parameters**

이 데이터 유형은 수렴 방법에 사용되는 매개변수를 나타내며 다음을 포함합니다.

\(a\) 프록시 IP: 선택한 융합 방식에서 제공하는 프록시의 IP 주소입니다.

\(b\) Proxy Port: 선택한 수렴 방식에 의해 제공되는 Proxy의 포트입니다.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          JSONString proxy_ip;
          JSONString proxy_port;
          JSONString client_key;
       } ConvergenceMethodParam;
```

---
##### **C.2.11.2.  Setup Delivery Connections**

클라이언트에서 구성할 전달 연결 및 해당 매개변수 목록입니다. 연결 정보\(부록 C.2.4\)로 정의된 각 전달 연결에는 선택적으로 다음이 포함됩니다.

\(a\) 적응 방법: 선택한 적응 방법 이름입니다. 이는 부록 C.2.10에 나열된 방법 중 하나입니다.

\(b\) 적응 방법 매개변수: 적응 방법에 따라 다음 매개변수 중 하나 이상이 제공되어야 합니다.

```text
        (1)  Tunnel IP address

        (2)  Tunnel Port number

        (3)  Shared Secret
```

- \(4\) MX 헤더 최적화: 적응 방법이 UDP\_without\_DTLS 또는 UDP\_with\_DTLS이고 수렴이 GMA인 경우 이 플래그는 MX PDU의 IP 헤더에 있는 체크섬 필드와 길이 필드를 MX에서 다시 계산해야 하는지 여부를 나타냅니다. 융합 레이어. 가능한 값은 "true"와 "false"입니다. "true"이면 두 필드 모두 변경되지 않고 그대로 유지됩니다. 그렇지 않으면 두 필드를 모두 다시 계산해야 합니다. 이 필드가 없으면 기본값인 "false"를 고려해야 합니다.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          SetupDeliveryConn items <1..*>;
       } SetupDeliveryConns;
```

여기서 각 "SetupDeliveryConn"은 다음으로 구성됩니다.

```text
       object {
         [JSONString adaptation_method;]
         [AdaptationMethodParam adaptation_method_param;]
       } SetupDeliveryConn : ConnectionInfo;
```

여기서 AdaptationMethodParam은 다음과 같이 정의됩니다.

```text
       object {
          JSONString tunnel_ip_addr;
          JSONString tunnel_end_port;
          JSONString shared_secret;
          [JSONBool mx_header_optimization;]
       } AdaptationMethodParam;
```

---
#### **C.2.12.  Init Probe Results**

이 데이터 유형은 NCM의 init 프로브 요청 결과를 제공합니다. 이는 다음 정보로 구성됩니다.

\(a\) 손실된 프로브: 손실된 프로브의 백분율입니다.

\(b\) 프로브 지연: 프로브 메시지의 평균 지연\(마이크로초\)입니다.

\(c\) 프로브 속도: 달성된 프로브 속도\(초당 메가비트\)입니다.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          JSONNumber lost_probes_percentage;
          JSONNumber probe_rate_Mbps;
       } InitProbeResults;
```

---
#### **C.2.13.  Active Probe Results**

이 데이터 유형은 NCM의 활성 프로브 요청 결과를 제공합니다. 이는 다음 정보로 구성됩니다.

\(a\) 평균 프로브 처리량: 달성된 평균 활성 프로브 처리량\(초당 메가비트\)입니다.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          JSONNumber avg_tput_last_probe_duration_Mbps;
       } ActiveProbeResults;
```

---
#### **C.2.14.  Downlink Delivery**

이 데이터 유형은 다운링크 방향에서 사용되도록 전달 측에서 활성화된 연결 목록을 나타냅니다.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          JSONNumber connection_id <1..*>;
       } DLDelivery;
```

---
#### **C.2.15.  Uplink Delivery**

이 데이터 유형은 업링크 방향에서 사용되는 전송 측에 대해 활성화된 연결 및 매개변수 목록을 나타냅니다.

업링크 전달은 여러 업링크 전달 엔터티로 구성됩니다. 여기서 각 엔터티는 트래픽 흐름 템플릿\(TFT\)\(부록 C.2.16\)과 업링크의 연결 ID 목록으로 구성됩니다. 여기서 이러한 트래픽 흐름 템플릿에 적합한 트래픽은 리디렉션될 수 있습니다. .

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          ULDeliveryEntity ul_del <1..*>;
       } ULDelivery;
```

각 업링크 전달 엔터티는 다음 데이터 유형으로 구성됩니다.

```text
       object {
          TrafficFlowTemplate ul_tft <1..*>;
          JSONNumber connection_id <1..*>;
       } ULDeliveryEntity;
```

---
#### **C.2.16.  Traffic Flow Template**

트래픽 흐름 템플릿은 일반적으로 \[ServDesc3GPP\]에 지정된 지침을 따릅니다.

MAMS의 트래픽 흐름 템플릿은 다음 중 하나 이상으로 구성됩니다.

\(a\) 원격 주소 및 마스크: CIDR\(Classless Inter-Domain Routing\) 표기법으로 표현되는 원격 주소의 IP 주소 및 서브넷입니다. 기본값: "0.0.0.0/0".

```text
   (b)  Local Address and Mask: IP address and subnet for local
        addresses represented in CIDR notation.  Default: "0.0.0.0/0"
```

\(c\) 프로토콜 유형: IP 패킷에 의해 전달되는 페이로드의 IP 프로토콜 번호\(예: UDP, TCP\). 기본값: 255.

\(d\) 로컬 포트 ​​범위: 트래픽 흐름 템플릿이 적용 가능한 로컬 포트에 대한 포트 범위입니다. 기본값: 시작=0, 끝=65535.

\(e\) 원격 포트 범위: 트래픽 흐름 템플릿이 적용 가능한 원격 포트에 대한 포트 범위입니다. 기본값: 시작=0, 끝=65535.

\(f\) 트래픽 클래스: IPv4에서는 서비스 유형으로, IPv6에서는 트래픽 클래스로 표시됩니다. 기본값: 255

\(g\) 흐름 라벨\(Flow Label\): IPv6 프로토콜 유형에만 적용 가능한 IPv6용 흐름 라벨입니다. 기본값: 0.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          JSONString remote_addr_mask;
          JSONString local_addr_mask;
          JSONNumber protocol_type;
          PortRange local_port_range;
          PortRange remote_port_range;
          JSONNumber traffic_class;
          JSONNumber flow_label;
       } TrafficFlowTemplate;
```

포트 범위는 다음과 같이 정의됩니다.

```text
       object {
          JSONNumber start;
          JSONNumber end;
       } PortRange;
```

---
#### **C.2.17.  Measurement Report Configuration**

이 데이터 유형은 측정 이벤트 보고를 위해 CCM에 대해 NCM에서 수행한 구성을 나타냅니다.

\(a\) 측정 보고 매개변수: 측정하여 보고해야 하는 매개변수입니다. 이는 연결 유형에 따라 다릅니다.

- \(1\) 연결 유형이 "Wi-Fi"인 경우 허용되는 측정 유형 매개변수는 "WLAN\_RSSI", "WLAN\_LOAD", "UL\_TPUT", "DL\_TPUT", "EST\_UL\_TPUT" 및 "EST\_DL\_TPUT"입니다.

- \(2\) 연결 유형이 "LTE"인 경우 허용되는 측정 유형 매개변수는 "LTE\_RSRP", "LTE\_RSRQ", "UL\_TPUT", "DL\_TPUT"입니다.

- \(3\) 연결 유형이 "5G\_NR"인 경우 허용되는 측정 유형 매개변수는 "NR\_RSRP", "NR\_RSRQ", "UL\_TPUT" 및 "DL\_TPUT"입니다.

\(b\) 임계값: 보고를 위한 최고 및 최저 임계값입니다.

\(c\) 기간: 보고 기간\(밀리초\)입니다.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          JSONString meas_rep_param;
          Threshold meas_threshold;
          JSONNumber meas_period;
       } MeasReportConfs;
```

여기서 "임계값"은 다음과 같이 정의됩니다.

```text
       object {
          JSONNumber high;
          JSONNumber low;
       } Threshold;
```

---
#### **C.2.18.  Measurement Report**

이 데이터 유형은 측정된 각 액세스 네트워크에 대해 CCM에서 보고한 측정값을 나타냅니다. 이 유형에는 연결 정보, 셀\(ECGI\)이나 Wi-Fi 액세스 포인트 ID 또는 MAC 주소\(또는 다른 기술의 동등한 식별자\)를 식별하는 전달 노드 ID, 마지막으로 CCM에서 수행된 실제 측정이 포함됩니다. 측정 기간.

이 데이터 유형의 표현은 다음과 같습니다.

```text
       object {
          JSONNumber connection_id;
          JSONString connection_type;
          JSONString delivery_node_id;
          Measurement measurements <1..*>;
       } MXMeasRep;
```

여기서 측정은 측정 유형 및 값의 키-값 쌍으로 정의됩니다. 특정 연결에 대해 보고되는 정확한 측정 유형 매개변수는 해당 연결 유형에 따라 다릅니다. 각 연결 유형에 대한 측정 유형 매개변수는 부록 C.2.17에 지정되어 있습니다.

```text
       object {
          JSONString measurement_type;
          JSONNumber measurement_value;
       } Measurement;
```

---
### **C.3.  Schemas in JSON**
---
#### **C.3.1.  MX Base Schema**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "definitions": {
       "message_type_def": {
         "enum": [
           "mx_discover",
           "mx_system_info",
           "mx_capability_req",
           "mx_capability_rsp",
           "mx_capability_ack",
           "mx_up_setup_conf_req",
           "mx_up_setup_cnf",
           "mx_reconf_req",
           "mx_reconf_rsp",
           "mx_path_est_req",
           "mx_path_est_results",
           "mx_traffic_steering_req",
           "mx_traffic_steering_rsp",
           "mx_ssid_indication",
           "mx_keep_alive_req",
           "mx_keep_alive_rsp",
           "mx_measurement_conf",
           "mx_measurement_report",
           "mx_session_termination_req",
           "mx_session_termination_rsp",
           "mx_app_madp_assoc_req",
           "mx_app_madp_assoc_rsp",
           "mx_network_analytics_req",
           "mx_network_analytics_rsp"
         ],
         "type": "string"
       },
       "sequence_num_def": {
         "minimum": 1,
         "type": "integer"
       },
       "version_def": {
         "type": "string"
       }
      },
     "id": "https://example.com/mams/mx_base_def.json"
   }
```

---
#### **C.3.2.  MX Definitions**

```text
   {
       "$schema": "https://json-schema.org/draft-04/schema#",
       "definitions": {
           "adapt_method": {
               "enum": [
                   "UDP_without_DTLS",
                   "UDP_with_DTLS",
                   "IPsec",
                   "Client_NAT"
               ],
               "type": "string"
           },
           "conv_method": {
               "enum": [
                   "GMA",
                   "MPTCP_Proxy",
                   "GRE_Aggregation_Proxy",
                   "MPQUIC"
               ],
               "type": "string"
           },
           "supported": {
               "type": "boolean"
           },
           "active": {
               "type": "boolean"
           },
           "connection_id": {
               "type": "integer"
           },
           "feature_name": {
               "enum": [
                   "lossless_switching",
                   "fragmentation",
                   "concatenation",
                   "uplink_aggregation",
                   "downlink_aggregation",
                   "measurement"
                   "probing"
               ],
               "type": "string"
           },
           "connection_type": {
               "enum": [
                   "Wi-Fi",
                   "5G_NR",
                   "MulteFire",
                   "LTE"
               ],
               "type": "string"
           },
           "ip_address": {
                   "type": "string"
           },
           "port": {
               "maximum": 65535,
               "minimum": 1,
               "type": "integer"
           },
           "adaptation_method": {
               "allOf" : [
                   { "$ref": "#/definitions/adapt_method" },
                   { "$ref": "#/definitions/supported" }
               ]
           },
           "connection": {
               "allOf" : [
                   { "$ref": "#/definitions/connection_id" },
                   { "$ref": "#/definitions/connection_type" }
               ]
           },
           "convergence_method": {
               "allOf": [
                   { "$ref": "#/definitions/conv_method" },
                   { "$ref": "#/definitions/supported" }
               ]
           },
           "feature_status": {
               "allOf": [
                   { "$ref": "#/definitions/feature_name" },
                   { "$ref": "#/definitions/active" }
               ]
           },
           "ncm_end_point": {
               "allOf" : [
                   { "$ref" : "#/definitions/ip_address" },
                   { "$ref" : "#/definitions/port" }
               ]
           },
           "capability_acknowledgment" : {
               "enum" : [
                   "MX_ACCEPT",
                   "MX_REJECT"
               ],
               "type" : "string"
           },
           "threshold" : {
               "high" : {
                   "type" : "integer"
               },
               "low" : {
                   "type" : "integer"
               },
               "type" : "object"
           },
           "meas_report_param" : {
               "enum" : [
                       "WLAN_RSSI",
                       "WLAN_LOAD",
                       "LTE_RSRP",
                       "LTE_RSRQ",
                       "UL_TPUT",
                       "DL_TPUT",
                       "EST_UL_TPUT",
                       "EST_DL_TPUT",
                       "NR_RSRP",
                       "NR_RSRQ"
               ],
               "type" : "string"
           },
           "meas_report_conf" : {
               "meas_rep_param" : {
                   "$ref" : "#definitions/meas_report_param"
               },
               "meas_threshold" : {
                   "$ref" : "#definitions/threshold"
               },
               "meas_period_ms" : {
                   "type" : "integer"
               },
               "type" : "object"
           },
           "ssid_types" : {
               "enum" : [
                   "ssid",
                   "bssid",
                   "hessid"
               ],
               "type" : "string"
           },
           "ip_addr_mask" : {
               "type" : "string",
               "default" : "0.0.0.0/0"
           },
           "port_range" : {
               "start" : {
                   "type" : "integer",
                   "default" : 0
               },
               "end" : {
                   "type" : "integer",
                   "default" : 65535
               }
           },
           "traffic_flow_template" : {
               "remote_addr_mask" : {
                   "$ref" : "#definitions/ip_addr_mask" },
               "local_addr_mask" : {
                   "$ref" : "#definitions/ip_addr_mask" },
               "protocol_type" : {
                   "type" : "integer",
                   "minimum" : 0,
                   "maximum" : 255
               },
               "local_port_range" : {
                   "$ref" : "#definitions/port_range" },
               "remote_port_range" : {
                   "$ref" : "#definitions/port_range" },
               "traffic_class" : {
                   "type" : "integer",
                   "default" : 255
               },
               "flow_label" : {
                   "type" : "integer",
                   "default" : 0
               }
           },
           "delivery_node_id" : {
               "type" : "string"
           },
           "unique_session_id" : {
               "type" : "object",
               "ncm_id" : {
                 "type" : "integer"
               },
               "session_id" : {
                 "type" : "integer"
               }
           },
           "keep_alive_reason" : {
               "enum" : [
                   "Timeout",
                   "Handover"
               ],
               "type" : "string"
           },
           "connection_status" : {
               "enum" : [
                   "disabled",
                   "enabled",
                   "connected"
               ],
               "type" : "string",
               "default" : "connected"
           },
           "adaptation_param" : {
              "udp_adapt_port" : {
                 "type" : "integer"
              }
           },
           "probe_param" : {
               "probe_port" : {
                   "type" : "integer"
               },
               "anchor_conn_id" : {
                   "type" : "integer"
               },
               "mx_configuration_id" : {
                   "type" : "integer"
               }
       },
           "client_param" : {
               "connection_id" : {
                   "type" : "integer"
               },
               "adapt_param" : {
                   "type" : {"$ref" : "#definitions/adaptation_param" }
               }
           }
       },
               "adapt_param": {
               "tunnel_ip_addr": {
                   "type": "string"
               },
               "tunnel_end_port": {
                   "type": "integer"
               },
               "shared_secret": {
                   "type": "string"
               },
               "mx_header_optimization": {
                   "type": "boolean",
                   "default": false
               }
           },
           "delivery_connection": {
               "connection_id": {
                   "$ref": "#definitions/connection_id"
               },
               "connection_type": {
                   "$ref": "#definitions/connection_type"
               },
               "adaptation_method": {
                   "$ref": "#definitions/adapt_method"
               },
               "adaptation_method_param": {
                   "$ref": "#definitions/adapt_param"
               }
           },
           "app_madp_assoc": {
               "anchor_conn_id" : {
                   "type" : "integer"
               },
               "mx_configuration_id" : {
                   "type" : "integer"
               }

               "ul_tft_list": {
                   "items": {
                       "$ref": "#definitions/traffic_flow_template"
                   },
                   "type": "array"
               },
               "dl_tft_list": {
                   "items": {
                       "$ref": "#definitions/traffic_flow_template"
                   },
                   "type": "array"
               }
           },
           "predict_param_name": {
               "enum": [
                   "validity_time",
                   "bandwidth",
                   "jitter",
                   "latency",
                   "signal_quality"
               ],
               "type": "string"
           },
           "predict_add_param_name": {
               "enum": [
                   "WLAN_RSSI",
                   "WLAN_LOAD",
                   "LTE_RSRP",
                   "LTE_RSRQ",
                   "NR_RSRP",
                   "NR_RSRQ"
               ],
               "type": "string"
           },
       "id": "https://example.com/mams/definitions.json"
   }
```

---
#### **C.3.3.  MX Discover**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "additionalProperties": false,
     "id": "https://example.com/mams/mx_discover.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"}
     },
     "type": "object"
   }
```

---
#### **C.3.4.  MX System Info**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "additionalProperties": false,
     "id": "https://example.com/mams/mx_system_info.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "ncm_connections": {
         "type": "array",
         "items": [
           {"$ref": "definitions.json#/connection"},
           {"$ref": "definitions.json#/ncm_end_point"}
         ]
       }
     },
     "type": "object"
   }
```

---
#### **C.3.5.  MX Capability Request**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "additionalProperties": false,
     "id": "https://example.com/mams/mx_capability_req.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "adaptation_methods": {
         "items": {"$ref": "definitions.json#/adaptation_method"},
         "type": "array"
       },
       "anchor_connections": {
         "items": {"$ref": "definitions.json#/connection"},
         "type": "array"
       },
       "convergence_methods": {
         "items": {"$ref": "definitions.json#/convergence_method"},
         "type": "array"
       },
       "delivery_connections": {
         "items": {"$ref": "definitions.json#/connection"},
         "type": "array"
       },
       "feature_active": {
         "items": {"$ref": "definitions.json#/feature_status"},
         "type": "array"
       },
       "num_anchor_connections": {
         "type": "integer"
       },
       "num_delivery_connections": {
         "type": "integer"
       }
     },
     "type": "object"
   }
```

---
#### **C.3.6.  MX Capability Response**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "additionalProperties": false,
     "id": "https://example.com/mams/mx_capability_rsp.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "adaptation_methods": {
         "items": {"$ref": "definitions.json#/adaptation_method"},
         "type": "array"
       },
       "anchor_connections": {
         "items": {"$ref": "definitions.json#/connection"},
         "type": "array"
       },
       "convergence_methods": {
         "items": {"$ref": "definitions.json#/convergence_method"},
         "type": "array"
       },
       "delivery_connections": {
         "items": {"$ref": "definitions.json#/connection"},
         "type": "array"
       },
       "feature_active": {
         "items": {"$ref": "definitions.json#/feature_status"},
         "type": "array"
       },
       "num_anchor_connections": {
         "type": "integer"
       },
       "num_delivery_connections": {
         "type": "integer"
       },
       "unique_session_id": {
         "$ref": "definitions.json#/unique_session_id"
       }
     },
     "type": "object"
   }
```

---
#### **C.3.7.  MX Capability Acknowledge**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "definitions": {},
     "id": "https://example.com/mams/mx_capability_ack.json",
     "properties": {
        "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
        "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
        "version": {"$ref": "mx_base_def.json#/version_def"},
        "unique_session_id": {
          "$ref": "definitions.json#/unique_session_id"},
        "capability_ack": {
          "$ref": "definitions.json#/capability_acknowledgment"}
     },
     "type": "object"
   }
```

---
#### **C.3.8.  MX Reconfiguration Request**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "definitions": {},
     "id": "https://example.com/mams/mx_reconf_req.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "unique_session_id": {
         "$ref": "definitions.json#/unique_session_id"
       },
       "connection_id": {"$ref": "definitions.json#/connection_id"},
       "ip_address": {"$ref": "definitions.json#/ip_address"},
       "mtu_size": {
         "maximum": 65535,
         "minimum": 1,
         "type": "integer"
       },
       "ssid": {
         "type": "string"
       },
       "reconf_action": {
         "enum": [
           "release",
           "setup",
           "update"
         ],
         "id": "/properties/reconf_action",
         "type": "string"
       },
       "connection_status": {
          "$ref": "definitions.json#/connection_status"},
       "delivery_node_id": {
          "$ref": "definitions.json#/delivery_node_id"}
     },
     "type": "object"
   }
```

---
#### **C.3.9.  MX Reconfiguration Response**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "definitions": {},
     "id": "https://example.com/mams/mx_reconf_rsp.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"}
     },
     "type": "object"
   }
```

---
#### **C.3.10.  MX UP Setup Configuration Request**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "additionalProperties": false,
     "definitions": {
       "convergence_configuration": {
         "mx_configuration_id": {"type": "integer"},
         "convergence_method": {
           "$ref": "definitions.json#/conv_method"},
         "convergence_method_params": {
           "properties": {
             "proxy_ip": {"$ref": "definitions.json#/ip_address"},
             "proxy_port": {"$ref": "definitions.json#/port"},
             "client_key": {"$ref": "definitions.json#/client_key"}
           },
           "type": "object"
         },
         "num_delivery_connections": {
           "type": "integer"
         },
         "delivery_connections": {
           "items": {"$ref": "definitions.json#/delivery_connection"},
           "type": "array"
         }
       }
     },
     "id": "https://example.com/mams/mx_up_setup_conf_req.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "num_anchor_connections": {
         "type": "integer"
       },
       "anchor_connections": {
         "items": {
           "properties": {
             "connection_id": {
               "$ref": "definitions.json#/connection_id"},
             "connection_type": {
               "$ref": "definitions.json#/connection_type"},
             "num_active_mx_conf": {"type": "integer"},
             "convergence_config": {
               "items": {
                 "$ref": "definitions/convergence_configuration"},
               "type": "array"
             }
           },
           "type": "object"
         },
         "type": "array"
       }
     },
     "type": "object"
   }
```

---
#### **C.3.11.  MX UP Setup Confirmation**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "definitions": {},
     "id": "https://example.com/mams/mx_up_setup_cnf.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "unique_session_id": {
         "$ref": "definitions.json#/unique_session_id"},
       "probe_param": {"$ref": "definitions.json#/probe_param"},
       "num_delivery_conn": {
         "type": "integer"
       },
       "client_params": {
         "type": "array",
         "items": [
           {"$ref": "definitions.json#/client_param"}
         ]
       }
     },
     "type": "object"
   }
```

---
#### **C.3.12.  MX Traffic Steering Request**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "definitions": {
       "conn_list": {
         "items": {"$ref": "definitions.json#/connection_id"},
         "type": "array"
       },
       "ul_delivery": {
         "ul_tft": {
           "$ref": "definitions.json#/traffic_flow_template"},
         "connection_list": {"$ref": "#definitions/conn_list"}
       }
     },
     "id": "https://example.com/mams/mx_traffic_steering_req.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "connection_id": {"$ref": "definitions.json#/connection_id"},
       "mx_configuration_id": {"type": "integer"},
       "downlink_delivery": {
         "items": {"$ref": "definitions.json#/connection_id"},
         "type": "array"
       },
       "feature_active": {
         "items": {"$ref": "definitions.json#/feature_status"},
         "type": "array"
       },
       "default_uplink_delivery": {
         "type": "integer"
       },
       "uplink_delivery": {
         "items": {"$ref": "#definitions/ul_delivery"},
         "type": "array"
       }
     },
     "type": "object"
   }
```

---
#### **C.3.13.  MX Traffic Steering Response**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "definitions": {},
     "id": "https://example.com/example.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "unique_session_id": {
         "$ref": "definitions.json#/unique_session_id"},
       "feature_active": {
         "items": {"$ref": "definitions.json#/feature_status"},
         "type": "array"
       }
     },
     "type": "object"
   }
```

---
#### **C.3.14.  MX Application MADP Association Request**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "definitions": {},
     "id": "https://example.com/example.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "unique_session_id": {
         "$ref": "definitions.json#/unique_session_id"},
       "app_madp_assoc_list": {
         "items": {
           "$ref": "definitions.json#/app_madp_assoc"
          },
         "type": "array"
       }
     },
     "type": "object"
   }
```

---
#### **C.3.15.  MX Application MADP Association Response**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "definitions": {},
     "id": "https://example.com/example.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "unique_session_id": {
         "$ref": "definitions.json#/unique_session_id"},
       "is_success": {
         "type": "boolean"
       }
     },
     "type": "object"
   }
```

---
#### **C.3.16.  MX Path Estimation Request**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "definitions": {},
     "id": "https://example.com/mams/mx_path_est_req.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "active_probe_ack_req": {
         "enum": [
           "no",
           "yes"
         ],
         "type": "string"
       },
       "active_probe_freq_ms": {
         "maximum": 10000,
         "minimum": 100,
         "type": "integer"
       },
       "active_probe_size_bytes": {
         "maximum": 1500,
         "minimum": 100,
         "type": "integer"
       },
       "active_probe_duration_sec": {
         "maximum": 100,
         "minimum": 10,
         "type":  "integer"
           },
       "connection_id": {"$ref": "definitions#/connection_id"},
       "init_probe_ack_req": {
         "enum": [
           "no",
           "yes"
         ],
         "type": "string"
       },
       "init_probe_size_bytes": {
         "maximum": 1500,
         "minimum": 100,
         "type": "integer"
       },
       "init_probe_test_duration_ms": {
         "maximum": 10000,
         "minimum": 100,
         "type": "integer"
       },
       "init_probe_test_rate_Mbps": {
         "maximum": 100,
         "minimum": 1,
         "type": "integer"
       }
     },
     "type": "object"
   }
```

---
#### **C.3.17.  MX Path Estimation Results**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "definitions": {},
     "id": "https://example.com/mams/mx_path_est_results.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "unique_session_id": {
                 "$ref": "definitions.json#/unique_session_id"},
       "active_probe_results": {
         "properties": {
           "avg_tput_last_probe_duration_Mbps": {
             "maximum":100,
             "minimum": 1,
             "type": "number"
           }
         },
         "type": "object"
       },
       "connection_id": {"$ref": "definitions.json#/connection_id"},
       "init_probe_results": {
         "properties": {
           "lost_probes_percentage": {
             "maximum": 100,
             "minimum": 1,
             "type": "integer"
           },
          "probe_rate_Mbps": {
             "maximum": 100,
             "minimum": 1,
             "type": "number"
           }
         },
         "type": "object"
       }
     },
     "type": "object"
   }
```

---
#### **C.3.18.  MX SSID Indication**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "definitions": {},
     "id": "https://example.com/mams/mx_ssid_indication.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "ssid_list": {
         "items": {
           "properties": {
             "ssid_type": {
               "$ref": "definitions.json#/ssid_types"},
             "ssid_id": {
               "type": "integer"
               }
             }
         },
         "type": "array"
       }
     },
     "type": "object"
   }
```

---
#### **C.3.19.  MX Measurement Configuration**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "additionalProperties": false,
     "definitions": {
       "meas_conf": {
         "connection_id" : {
           "$ref": "definitions.json#/connection_id"},
         "connection_type": {
           "$ref": "definitions.json#/connection_type"},
         "meas_rep_conf": {
           "items": {
             "$ref": "definitions.json#/meas_report_conf"},
           "type": "array"
         }
       }
     },
     "id": "https://example.com/mams/mx_measurement_conf.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "measurement_configuration": {
         "items": {"$ref": "#definitions/meas_conf"},
         "type": "array"
       }
     },
     "type": "object"
   }
```

---
#### **C.3.20.  MX Measurement Report**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "definitions": {},
     "id": "https://example.com/mams/mx_measurement_report.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "unique_session_id": {
         "$ref": "definitions.json#/unique_session_id"},
       "measurement_reports": {
         "items": {
           "properties": {
             "connection_id": {
               "$ref": "definitions.json#/connection_id"},
             "connection_type": {
               "$ref": "definitions.json#/connection_type"},
             "delivery_node_id": {
               "$ref": "definitions.json#/delivery_node_id"},
             "measurements": {
               "items": {
                 "properties": {
                   "measurement_type": {
                     "$ref": "definitions.json#/meas_report_param"},
                   "measurement_value": {
                     "type": "integer"
                   }
                 },
                 "type": "object"
               },
               "type": "array"
             }
           },
           "type": "object"
         },
         "type": "array"
       }
     },
     "type": "object"
   }
```

---
#### **C.3.21.  MX Keep-Alive Request**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "additionalProperties": false,
     "id": "https://example.com/mams/mx_keep_alive_req.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "keep_alive_reason": {
         "$ref": "definitions.json#/keep_alive_reason"},
       "unique_session_id": {
         "$ref": "definitions.json#/unique_session_id"},
       "connection_id": {
         "$ref": "definitions.json#/connection_id"},
       "delivery_node_id": {
         "$ref": "definitions.json#/connection_id"}
     },
     "type": "object"
   }
```

---
#### **C.3.22.  MX Keep-Alive Response**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "additionalProperties": false,
     "id": "https://example.com/mams/mx_keep_alive_rsp.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "unique_session_id": {
         "$ref": "definitions.json#/unique_session_id"}
     },
     "type": "object"
   }
```

---
#### **C.3.23.  MX Session Termination Request**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "additionalProperties": false,
     "id": "https://example.com/mams/mx_keep_alive_req.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "unique_session_id": {
         "$ref": "definitions.json#/unique_session_id"},
       "reason": {
         "enum": [
           "MX_NORMAL_RELEASE",
           "MX_NO_RESPONSE",
           "INTERNAL_ERROR"
         ],
         "type": "string"
       }
     },
     "type": "object"
   }
```

---
#### **C.3.24.  MX Session Termination Response**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "additionalProperties": false,
     "id": "https://example.com/mams/mx_session_termination_rsp.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "unique_session_id": {
         "$ref": "definitions.json#/unique_session_id"}
     },
     "type": "object"
   }
```

---
#### **C.3.25.  MX Network Analytics Request**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "additionalProperties": false,
     "id": "https://example.com/mams/mx_network_analytics_req.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "unique_session_id": {
         "$ref": "definitions.json#/unique_session_id"},
       "params": {
         "items": {
           "$ref": "definitions.json#/predict_param_name"},
         "type": "array"
       }
     },
     "type": "object"
   }
```

---
#### **C.3.26.  MX Network Analytics Response**

```text
   {
     "$schema": "https://json-schema.org/draft-04/schema#",
     "additionalProperties": false,
     "definitions": {
       "ParamPredictions": {
         "param_name": {
           "$ref": "definitions.json#/predict_param_name"},
         "additional_param": {
           "$ref": "definitions.json#/predict_add_param_name"},
         "prediction": {"type": "integer"},
         "likelihood": {"type": "integer"},
         "validity_time": {"type": "integer"}

       },
       "MXAnalyticsList": {
         "connection_id": {
           "$ref": "definitions.json#/connection_id"},
         "connection_type": {
           "$ref": "definitions.json#/connection_type"},
         "predictions": {
           "items": {
             "$ref": "#definitions/ParamPredictions"},
             "type": "array"
         }
       }
     },
     "id": "https://example.com/mams/mx_network_analytics_rsp.json",
     "properties": {
       "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
       "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
       "version": {"$ref": "mx_base_def.json#/version_def"},
       "param_list": {
         "items": {
           "$ref": "#definitions/MXAnalyticsList"},
           "type": "array"}
     },
     "type": "object"
   }
```

---
### **C.4.  Examples in JSON**
---
#### **C.4.1.  MX Discover**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_discover",
     "sequence_num" : 1
   }
```

---
#### **C.4.2.  MX System Info**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_system_info",
     "sequence_num" : 2,
     "ncm_connections" : [
       {
         "connection_id" : 0,
         "connection_type" : "LTE",
         "ncm_end_point" : {
           "ip_address" : "192.168.1.10",
           "port" : 1234
         }
       },
       {
         "connection_id" : 1,
         "connection_type" : "Wi-Fi",
         "ncm_end_point" : {
           "ip_address" : "192.168.1.10",
           "port" : 1234
         }
       }
     ]
   }
```

---
#### **C.4.3.  MX Capability Request**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_capability_req",
     "sequence_num" : 3,
     "feature_active" : [
       {
         "feature_name" : "lossless_switching",
         "active" : true
       },
       {
         "feature_name" : "fragmentation",
         "active" : false
       }
     ],
     "num_anchor_connections" : 2,
     "anchor_connections" : [
       {
         "connection_id" : 0,
         "connection_type" : "LTE"
       },
       {
         "connection_id" : 1,
         "connection_type" : "Wi-Fi"
       }
     ],
     "num_delivery_connections" : 2,
     "delivery_connections" : [
       {
         "connection_id" : 0,
         "connection_type" : "LTE"
       },
       {
         "connection_id" : 1,
         "connection_type" : "Wi-Fi"
       }
     ],
     "convergence_methods" : [
       {
         "method" : "GMA",
         "supported" : true
       },
       {
         "method" : "MPTCP_Proxy",
         "supported" : false
       }
     ],
     "adaptation_methods" : [
       {
         "method" : "UDP_without_DTLS",
         "supported" : false
       },
       {
         "method" : "UDP_with_DTLS",
         "supported" : false
       },
       {
         "method" : "IPsec",
         "supported" : true
       },
       {
         "method" : "Client_NAT",
         "supported" : false
       }
     ]
   }
```

---
#### **C.4.4.  MX Capability Response**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_capability_rsp",
     "sequence_num" : 3,
     "feature_active" : [
       {
         "feature_name" : "lossless_switching",
         "active" : true
       },
       {
         "feature_name" : "fragmentation",
         "active" : false
       }
     ],
     "num_anchor_connections" : 2,
     "anchor_connections" : [
       {
         "connection_id" : 0,
         "connection_type" : "LTE"
       },
       {
         "connection_id" : 1,
         "connection_type" : "Wi-Fi"
       }
     ],
     "num_delivery_connections" : 2,
     "delivery_connections" : [
       {
         "connection_id" : 0,
         "connection_type" : "LTE"
       },
       {
         "connection_id" : 1,
         "connection_type" : "Wi-Fi"
       }
     ],
     "convergence_methods" : [
       {
         "method" : "GMA",
         "supported" : true
       },
       {
         "method" : "MPTCP_Proxy",
         "supported" : false
       }
     ],
     "adaptation_methods" : [
       {
         "method" : "UDP_without_DTLS",
         "supported" : false
       },
       {
         "method" : "UDP_with_DTLS",
         "supported" : false
       },
       {
         "method" : "IPsec",
         "supported" : true
       },
       {
         "method" : "Client_NAT",
         "supported" : false
       }
     ],
     "unique_session_id" : {
       "ncm_id" : 110,
       "session_id" : 1111
     }
   }
```

---
#### **C.4.5.  MX Capability Acknowledge**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_capability_ack",
     "sequence_num" : 3,
     "unique_session_id" : {
       "ncm_id" : 110,
       "session_id" : 1111
     },
     "capability_ack" : "MX_ACCEPT"
   }
```

---
#### **C.4.6.  MX Reconfiguration Request**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_reconf_req",
     "sequence_num" : 4,
     "unique_session_id" : {
       "ncm_id" : 110,
       "session_id" : 1111
     },
     "reconf_action" : "setup",
     "connection_id" : 0,
     "ip_address" : "192.168.110.1",
     "ssid" : "SSID_1",
     "mtu_size" : 1300,
     "connection_status" : "connected",
     "delivery_node_id" : "2A12C"
   }
```

---
#### **C.4.7.  MX Reconfiguration Response**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_reconf_rsp",
     "sequence_num" : 4
   }
```

---
#### **C.4.8.  MX UP Setup Configuration Request**

```text
   {
     "version": "1.0",
     "message_type": "mx_up_setup_conf_req",
     "sequence_num": 5,
     "num_anchor_connections": 2,
     "anchor_connections": [{
       "connection_id": 1,
       "connection_type": "Wi-Fi",
       "num_active_mx_conf" : 2,
       "convergence_config" : [
       {
         "mx_configuration_id" : 1,
         "convergence_method": "GMA",
         "convergence_method_params": {},
         "num_delivery_connections": 2,
         "delivery_connections": [{
           "connection_id": 0,
           "connection_type": "LTE",
           "adaptation_method": "UDP_without_DTLS",
           "adaptation_method_param": {
             "tunnel_ip_addr": "6.6.6.6",
             "tunnel_end_port": 9999,
             "mx_header_optimization": true
           }
         },
         {
           "connection_id": 1,
           "connection_type": "Wi-Fi"
         }
         ]
       },
       {
         "mx_configuration_id" : 2,
         "convergence_method": "GMA",
         "convergence_method_params": {},
         "num_delivery_connections": 1,
         "delivery_connections": [{
           "connection_id": 0,
           "connection_type": "LTE",
           "adaptation_method": "UDP_without_DTLS",
           "adaptation_method_param": {
             "tunnel_ip_addr": "6.6.6.6",
             "tunnel_end_port": 8877
           }
         }
         ]
       }
       ]
     },
     {
       "connection_id": 0,
       "connection_type": "LTE",
       "udp_port": 8888,
       "num_delivery_connections": 2,
       "delivery_connections": [{
         "connection_id": 0,
         "connection_type": "LTE"
       },
       {
         "connection_id": 1,
         "connection_type": "Wi-Fi",
         "adaptation_method": "UDP_without_DTLS",
         "adaptation_method_param": {
           "tunnel_ip_addr": "192.168.3.3",
           "tunnel_end_port": "6000"
         }
       }
       ]
     }
     ]
   }
```

---
#### **C.4.9.  MX UP Setup Confirmation**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_up_setup_cnf",
     "sequence_num" : 5,
     "unique_session_id" : {
       "ncm_id" : 110,
       "session_id" : 1111
     },
     "probe_param" : {
       "probe_port" : 48700,
       "anchor_conn_id" : 0,
       "mx_configuration_id" : 1
     },
     "num_delivery_conn" : 2,
     "client_params" : [
       {
         "connection_id" : 0,
         "adapt_param" : {
           "udp_adapt_port" : 51000
         }
       },
       {
         "connection_id" : 1,
         "adapt_param" : {
           "udp_adapt_port" : 52000
         }
       }
     ]
   }
```

---
#### **C.4.10.  MX Traffic Steering Request**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_traffic_steering_req",
     "sequence_num" : 6,
     "connection_id" : 0,
     "mx_configuration_id" : 1,
     "downlink_delivery" : [
       {
         "connection_id" : 0
       },
       {
         "connection_id" : 1
       }
     ],
     "default_uplink_delivery" : 0,
     "uplink_delivery" : [
       {
         "ul_tft" : {
            "remote_addr_mask" : "10.10.0.0/24",
            "local_addr_mask" : "192.168.0.0/24",
            "protocol_type" :  6,
            "local_port_range" : {
              "start" : 100,
              "end" : 1000
            },
            "remote_port_range" : {
              "start" : 100,
              "end" : 1000
            },
            "traffic_class" : 20,
            "flow_label" : 100
         },
         "conn_list" : [
            {
              "connection_id" : 1
            }
         ]
       },
       {
         "ul_tft" : {
            "remote_addr_mask" : "10.10.0.0/24",
            "local_addr_mask" : "192.168.0.0/24",
            "protocol_type" :  6,
            "local_port_range" : {
              "start" : 2000,
              "end" : 2000
            },
            "remote_port_range" : {
              "start" : 100,
              "end" : 1000
            },
            "traffic_class" : 20,
            "flow_label" : 50
         },
         "conn_list" : [
            {
             "connection_id" : 1
            }
         ]
       }
     ],
     "feature_active" : [
       {
         "feature_name" : "dl_aggregation",
         "active" : true
       },
       {
         "feature_name" : "ul_aggregation",
         "active" : false
       }
     ]
   }
```

---
#### **C.4.11.  MX Traffic Steering Response**

```text
   {
     "version": "1.0",
     "message_type": "mx_traffic_steering_rsp",
     "sequence_num": 6,
     "unique_session_id": {
       "ncm_id": 110,
       "session_id": 1111
     },
     "feature_active": [{
       "feature_name": "lossless_switching",
       "active": true
     },
     {
       "feature_name": "fragmentation",
       "active": false
     }
     ]
   }
```

---
#### **C.4.12.  MX Application MADP Association Request**

```text
   {
     "version": "1.0",
     "message_type": "mx_app_madp_assoc_req",
     "sequence_num": 6,
     "unique_session_id": {
       "ncm_id": 110,
       "session_id": 1111
     },
     "app_madp_assoc_list": [{
       "connection_id" : 0,
       "mx_configuration_id" : 1,
       "ul_tft_list": [{
         "protocol_type": 17,
         "local_port_range": {
           "start": 8888,
           "end": 8888
         }
         }],
           "dl_tft_list": [{
             "protocol_type": 17,
             "remote_port_range": {
               "start": 8888,
               "end": 8888
             }
           }]
     }
     ]
   }
```

---
#### **C.4.13.  MX Application MADP Association Response**

```text
   {
     "version": "1.0",
     "message_type": "mx_app_madp_assoc_rsp",
     "sequence_num": 6,
     "is_success": true
   }
```

---
#### **C.4.14.  MX Path Estimation Request**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_path_est_req",
     "sequence_num" : 7,
     "connection_id" : 0,
     "init_probe_test_duration_ms" : 100,
     "init_probe_test_rate_Mbps" : 10,
     "init_probe_size_bytes" : 1000,
     "init_probe_ack_req" : "yes",
     "active_probe_freq_ms" : 10000,
     "active_probe_size_bytes" : 1000,
     "active_probe_duration_sec" : 10,
     "active_probe_ack_req" : "no"
   }
```

---
#### **C.4.15.  MX Path Estimation Results**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_path_est_results",
     "sequence_num" : 8,
     "unique_session_id" : {
       "ncm_id" : 110,
       "session_id" : 1111
     },
     "connection_id" : 0,
     "init_probe_results" : {
       "lost_probes_percentage" : 1,
       "probe_rate_Mbps" : 9.9
     },
     "active_probe_results" : {
       "avg_tput_last_probe_duration_Mbps" : 9.8
     }
   }
```

---
#### **C.4.16.  MX SSID Indication**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_ssid_indication",
     "sequence_num" : 9,
     "ssid_list" : [
       {
         "ssid_type" : "ssid",
         "ssid_id" : "SSID_1"
       },
       {
         "ssid_type" : "bssid",
         "ssid_id" : "xxx-yyy"
       }
     ]
   }
```

---
#### **C.4.17.  MX Measurement Configuration**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_measurement_conf",
     "sequence_num" : 10,
     "measurement_configuration" : [
     {
       "connection_id" : 0,
       "connection_type" : "Wi-Fi",
       "meas_rep_conf"  : [
         {
           "meas_rep_param" : "WLAN_RSSI",
           "meas_threshold" : {
             "high" : -10,
             "low" : -15
           },
           "meas_period_ms" : 500
         },
         {
           "meas_rep_param" : "WLAN_LOAD",
           "meas_threshold" : {
             "high" : -10,
             "low" : -15
           },
           "meas_period_ms" : 500
         },
         {
           "meas_rep_param" : "EST_UL_TPUT",
           "meas_threshold" : {
             "high" : 100,
             "low" : 30
           },
           "meas_period_ms" : 500
          }
        ]
     },
     {
       "connection_id" : 1,
       "connection_type" : "LTE",
       "meas_rep_conf"  : [
         {
           "meas_rep_param" : "LTE_RSRP",
           "meas_threshold" : {
             "high" : -10,
             "low" : -15
           },
           "meas_period_ms" : 500
         },
         {
           "meas_rep_param" : "LTE_RSRQ",
           "meas_threshold" : {
             "high" : -10,
             "low" : -15
           },
           "meas_period_ms" : 500
         }
       ]
     }
     ]
   }
```

---
#### **C.4.18.  MX Measurement Report**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_measurement_report",
     "sequence_num" : 11,
     "unique_session_id" : {
       "ncm_id" : 110,
       "session_id" : 1111
     },
     "measurement_reports" : [
       {
         "connection_id" : 0,
         "connection_type" : "Wi-Fi",
         "delivery_node_id" : "2021A",
         "measurements"  : [
           {
             "measurement_type" : "WLAN_RSSI",
             "measurement_value" : -12
           },
           {
             "measurement_type" : "UL_TPUT",
             "measurement_value" : 10
           },
           {
             "measurement_type" : "EST_UL_TPUT",
             "measurement_value" : 20
           }
         ]
       },
       {
         "connection_id" : 1,
         "connection_type" : "LTE",
         "delivery_node_id" : "12323",
         "measurements"  : [
           {
             "measurement_type" : "LTE_RSRP",
             "measurement_value" : -12

            },
            {
              "measurement_type" : "LTE_RSRQ",
              "measurement_value" : -12

            }
         ]
       }
     ]
   }
```

---
#### **C.4.19.  MX Keep-Alive Request**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_keep_alive_req",
     "sequence_num" : 12,
     "keep_alive_reason" : "Handover",
     "unique_session_id" : {
       "ncm_id" : 110,
       "session_id" : 1111
     },
     "connection_id" : 0,
     "delivery_node_id" : "2021A"
   }
```

---
#### **C.4.20.  MX Keep-Alive Response**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_keep_alive_rsp",
     "sequence_num" : 12,
     "unique_session_id" : {
       "ncm_id" : 110,
       "session_id" : 1111
     }
   }
```

---
#### **C.4.21.  MX Session Termination Request**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_session_termination_req",
     "sequence_num" : 13,
     "unique_session_id" : {
       "ncm_id" : 110,
       "session_id" : 1111
     },
     "reason" : "MX_NORMAL_RELEASE"
   }
```

---
#### **C.4.22.  MX Session Termination Response**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_session_termination_rsp",
     "sequence_num" : 13,
     "unique_session_id" : {
       "ncm_id" : 110,
       "session_id" : 1111
     }
   }
```

---
#### **C.4.23.  MX Network Analytics Request**

```text
   {
     "version" : "1.0",
     "message_type" : "mx_network_analytics_req",
     "sequence_num" : 20,
     "unique_session_id" : {
       "ncm_id" : 110,
       "session_id" : 1111
     },
     "params" : [
       "jitter",
       "latency"
     ]
   }
```

---
#### **C.4.24.  MX Network Analytics Response**

```text
   {
     "version": "1.0",
     "message_type": "mx_network_analytics_rsp",
     "sequence_num": 20,
     "param_list": [{
       "connection_id": 1,
       "connection_type": "Wi-Fi",
       "predictions": [{
         "param_name": "jitter",
         "prediction": 100,
         "likelihood": 50,
         "validity_time": 10
       },
       {
         "param_name": "latency",
         "prediction": 19,
         "likelihood": 40,
         "validity_time": 10
       }
       ]
     },
     {
       "connection_id": 2,
       "connection_type": "LTE",
       "predictions": [{
         "param_name": "jitter",
         "prediction": 10,
         "likelihood": 80,
         "validity_time": 10
       },
       {
         "param_name": "latency",
         "prediction": 4,
         "likelihood": 60,
         "validity_time": 10
       }
       ]
     }
     ]
   }
```

부록 D. CCM이 클라이언트의 애플리케이션에 제공하는 API 정의

이 섹션에서는 Swagger 2.0을 사용하여 OpenAPI로 문서화되어 CCM이 클라이언트의 애플리케이션에 노출하는 API 구현의 예를 제공합니다.

```text
   {
     "swagger": "2.0",
     "info": {
       "version": "1.0.0",
       "title": "Client Connection Manager (CCM)",
       "description": "API provided by the CCM towards the application
                       on a MAMS client."
     },
     "host": "MAMS.ietf.org",
     "basePath": "/ccm/v1.0",
     "schemes": [
       "https"
     ],
     "consumes": [
       "application/json"
     ],
     "produces": [
       "application/json"
     ],
     "paths": {
       "/capabilities": {
         "get": {
           "description": "This API can be used by an application to
                           request the capabilities of the CCM.",
           "produces": [
             "application/json",
             "text/html"
           ],
           "responses": {
             "200": {
               "description": "OK",
               "schema": {
                 "$ref": "#/definitions/capability"
               }
             },
             "default": {
               "description": "unexpected error",
               "schema": {
                 "$ref": "#/definitions/errorModel"
               }
             }
           }
         }
       },
       "/app_requirements": {
         "post": {
           "description": "This API is used by the N-MADP to report
                           any types of MAMS user-specific errors to
                           the NCM.",
           "produces": [
             "application/json",
             "text/html"
           ],
           "parameters": [
             {
               "name": "app-requirements",
               "in": "body",
               "required": true,
               "schema": {
                 "$ref": "#/definitions/app-requirements"
               }
             }
           ],
           "responses": {
             "200": {
               "description": "OK"
             },
             "default": {
               "description": "unexpected error",
               "schema": {
                 "$ref": "#/definitions/errorModel"
               }
             }
           }
         }
       },
       "/predictive_link_params": {
         "get": {
           "description": "This API is used by applications to get the
                           information about predicted parameters for
                           each delivery connection.",
           "produces": [
             "application/json",
             "text/html"
           ],
           "responses": {
             "200": {
               "description": "OK",
               "schema": {
                 "$ref": "#/definitions/link-params"
               }
             },
             "default": {
               "description": "unexpected error",
               "schema": {
                 "$ref": "#/definitions/errorModel"
               }
             }
           }
         }
       }
     },
     "definitions": {
       "connection-id": {
         "type": "integer",
         "format": "uint8"
       },
       "connection-type": {
         "enum": [
           "Wi-Fi",
           "5G_NR",
           "MulteFire",
           "LTE"
         ],
         "type": "string"
       },
       "features": {
         "enum": [
           "lossless_switching",
           "fragmentation",
           "concatenation",
           "uplink_aggregation",
           "downlink_aggregation",
           "measurement"
           "probing"
         ],
         "type": "string"
       },
       "adaptation-methods": {
         "enum": [
           "UDP_without_DTLS",
           "UDP_with_DTLS",
           "IPsec",
           "Client_NAT"
         ],
         "type": "string"
       },
       "convergence-methods": {
         "enum": [
           "GMA",
           "MPTCP_Proxy",
           "GRE_Aggregation_Proxy",
           "MPQUIC"
         ],
         "type": "string"
       },
       "connection": {
         "type": "object",
         "properties": {
           "conn-id": {
             "$ref": "#/definitions/connection-id"
           },
           "conn-type": {
             "$ref": "#/definitions/connection-type"
           }
         }
       },
       "convergence-parameters": {
         "type": "object",
         "properties": {
           "conv-param-name": {
             "type": "string"
           },
           "conv-param-value": {
             "type": "string"
           }
         }
       },
       "convergence-details": {
         "type": "object",
         "properties": {
           "conv-method": {
             "$ref": "#/definitions/convergence-methods"
           },
           "conv-params": {
             "type": "array",
             "items": {
               "$ref": "#/definitions/convergence-parameters"
             }
           }
         }
       },
       "capability": {
         "type": "object",
         "properties": {
           "connections": {
             "type": "array",
             "items": {
               "$ref": "#/definitions/connection"
             }
           },
           "features": {
             "type": "array",
             "items": {
               "$ref": "#/definitions/features"
             }
           },
           "adapt-methods": {
             "type": "array",
             "items": {
               "$ref": "#/definitions/adaptation-methods"
             }
           },
           "conv-methods": {
             "type": "array",
             "items": {
               "$ref": "#/definitions/convergence-details"
             }
           }
         }
       },
       "qos-param-name": {
         "enum": [
           "jitter",
           "latency",
           "bandwidth"
         ],
         "type": "string"
       },
       "qos-param": {
         "type": "object",
         "properties": {
           "qos-param-name": {
             "$ref": "#/definitions/qos-param-name"
           },
           "qos-param-value": {
             "type": "integer"
           }
         }
       },
       "port-range": {
         "type": "object",
         "properties": {
           "start": {
             "type": "integer"
           },
           "end": {
             "type": "integer"
           }
         }
       },
       "protocol-type": {
         "type": "integer"
       },
       "stream-features": {
         "type": "object",
         "properties": {
           "proto": {
             "$ref": "#/definitions/protocol-type"
           },
           "port-range": {
             "$ref": "#/definitions/port-range"
           },
           "traffic-qos": {
             "$ref": "#/definitions/qos-param"
           }
         }
       },
       "app-requirements": {
         "type": "object",
         "properties": {
           "num-streams": {
             "type": "integer"
           },
           "stream-feature": {
             "type": "array",
             "items": {
               "$ref": "#/definitions/stream-features"
             }
           }
         }
       },
       "param-name": {
         "enum": [
           "bandwidth",
           "jitter",
           "latency",
           "signal_quality"
         ],
         "type": "string"
       },
       "additional-param-name": {
         "enum": [
           "lte-rsrp",
           "lte-rsrq",
           "nr-rsrp",
           "nr-rsrq",
           "wifi-rssi"
         ],
         "type": "string"
       },
       "link-parameter": {
         "type": "object",
         "properties": {
           "connection": {
             "$ref": "#/definitions/connection"
           },
           "param": {
             "$ref": "#/definitions/param-name"
           },
           "additional-param": {
             "$ref": "#/definitions/additional-param-name"
           },
           "prediction": {
             "type": "integer"
           },
           "likelihood": {
             "type": "integer"
           },
           "validity_time": {
             "type": "integer"
           }
         }
       },
       "link-params": {
         "type": "array",
         "items": {
           "$ref": "#/definitions/link-parameter"
         }
       },
       "errorModel": {
         "type": "object",
         "description": "Error indication containing the error code and
                         message.",
         "required": [
           "code",
           "message"
         ],
         "properties": {
           "code": {
             "type": "integer",
             "format": "int32"
           },
           "message": {
             "type": "string"
           }
         }
       }
     }
   }
```

부록 E. MAMS 클라이언트 및 서버에 Python을 사용한 구현 예

---
### **E.1.  Client-Side Implementation**

Python을 사용한 간단한 클라이언트측 구현은 다음과 같습니다.

```text
   #!/usr/bin/env python
   import asyncio
   import websockets
   import json
   import ssl
   import time
   import sys

   context = ssl.SSLContext(ssl.PROTOCOL_TLS)
   context.verify_mode = ssl.CERT_REQUIRED
   context.set_ciphers("RSA")
   context.check_hostname = False
   context.load_verify_locations("/home/mecadmin/certs/rootca.pem")

   discoverMsg = {'version':'1.0',
   'message_type':'mx_discover'}

   MXCapabilityRes = {'version':'1.0',
   'message_type':'mx_capability_res',
   'FeatureActive':[{'feature_name':'fragmentation', 'active':'yes'},
       {'feature_name':'lossless_switching', 'active':'yes'}],
   'num_anchor_connections':1,
   'anchor_connections':[{'connection_id':0, 'connection_type':'LTE'}],
   'num_delivery_connections':1,
   'delivery_connections':[{'connection_id':1,
       'connection_type':"Wi-Fi"}],
   'convergence_methods':[{'method':'GMA', 'supported':'true'}],
   'adaptation_methods':[{'method':'client_nat', 'supported':'false'}]
   }

   async def hello():
       async with websockets.connect('wss://localhost:8765',
          ssl=context) as websocket:
        try:
         loopFlag=False
         while True:
             await websocket.send(json.dumps(discoverMsg))
             json_message = await websocket.recv()
             message = json.loads(json_message)
             if "message_type" in message.keys():
               print("Received message:{}".format(
                  message["message_type"]),
                  "version:{}".format(message["version"]))
               if message["message_type"] == "mx_capability_req" :
                   await websocket.send(json.dumps(MXCapabilityRes))
                   loopFlag=True
                   while(loopFlag==True):
                         pass
        except:
             print("Client stopped")

   asyncio.get_event_loop().run_until_complete(hello())
```

---
### **E.2.  Server-Side Implementation**

Python을 사용한 서버측 구현은 다음과 같습니다.

```text
   #!/usr/bin/env python
   import asyncio
   import websockets
   import json
   import ssl

   ctx = ssl.SSLContext(ssl.PROTOCOL_TLS)
   #ctx.set_ciphers("RSA-AES256-SHA")
   ctx.load_verify_locations("/home/mecadmin/certs/rootca.pem")
   certfile = "/home/mecadmin/certs/server.pem"
   keyfile = "/home/mecadmin/certs/serverkey.pem"
   ctx.load_cert_chain(certfile, keyfile, password=None)

   MXCapabilityReq = {'version':'1.0',
   'message_type':'mx_capability_req',
   'FeatureActive':[{'feature_name':'fragmentation', 'active':'yes'},
       {'feature_name':'lossless_switching', 'active':'yes'}],
   'num_anchor_connections':1,
   'anchor_connections':[{'connection_id':0, 'connection_type':'LTE'}],
   'num_delivery_connections':1,
   'delivery_connections':[{'connection_id':1,
       'connection_type':"Wi-Fi"}],
   'convergence_methods':[{'method':'GMA', 'supported':'true'}],
   'adaptation_methods':[{'method':'client_nat', 'supported':'false'}]
   }

   async def hello(websocket, path):
    try:
      while True:
        name = await websocket.recv()
        msg = json.loads(name)
        if "message_type" in msg.keys():
           print("Received message:{}".format(msg["message_type"]),
              "version:{}".format(msg["version"]))
           if msg['message_type'] == 'mx_discover':
              await websocket.send(json.dumps(MXCapabilityReq))

    except:
         print("Client disconnected")

   try:
    start_server = websockets.serve(hello, 'localhost', 8765,ssl=ctx)

    asyncio.get_event_loop().run_until_complete(start_server)
    asyncio.get_event_loop().run_forever()
   except:
    print("Server stopped")
```

---
# **Acknowledgments**

이 프로토콜은 이 문서의 작성자뿐만 아니라 많은 엔지니어의 작업 결과입니다. 이 프로젝트에 기여한 사람들은 Barbara Orlandi, 김봉호, David Lopez-Perez, Doru Calin, Jonathan Ling, Lohith Nayak, Michael Scharf입니다.

---
# **Contributors**

저자들은 이름의 알파벳순으로 다음의 추가 기여자들에게 감사의 마음을 전합니다: A Krishna Pramod/ Nokia Bell Labs, Hannu Flinck/Nokia Bell Labs, Hema Pentakota/Nokia, Julius Mueller/AT&T, Nurit Sprecher/Nokia, Salil Agarwal/Nokia , Shuping Peng/Huawei 및 Subramanian Vasudevan/Nokia Bell Labs. Subramanian Vasudevan은 MAMS 프레임워크의 솔루션 원리를 개념화하고 개발하는 데 중요한 역할을 했습니다. Shuping Peng은 프레임워크와 제어 평면 프로토콜 측면을 개선하는 데 핵심적인 기여를 했습니다.

---
# **Authors' Addresses**

```text
   Satish Kanugovi
   Nokia Bell Labs

   Email: satish.k@nokia-bell-labs.com

   Florin Baboescu
   Broadcom

   Email: florin.baboescu@broadcom.com

   Jing Zhu
   Intel

   Email: jing.z.zhu@intel.com

   SungHoon Seo
   Korea Telecom

   Email: sh.seo@kt.com
```
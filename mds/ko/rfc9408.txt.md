

```text
﻿

Internet Engineering Task Force (IETF)                 M. Boucadair, Ed.
Request for Comments: 9408                                        Orange
Category: Standards Track                            O. Gonzalez de Dios
ISSN: 2070-1721                                               Telefonica
                                                              S. Barguil
                                                                   Nokia
                                                                   Q. Wu
                                                                  Huawei
                                                                V. Lopez
                                                                   Nokia
                                                               June 2023

     A YANG Network Data Model for Service Attachment Points (SAPs)
```

---
# **Abstract**

이 문서는 서비스가 연결될 수 있는 지점\(예: 기본 연결, VPN, 네트워크 슬라이스\)을 포함하는 공급자 네트워크 토폴로지의 추상 보기를 나타내는 YANG 데이터 모델을 정의합니다. 또한 이 모델은 서비스가 실제로 고객에게 전달되는 지점\(피어 네트워크 포함\)을 검색하는 데 사용할 수 있습니다.

이 문서는 SAP\(Service Attachment Points\) 개념을 추가하여 RFC 8345에 정의된 'ietf-network' 데이터 모델을 확장합니다. SAP는 L3VPN\(계층 3 가상 사설망\) 또는 L2VPN\(계층 2 가상 사설망\)과 같은 네트워크 서비스를 연결할 수 있는 네트워크 참조 지점입니다. 하나 이상의 서비스를 동일한 SAP에 바인딩할 수 있습니다. 사용자-네트워크 인터페이스\(UNI\) 및 네트워크-네트워크 인터페이스\(NNI\) 모두 SAP 데이터 모델에서 지원됩니다.

---
# **Status of This Memo**

이것은 인터넷 표준 추적 문서입니다.

이 문서는 IETF\(Internet Engineering Task Force\)의 제품입니다. 이는 IETF 커뮤니티의 합의를 나타냅니다. 공개 검토를 받았으며 IESG\(Internet Engineering Steering Group\)의 출판 승인을 받았습니다. 인터넷 표준에 대한 자세한 내용은 RFC 7841의 섹션 2에서 확인할 수 있습니다.

이 문서의 현재 상태, 오류 및 이에 대한 피드백 제공 방법에 대한 정보는 https://www.rfc-editor.org/info/rfc9408에서 얻을 수 있습니다.

---
# **Copyright Notice**

Copyright \(c\) 2023 IETF Trust 및 문서 작성자로 확인된 사람. 판권 소유.

이 문서는 이 문서의 발행일에 유효한 BCP 78 및 IETF 문서에 관한 IETF 트러스트의 법적 조항\(https://trustee.ietf.org/license-info\)의 적용을 받습니다. 이 문서와 관련된 귀하의 권리 및 제한 사항을 설명하므로 이 문서를 주의 깊게 검토하십시오. 이 문서에서 추출한 코드 구성요소는 Trust Legal Provisions의 섹션 4.e에 설명된 대로 개정된 BSD 라이센스 텍스트를 포함해야 하며 개정된 BSD 라이센스에 설명된 대로 보증 없이 제공됩니다.

---
# **Table of Contents**

```text
   1.  Introduction
   2.  Terminology
   3.  Sample SAP Network Model Usage
   4.  Relationship to Other YANG Data Models
   5.  SAP Module Tree Structure
   6.  SAP YANG Module
   7.  IANA Considerations
   8.  Security Considerations
   9.  References
     9.1.  Normative References
     9.2.  Informative References
   Appendix A.  A Simplified SAP Network Example
   Appendix B.  A Simple Example of the SAP Network Model: Node Filter
   Appendix C.  An Example of an NNI SAP: Inter-AS VPN Option A
   Appendix D.  Examples of Using the SAP Network Model in Service
           Creation
   Acknowledgements
   Authors' Addresses
```

---
## **1.  Introduction**

서비스 공급자는 고객에게 다양한 네트워크 서비스를 제공합니다. 이러한 서비스에는 가상 사설망\(VPN\), 소프트웨어 정의 광역 네트워크\(SD-WAN\) 오버레이 네트워크\[BGP-SDWAN-USAGE\] 및 네트워크 슬라이스\[IETF-NETWORK-SLICES\]가 포함되지만 이에 국한되지 않습니다. 전반적인 서비스 운영을 합리화하고 보다 자동화된 서비스 프로비저닝 절차를 허용하기 위해 서비스 공급자는 고객에게 서비스를 제공할 수 있는 위치에 대한 관점을 유지해야 합니다. 예를 들어, 이러한 보기는 서비스 주문 처리, 서비스 타당성 검사, 서비스별 적용 범위 추적 등을 담당하는 인텔리전스 개체에 정보를 제공하는 데 사용할 수 있습니다\(예: \[RFC8969\]의 섹션 3.2\). 이를 위해 이 문서에서는 서비스 연결 지점\(SAP\)의 개념을 소개합니다.

SAP는 네트워크 서비스를 고객에게 제공할 수 있는 네트워크 기준점을 나타냅니다. 예를 들어, 이 개념은 Layer 3 VPN 서비스 모델\(L3SM\) \[RFC8299\] 및 Layer 2 VPN 서비스 모델\(L2SM\) \[RFC8466\]에서 서비스를 연결하고 전달하는 위치를 결정하는 데 사용됩니다. 또한 레이어 3 VPN 네트워크 모델\(L3NM\) \[RFC9182\] 및 레이어 2 VPN 네트워크 모델\(L2NM\) \[RFC9291\]에 설명된 네트워크 구성을 통해 이러한 서비스가 고객에게 전달되는 위치를 검색하는 데 사용할 수도 있습니다.

이 문서는 SAP를 표현, 관리 및 제어하기 위한 YANG 네트워크 모델\(섹션 6\)을 정의합니다. 데이터 모델은 SAP 개념을 추가하여 'ietf-network' 모듈\[RFC8345\]을 보강합니다. 섹션 3은 모델의 샘플 사용법을 제공합니다. 이 문서는 SAP 네트워크 모델의 범위와 목적 및 다른 모델과의 관계를 설명합니다\(섹션 4\).

네트워크는 잠재적으로 다른 유형의 여러 서비스를 지원할 수 있습니다. SAP 토폴로지가 특정 서비스 유형의 서비스 전용인지 또는 개별 서비스인지 또는 다양한 유형의 여러 서비스 간에 공유되는지 여부는 배포에 따라 다릅니다. 이 문서는 이러한 모든 배포 체계를 지원합니다.

이 문서는 네트워크가 사용자에게 제공하는 서비스에 대해 어떠한 가정도 하지 않습니다. VPN 서비스\(예: 계층 3 가상 사설망\(L3VPN\) 또는 계층 2 가상 사설망\(L2VPN\)\)\[RFC4026\]은 예시 목적으로 사용됩니다\(부록 A 및 B\).

UNI\(User-to-Network Interface\) 및 NNI\(Network-to-Network Interface\)는 사업자가 서비스를 제공할 때 분계점을 나타내기 위해 널리 사용하는 기준점이므로 이 문서에서는 UNI 및 NNI SAP를 모두 지원합니다. 독자는 \[MEF6\], \[MEF17\], \[RFC6004\] 또는 \[RFC6215\]에서 UNI 및 NNI 참조 포인트 사용에 관한 논의의 예를 참조할 수 있습니다. VPN 컨텍스트에서 NNI 사용의 예는 부록 C에 나와 있습니다.

섹션 6의 YANG 데이터 모델은 NMDA\(Network Management Datastore Architecture\) \[RFC8342\]를 준수합니다.

---
## **2.  Terminology**

키워드 "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY" 및 "OPTIONAL" "는 BCP 14 \[RFC2119\] \[RFC8174\]에 설명된 대로 여기에 표시된 것처럼 모두 대문자로 표시되는 경우에만 해석됩니다.\(MUST NOT\)

이 문서는 독자가 \[RFC6241\], \[RFC7950\], \[RFC8345\] 및 \[RFC8309\]의 내용에 익숙하다고 가정합니다. 이러한 RFC의 용어를 사용하기 때문입니다.

트리 다이어그램에서 기호의 의미는 \[RFC8340\]에 정의되어 있습니다.

이 문서에서는 \[RFC8969\]의 섹션 2.1에 정의된 "네트워크 모델"이라는 용어를 사용합니다.

이 문서에서는 다음 용어를 사용합니다.

서비스 공급자: 고객에게 서비스\(예: VPN\)를 제공하는 네트워크 운영을 담당하는 조직입니다.

AC\(Attachment Circuit\): CE\(Customer Edge\)를 PE\(Provider Edge\)에 연결하는 채널입니다.

CE\(Customer Edge\): 특정 고객 전용 장비로 AC를 통해 하나 이상의 PE에 직접 연결됩니다. CE는 일반적으로 고객 구내에 있습니다. CE는 단일 서비스\(예: L3VPN\) 전용일 수 있지만 각각 별도의 AC가 있는 경우 여러 VPN을 지원할 수 있습니다. CE는 라우터, 브리지, 스위치 등이 될 수 있습니다.

PE\(공급자 에지\): 다양한 고객을 위해 여러 서비스\(예: VPN\)를 지원할 수 있는 서비스 공급자가 소유하고 관리하는 장비입니다. PE는 AC를 통해 하나 이상의 CE에 직접 연결됩니다.

Service Attachment Points \(SAPs\): 네트워크 서비스가 전달될 수 있고/또는 전달될 수 있는 네트워크 참조 지점의 추상화\(예: AC의 PE 측 또는 공급자 관리 CE의 경우 AC의 CE 측\) 고객. SAP는 하나 이상의 AC에 바인딩될 수 있습니다.

---
## **3.  Sample SAP Network Model Usage**

서비스 공급자 네트워크의 관리 작업은 YANG 모듈 \[RFC8969\] \[RFC6241\] \[RFC8040\]에 기반한 인터페이스와 같은 다양한 수단을 사용하여 자동화할 수 있습니다. 이러한 관점에서 그리고 그림 1에 묘사된 아키텍처를 고려할 때 이 문서의 목표는 YANG 기반 인터페이스를 통해 네트워크 컨트롤러에서 서비스 오케스트레이션 계층으로의 추상화된 네트워크 보기를 보여주는 메커니즘을 제공하는 것입니다. 고객에게 서비스를 제공할 수 있는 곳. 이 모델은 서비스가 고객에게 제공되는 네트워크 참조 지점을 검색하는 데에도 사용됩니다. 피어 네트워크의 리소스가 필요한 서비스의 경우 모델을 사용하여 NNI를 노출할 수도 있습니다.

```text
                               +-----------------+
                               |     Customer    |
                               +--------+--------+
               Customer Service Models  |
                  (e.g., L3SM, L2SM)    |
                               +--------+--------+
                               |    Service      |
                               |  Orchestration  |
                               +------+---+------+
                   Network Models     |   | SAP Network Model
                 (e.g., L3NM, L2NM)   |   |
                               +------+---+------+
                               |     Network     |
                               |   Controller    |
                               +--------+--------+
                                        |
                  +---------------------+---------------------+
                  |                  Network                  |
                  +-------------------------------------------+

                     Figure 1: SAP Network Model Usage
```

독자는 서비스 공급자 네트워크를 특성화할 때 일반적으로 호출되는 빌딩 블록의 개요에 대해 \[RFC4026\]의 섹션 5를 참조할 수 있습니다.

서비스 오케스트레이션 계층은 기본 네트워크\(예: P 노드\(\[RFC4026\]의 섹션 5.3.1\)\)의 모든 내부에 대해 알 필요가 없습니다. 그림 2는 서비스 오케스트레이터가 보는 추상 네트워크 보기를 보여줍니다. 그러나 이 보기는 네트워크에서 서비스를 생성하기 위한 정보를 서비스 오케스트레이션 계층에 제공하기에는 충분하지 않습니다. 서비스 토폴로지는 네트워크 서비스를 접목\(제공\)할 수 있는 노드와 연결된 연결 지점 및 노드 집합을 노출할 수 있어야 합니다.

```text
                     .---------.          .---------.
                     |   PE1   |          |   PE2   |
                     '---------'          '---------'
                                \        /
                                 \------/
                                 (      )
                                (        )
                                 (      )
                                 /------\
                               /         \
                     .---------.          .---------.
                     |   PE3   |          |   PE4   |
                     '---------'          '---------'

                    Figure 2: Abstract Network Topology
```

일반적으로 UNI에 초점을 맞추면 서비스 오케스트레이션 계층은 PE 세트와 CE가 연결될 수 있는\(또는 실제로 연결되는\) 클라이언트 대면 인터페이스 세트\(물리적 또는 논리적\)를 볼 수 있습니다. 이러한 인터페이스는 UNI-N\(User-to-Network Interface, Network side\)\[RFC6215\]이라고도 합니다. 서비스 오케스트레이션 계층은 이러한 인터페이스를 사용하여 요청된 서비스를 설정하거나 서비스 제공을 커밋할 수 있습니다. 그림 3은 네트워크 컨트롤러에 의해 유지되고 서비스 오케스트레이션에 노출되는 샘플 SAP 네트워크 토폴로지를 보여줍니다.

```text
                 .-+-. .-+-. .-+-.              .-+-.       .-+-.
               .-|sap|-|sap|-|sap|-.          .-|sap|-------|sap|-.
               | '---' '---' '---' |          | '---'       '---' |
             .---.                 |          |                   |
             |sap|      PE1        |          |         PE2       |
             '---'                 |          |                   |
               |                   |          |                   |
               '-------------------'          '-------------------'

               .-------------------.          .-------------------.
               |                   |          |                   |
               |                   |          |                 .---.
               |         PE3       |          |        PE4      |sap|
               |                   |          |                 '---'
               | .---. .---. .---. |          | .---. .---. .---. |
               '-|sap|-|sap|-|sap|-'          '-|sap|-|sap|-|sap|-'
                 '-+-' '-+-' '-+-'              '-+-' '-+-' '-+-'

                      Figure 3: A SAP Network Topology
```

단일 SAP 네트워크 토폴로지는 하나 또는 여러 서비스 유형\(예: L3VPN, 이더넷 VPN\(EVPN\)\)에 사용할 수 있습니다. 그런 다음 네트워크 컨트롤러는 SAP를 통해 서비스 유형 및 관련 인터페이스를 노출할 수 있습니다.

그림 4에서 볼 수 있듯이 서비스 오케스트레이션 계층은 고객 대면 인터페이스의 고객 서비스 모델 세트\(예: L3SM 또는 L2SM\) 및 네트워크 모델 세트\(예: L3NM 및 네트워크 토폴로지\)에 대한 액세스 권한도 갖습니다. 데이터 모델\) 리소스 대면 인터페이스에서. 이 사용 사례에서는 네트워크 컨트롤러가 PE를 넘어 CE로 어떤 일이 발생하는지 알지 못한다고 가정합니다. SAP와 PE 간 네트워크의 관리 및 제어만 담당합니다. 서비스 요청에 표현된 배송 지점과 SAP 사이의 상관관계를 지정하기 위해 SAP 모델에는 동료 고객 지점 식별자가 포함될 수 있습니다. 해당 식별자는 CE 식별자, 사이트 식별자 등일 수 있습니다.

```text
                                                        .---.
                                                        |CE2|
                                                        '-+-'
                                                          |
              .-+-. .-+-. .-+-.             .-+-.       .-+-.
            .-|sap|-|sap|-|sap|-.         .-|sap|-------|sap|-.
            | '---' '---' '---' |         | '---'       '---' |
   .---.  .---.                 |         |                   |
   |CE1+--+sap|      PE1        |         |         PE2       |
   '---'  '---'                 |         |                   |
            |                   |         |                   |
            '-------------------'         '-------------------'

            .-------------------.         .-------------------.
            |                   |         |                   |
            |                   |         |                 .---.  .---.
            |         PE3       |         |        PE4      |sap+--+CE5|
            |                   |         |                 '---'  '---'
            | .---. .---. .---. |         | .---. .---. .---. |
            '-|sap|-|sap|-|sap|-'         '-|sap|-|sap|-|sap|-'
              '-+-' '-+-' '-+-'             '-+-' '-+-' '-+-'
                            |                 |     |
                          .-+-.               |   .-+-.
                          |CE3+---------------'   |CE4|
                          '---'                   '---'

                Figure 4: Network Topology with CEs and ACs
```

그림 4에 묘사된 토폴로지를 반복하는 예는 부록 A를 참조하십시오.

---
## **4.  Relationship to Other YANG Data Models**

SAP 네트워크 모델은 SAP와 관련된 인벤토리 데이터로 볼 수 있습니다. 이 모델은 \[RFC8345\]에 의존하는 네트워크에 포함된 고객 대면 노드의 인벤토리를 유지합니다.

그림 5는 SAP 네트워크 모델과 다른 모델의 관계를 보여줍니다. SAP 네트워크 모델은 \[RFC8345\]에 정의된 네트워크 모델을 보강하고 \[RFC8345\]에 정의된 네트워크 토폴로지 모델을 가져오며, 다른 기술별 토폴로지 모델\(예: 트래픽 엔지니어링\(TE\) 토폴로지\[RFC8795\] 또는 모델 계층 3 토폴로지용 \[RFC8346\]\) \[RFC8345\]에 정의된 네트워크 토폴로지 모델을 보강합니다.

```text
                              +-------------------------+
                              |                         |
                              |  Abstract Network Model |
                              |                         |
                              +------------+------------+
                                           |
                                 +---------+---------+
                                 |                   |
                          +------V------+     +------V------+
                          |  Abstract   |     |  Inventory  |
                          |  Network    |     |    Models   |
                          |  Topology   |     |  (e.g., SAP |
                          |   Model     |     |   Network   |
                          |             |     |    Model)   |
                          +-----+-------+     +-------------+
                                |
                    +-----------+-----------+
                    |           |           |
               +----V----+ +----V----+ +----V----+
               |TE Topo  | |L3 Topo  | |L2 Topo  |
               |  Model  | |  Model  | |  Model  | ...
               +---------+ +---------+ +---------+

        Figure 5: Relationship of SAP Network Model to Other Models
```

SAP는 특정 서비스 조항이 있는 고객 대면 종료 지점\(TP\)으로 볼 수 있습니다. 그러나 SAP와 TP의 한 가지 차이점은 링크가 단일 TP\(\[RFC8345\]의 섹션 4.4.6\)에 의해 종료되는 반면 AC는 여러 SAP에 의해 종료될 수 있다는 것입니다. 또한 SAP는 TTP\(터널 종료 지점\)\(\[RFC8795\]의 섹션 3.6\)도 링크도 아닙니다.

SDN\(소프트웨어 정의 네트워킹\) \[RFC7149\] \[RFC7426\]의 맥락에서 SAP YANG 데이터 모델은 \[RFC9182\] 및 \[RFC9182\] 및 \[RFC9291\]. 이 데이터 모델을 통해 서비스 오케스트레이션 계층은 기본 네트워크의 상호 연결 리소스의 사용 가능한 엔드포인트\(즉, SAP\)를 학습할 수 있습니다. 서비스 오케스트레이션 계층은 L2VPN 또는 L3VPN 서비스에 추가할 상호 연결 끝점을 결정할 수 있습니다. 다른 데이터 모델\(예: L3SM\[RFC8299\] 또는 L2SM\[RFC8466\]\)의 도움으로 계층적 제어 요소는 종단 간 IP 연결 또는 L2VPN 연결의 가능성을 평가할 수 있으므로 도메인 시퀀스를 도출할 수 있습니다. 그리고 사용할 상호 연결 지점.

고급 인터페이스별 데이터 노드는 SAP 모델에 포함되지 않습니다. SAP 모델에 나열된 인터페이스 식별자는 장치 모델을 사용하여 이러한 데이터를 설정하거나 가져오는 필터로 사용할 수 있습니다\(예: \[RFC7224\]\).

---
## **5.  SAP Module Tree Structure**

SAP 네트워크 모델 'ietf-sap-ntw'는 SAP로 노드를 보강하여 'ietf-network' 모듈\[RFC8345\]을 기반으로 합니다.

'ietf-sap-ntw' 모듈의 구조는 그림 6에 나와 있습니다.

```text
   module: ietf-sap-ntw
     augment /nw:networks/nw:network/nw:network-types:
       +--rw sap-network!
          +--rw service-type*   identityref
     augment /nw:networks/nw:network/nw:node:
       +--rw service* [service-type]
          +--rw service-type                   identityref
          +--rw sap* [sap-id]
             +--rw sap-id                      string
             +--rw description?                string
             +--rw parent-termination-point?   nt:tp-id
             +--rw attachment-interface?       string
             +--rw interface-type?             identityref
             +--rw encapsulation-type?         identityref
             +--rw role?                       identityref
             +--rw allows-child-saps?          boolean
             +--rw peer-sap-id*                string
             +--ro sap-status
             |  +--ro status?        identityref
             |  +--ro last-change?   yang:date-and-time
             +--rw service-status
                +--rw admin-status
                |  +--rw status?        identityref
                |  +--rw last-change?   yang:date-and-time
                +--ro oper-status
                   +--ro status?        identityref
                   +--ro last-change?   yang:date-and-time

                  Figure 6: SAP YANG Module Tree Structure
```

SAP 네트워크 토폴로지는 하나 또는 여러 서비스 유형\('service-type'\)에 사용할 수 있습니다. 지원되는 서비스 유형의 예는 다음과 같습니다.

```text
   *  L3VPN [RFC4364]

   *  Virtual Private LAN Service (VPLS) [RFC4761] [RFC4762]

   *  Virtual Private Wire Service (VPWS) [RFC8214]

   *  BGP MPLS-based Ethernet VPN [RFC7432]
```

\* 이더넷 VPN의 VPWS \[RFC8214\]

\* 이더넷 VPN\(PBB-EVPN\)과 결합된 공급자 백본 브리징 \[RFC7623\]

```text
   *  VXLAN-based EVPN [RFC8365] ("VXLAN" stands for "Virtual eXtensible
      Local Area Network")

   *  Virtual Network [RFC8453]

   *  Enhanced VPN (VPN+) [ENHANCED-VPN]

   *  Network slice service [IETF-NETWORK-SLICES]

   *  SD-WAN [BGP-SDWAN-USAGE]

   *  Basic IP connectivity
```

이러한 서비스 유형은 \[RFC9181\]에 이미 정의된 유형과 이 문서에 정의된 추가 유형을 기반으로 합니다. 필요한 경우 향후 YANG 모듈\(이 문서에 정의된 YANG 모듈의 향후 개정 포함\)에서 다른 서비스 유형을 정의할 수 있습니다.

- | \[RFC9181\]에 정의된 서비스 유형을 활용하는 것은 | SAP 토폴로지와 | 제공하는 데 사용되는 해당 네트워크 모델 | 제공자의 네트워크를 통한 특정 서비스.

서비스 유형을 기반으로 하는 필터를 사용하여 서비스별 SAP 토폴로지에 액세스할 수 있습니다. 부록 B의 그림 10에 예가 나와 있습니다.

토폴로지의 노드는 'sap-network' 컨테이너 아래에 나열된 서비스 유형 중 하나 또는 여러 서비스 유형\('service-type'\)을 지원할 수 있습니다. 그러면 SAP 목록이 지정된 노드에서 지원하는 각 서비스 유형에 바인딩됩니다. 각 SAP의 특징은 다음과 같습니다.

'sap-id': 노드 내에서 SAP를 고유하게 식별하는 식별자를 포함합니다.

- 동일한 SAP가 서로 다른 서비스 유형에 나타날 수 있습니다. 이러한 경우 각 서비스 유형에 대해 공유 SAP에 대해 동일한 식별자가 사용됩니다.

- 서비스를 직접 호스팅하는 인터페이스, 서비스별 하위 인터페이스를 호스팅할 준비가 된 인터페이스\(아직 활성화되지 않음\) 또는 하위 인터페이스에서 이미 인스턴스화된 서비스와 연결된 SAP는 SAP로 나열됩니다. 설명을 위해 부록 B의 그림 9에는 서비스별 하위 인터페이스를 호스팅할 수 있는 인터페이스를 표시하는 방법이 나와 있습니다.

- 예를 들어, 'sap-id'는 \[RFC9182\]의 섹션 7.6에 정의된 VPN 네트워크 액세스 식별자일 수 있습니다. 서비스 생성 중 이 속성의 사용을 설명하는 예는 부록 D에 제공됩니다.

'description': SAP에 대한 텍스트 설명을 포함합니다.

'parent-termination-point': SAP가 바인드되는 상위 종료 지점에 대한 참조를 포함합니다. \[RFC8345\]의 섹션 4.2에 따라 종료 지점은 노드의 링크를 종료합니다. 종료 지점은 물리적 포트, 인터페이스 등이 될 수 있습니다.

- 참조된 상위 종단 지점은 코어 쪽 종단 지점이 아니라 고객 쪽 종단 지점이어야 합니다.

- 예를 들어, 이 속성은 모든 인터페이스가 노드의 SAP 아래에 나열될 수 있으므로 인터페이스를 해당 하위 인터페이스와 연결하는 데 사용됩니다. 또한 SAP를 물리적 토폴로지와 연결하는 데 사용됩니다.

- 예를 들어, 이 데이터 노드는 IETF 네트워크 슬라이스 끝점\[IETF-NETWORK-SLICES\]을 언더레이 네트워크의 서비스/터널/경로 끝점에 매핑하는 데 사용할 수 있습니다.

'attachment-interface': SAP가 바인딩된 인터페이스에 대한 참조를 나타냅니다. 동일한 인터페이스가 여러 서비스를 호스팅할 수 있습니다.

- 첨부 파일 식별자가 첨부 파일 인터페이스의 내용을 반영하는지 여부는 배포에 따라 다릅니다.

- 예를 들어, 이 참조는 섹션 7.6.1에 정의된 식별자\('l2-termination-point', 'local-bridge-reference', 'bearer-reference' 또는 'lag-interface-id'\) 중 하나일 수 있습니다. \[RFC9182\] 또는 \[RFC9182\]의 섹션 7.6.2에 정의된 '13-termination-point'. 컨트롤러는 SAP 및 기본 장치 모델 또는 기타 장치 인벤토리 메커니즘에서 일관된 참조가 사용되도록 할 책임이 있습니다.

'interface-type': SAP가 물리적 포트, 루프백 인터페이스, LAG\(Link Aggregation Group\) 인터페이스\[IEEE802.1AX\], IRB\(Integrated Routing and Bridging\) 인터페이스\(예: \[RFC9135\]\)에 바인딩되어 있는지 여부를 나타냅니다. \), 로컬 브리지 참조 등

- \[RFC7224\]에 따른 세부 인터페이스 유형에 대한 매핑은 컨트롤러에 의해 유지됩니다. 예를 들어 이 매핑은 컨트롤러가 이 SAP 네트워크 모델을 장치 모델로 변환할 때 사용됩니다\(\[RFC8969\]의 섹션 4.4\).

'encapsulation-type': 'attachment-interface' 속성에 표시된 인터페이스에 대한 캡슐화 유형을 나타냅니다. 유형은 \[RFC9181\]에서 가져옵니다.

- 이 데이터 노드는 예를 들어 기존 SAP를 서비스 호스팅에 \(재\)사용할 수 있는지 또는 새 하위 인터페이스를 인스턴스화해야 하는지 여부를 결정하는 데 사용할 수 있습니다.

'역할': SAP의 역할을 지정합니다\(예: UNI 또는 NNI\).

SAP는 상위 인터페이스의 역할을 상속합니다\('상위-

- 종료 지점'\).

'allows-child-sap': 'true'로 설정하면

- 이 SAP에 대한 연결 인터페이스는 서비스별 하위 인터페이스를 호스팅할 수 있습니다.

- 하위 SAP 외에 상위 SAP에 서비스를 직접 연결할 수 있는지 여부는 서비스에 따라 다릅니다.

'peer-sap-id': AC의 원격 엔드포인트에 대한 참조를 포함합니다. 이 식별자는 피어의 구성에 사용된 SAP 식별자와 동일하거나 동일하지 않을 수 있습니다. 동일한 식별자를 사용하면 피어의 서비스 요청과 로컬 SAP 간의 상관 관계가 쉬워집니다.

- 이러한 참조의 예로는 사이트 식별자\(\[RFC8299\]의 섹션 6.3\), SDP\(Service Demarcation Point\) 식별자\(\[IETF-NETWORK-SLICES\]의 섹션 3.2\("핵심 용어"\)\) 및 IP 주소가 있습니다. 피어 ASBR\(Autonomous System Border Router\)의

'sap-status': SAP의 작동 상태를 나타냅니다. 값은 \[RFC9181\]에 정의된 값에서 가져옵니다.

- 하위 인터페이스와 상위 인터페이스가 모두 존재하지만 상위 인터페이스가 비활성화된 경우 상위 인터페이스의 상태가 하위 인터페이스에 대해 표시된 상태보다 우선합니다.

```text
   'service-status':  Indicates the administrative and operational
      status of the service for a given SAP.  This information is
      particularly useful when many services are provisioned for the
      same SAP but only a subset of these services is activated.  As
      such, the administrative 'service-status' MUST NOT be influenced
      by the value of the operational 'sap-status'.
```

- 서비스 'oper-status'는 여러 SAP를 연결하는 서비스의 전반적인 네트워크 수준의 상태가 아니라 특정 SAP에서만 관찰되는 서비스의 운영 상태를 반영합니다. 네트워크 수준 서비스 상태는 특정 네트워크 모델\(예: \[RFC9182\]의 섹션 7.3 또는 \[RFC9291\]의 섹션 7.3에 나열된 모델\)을 사용하여 검색할 수 있습니다.

- 주어진 SAP에 대한 서비스 제공 상태를 평가하기 위해서는 'sap-status' 외에 관리 및 운영 서비스 상태\('service-status'\)를 모두 확인하는 것이 좋습니다. 그렇게 함으로써 네트워크 컨트롤러\(또는 운영자\)는 이상을 감지할 수 있습니다. 예를 들어 서비스가 SAP에 대해 관리적으로 활성화되고 해당 SAP의 'sap-status'가 중단된 것으로 보고된 경우 서비스 'oper-status'도 중단된 것으로 예상됩니다. 이러한 조건에서 고유한 서비스 운영 상태를 검색하면 이상을 감지하는 트리거로 사용할 수 있습니다. 마찬가지로 관리 상태와 운영 상태를 비교하여 서비스별 SAP 활성화 이상 징후를 감지할 수 있습니다. 예를 들어 관리상 SAP에 대해 비활성으로 선언되었지만 해당 SAP에 대해 운영상 활성으로 보고된 서비스는 관찰된 서비스 상태를 예상 서비스 상태에 맞추기 위해 일부 서비스 제공 작업이 필요함을 나타냅니다.

---
## **6.  SAP YANG Module**

이 모듈은 \[RFC6991\], \[RFC8345\] 및 \[RFC9181\]에서 유형을 가져옵니다.

'sap-entry' 및 'sap-list'는 서비스별 YANG 모듈에서 이러한 노드를 재사용하기 위한 그룹화로 정의됩니다.

```text
   <CODE BEGINS> file "ietf-sap-ntw@2023-06-20.yang"
   module ietf-sap-ntw {
     yang-version 1.1;
     namespace "urn:ietf:params:xml:ns:yang:ietf-sap-ntw";
     prefix sap;

     import ietf-network-topology {
       prefix nt;
       reference
         "RFC 8345: A YANG Data Model for Network
                    Topologies, Section 6.2";
     }
     import ietf-network {
       prefix nw;
       reference
         "RFC 8345: A YANG Data Model for Network
                    Topologies, Section 6.1";
     }
     import ietf-vpn-common {
       prefix vpn-common;
       reference
         "RFC 9181: A Common YANG Data Model for Layer 2 and Layer 3
                    VPNs";
     }
     import ietf-yang-types {
       prefix yang;
       reference
         "RFC 6991: Common YANG Data Types, Section 3";
     }

     organization
       "IETF OPSA (Operations and Management Area) Working Group";
     contact
       "WG Web:   <https://datatracker.ietf.org/wg/opsawg/>
        WG List:  <mailto:opsawg@ietf.org>

        Editor:   Mohamed Boucadair
                  <mailto:mohamed.boucadair@orange.com>

        Author:   Oscar Gonzalez de Dios
                  <mailto:oscar.gonzalezdedios@telefonica.com>

        Author:   Samier Barguil
                  <mailto:samier.barguil_giraldo@nokia.com>

        Author:   Qin Wu
                  <mailto:bill.wu@huawei.com>
```

저자: 빅터 로페즈

- <mailto:victor.lopez@nokia.com\>"; 설명 "이 YANG 모듈은 네트워크 토폴로지에서 서비스 연결 지점\(SAP\)을 표현, 관리 및 제어하기 위한 모델을 정의합니다.

- Copyright \(c\) 2023 IETF Trust 및 코드 작성자로 확인된 사람. 판권 소유.

- 소스 및 바이너리 형식의 재배포 및 사용은 수정 여부에 관계없이 IETF 문서에 관한 IETF 트러스트의 법적 조항 섹션 4.c에 명시된 개정된 BSD 라이선스에 포함된 라이선스 조건에 따라 허용됩니다. \(https://trustee.ietf.org/license-info\).

```text
        This version of this YANG module is part of RFC 9408; see the
        RFC itself for full legal notices.";

     revision 2023-06-20 {
       description
         "Initial version.";
       reference
         "RFC 9408: A YANG Network Data Model for Service Attachment
                    Points (SAPs)";
     }

     identity virtual-network {
       base vpn-common:service-type;
       description
         "Virtual network.  Refers to a logical network instance
          that is built over a physical network.";
       reference
         "RFC 8453: Framework for Abstraction and Control of TE
                    Networks (ACTN)";
     }

     identity enhanced-vpn {
       base vpn-common:service-type;
       description
         "Enhanced VPN (VPN+).  VPN+ is an approach that is
          based on existing VPN and Traffic Engineering (TE)
          technologies but adds characteristics that specific
          services require over and above conventional VPNs.";
       reference
         "draft-ietf-teas-enhanced-vpn:
            A Framework for Enhanced Virtual Private Network
            (VPN+)";
     }

     identity network-slice {
       base vpn-common:service-type;
       description
         "IETF Network Slice.  An IETF Network Slice
          is a logical network topology connecting a number of
          endpoints using a set of shared or dedicated network
          resources that are used to satisfy specific service
          objectives.";
       reference
         "draft-ietf-teas-ietf-network-slices:
            A Framework for IETF Network Slices";
     }

     identity sdwan {
       base vpn-common:service-type;
       description
         "PE-based Software-Defined Wide-Area Network (SD-WAN).";
       reference
         "draft-ietf-bess-bgp-sdwan-usage:
            BGP Usage for SD-WAN Overlay Networks";
     }

     identity basic-connectivity {
       base vpn-common:service-type;
       description
         "Basic IP connectivity.  This is, for example, a plain
          form of connectivity offered to enterprises over a
          dedicated or shared MPLS infrastructure.";
     }

     identity interface-role {
       description
         "Base identity for the network role of an interface.";
     }

     identity uni {
       base interface-role;
       description
         "User-to-Network Interface (UNI).";
     }

     identity nni {
       base interface-role;
       description
         "Network-to-Network Interface (NNI).";
     }

     identity interface-type {
       description
         "Base identity for the interface type.";
     }

     identity phy {
       base interface-type;
       description
         "Physical port.";
     }

     identity loopback {
       base interface-type;
       description
         "Loopback interface.";
     }

     identity lag {
       base interface-type;
       description
         "Link Aggregation Group (LAG) interface.";
     }

     identity irb {
       base interface-type;
       description
         "Integrated Routing and Bridging (IRB) interface.  An IRB
          interface typically connects an IP Virtual Routing and
          Forwarding (IP-VRF) entity to a bridge domain.";
     }

     identity local-bridge {
       base interface-type;
       description
         "A local bridge reference to accommodate (for example)
          implementations that require internal bridging.
          When such a type is used, a reference to a local
          bridge domain is used to identify the interface.";
     }

     identity logical {
       base interface-type;
       description
         "Refers to a logical sub-interface that is typically
          used to bind a service.  This type is used only
          if none of the other more specific types (i.e.,
          'loopback', 'lag', 'irb', or 'local-bridge') can be used.";
     }

     grouping sap-entry {
       description
         "Service Attachment Point (SAP) entry information.";
       leaf sap-id {
         type string;
         description
           "Indicates an identifier that uniquely identifies
            a SAP.";
       }
       leaf description {
         type string;
         description
           "A textual description of the SAP.";
       }
       leaf parent-termination-point {
         type nt:tp-id;
         description
           "Indicates the parent termination point to
            which the SAP is attached.  A termination
            point can be a physical port, an interface, etc.";
       }
       leaf attachment-interface {
         type string;
         description
           "Indicates the interface to which the SAP is bound.";
       }
       leaf interface-type {
         type identityref {
           base interface-type;
         }
         description
           "The type of the interface to which the SAP is bound.";
       }
       leaf encapsulation-type {
         type identityref {
           base vpn-common:encapsulation-type;
         }
         description
           "Encapsulation type of the interface to which the
            SAP is bound.";
       }
       leaf role {
         type identityref {
           base interface-role;
         }
         description
           "Indicates the role of a SAP.";
       }
       leaf allows-child-saps {
         type boolean;
         description
           "Indicates whether the attachment interface of this
            SAP is capable of hosting per-service sub-interfaces.";
       }
       leaf-list peer-sap-id {
         type string;
         description
           "Indicates an identifier of the peer's termination
            identifier (e.g., a Customer Edge (CE)).  This
            information can be used for correlation purposes,
            such as identifying the SAP that is attached to
            an endpoint that is provided in a service request.";
       }
     }

     grouping sap-list {
       description
         "SAP information.";
       list sap {
         key "sap-id";
         description
           "The SAPs are an abstraction of the points to which
            network services such as L3VPNs, L2VPNs, or network
            slices can be attached.";
         uses sap-entry;
         container sap-status {
           config false;
           description
             "Indicates the operational status of the SAP,
              independent of any service provisioned over it.";

           uses vpn-common:oper-status-timestamp;
         }
         container service-status {
           description
             "Indicates the service status.";
           container admin-status {
             description
               "Administrative service status.";
             leaf status {
               type identityref {
                 base vpn-common:administrative-status;
               }
               description
                 "Administrative status of the service provisioned
                  at the SAP.";
             }
             leaf last-change {
               type yang:date-and-time;
               description
                 "Indicates the actual date and time of the service
                  status change.";
             }
           }
           container oper-status {
             config false;
             description
               "Operational status of the service provisioned
                at the SAP.";
             uses vpn-common:oper-status-timestamp;
           }
         }
       }
     }

     augment "/nw:networks/nw:network/nw:network-types" {
       description
         "Introduces a new network type for a SAP network.";
       container sap-network {
         presence "Indicates the SAP network type.";
         description
           "The presence of the container node indicates the
            SAP network type.";
         leaf-list service-type {
           type identityref {
             base vpn-common:service-type;
           }
           description
             "Indicates the set of supported service types.";
         }
       }
     }

     augment "/nw:networks/nw:network/nw:node" {
       when '../nw:network-types/sap:sap-network' {
         description
           "Augmentation parameters apply only for SAP
            networks.";
       }
       description
         "SAP parameters for the node level.";
       list service {
         key "service-type";
         description
           "A list of supported service types for the node.";
         leaf service-type {
           type identityref {
             base vpn-common:service-type;
           }
           description
             "Indicates a service type.";
         }
         uses sap-list;
       }
     }
   }
   <CODE ENDS>
```

---
## **7.  IANA Considerations**

이 문서는 "IETF XML 레지스트리"\[RFC3688\] 내의 "ns" 하위 레지스트리에 다음 네임스페이스 URI를 등록합니다.

URI: urn:ietf:params:xml:ns:yang:ietf-sap-ntw 등록자 연락처: The IESG. XML: 해당 없음; 요청된 URI는 XML 네임스페이스입니다.

이 문서는 "YANG 매개 변수" 레지스트리 내의 "YANG 모듈 이름" 하위 레지스트리 \[RFC6020\]에 다음 YANG 모듈을 등록합니다.

이름: ietf-sap-ntw 네임스페이스: urn:ietf:params:xml:ns:yang:ietf-sap-ntw IANA에서 관리합니까? N 접두사: sap 참조: RFC 9408

---
## **8.  Security Considerations**

이 문서에 지정된 YANG 모듈은 NETCONF\[RFC6241\] 또는 RESTCONF\[RFC8040\]와 같은 네트워크 관리 프로토콜을 통해 액세스하도록 설계된 데이터의 스키마를 정의합니다. 가장 낮은 NETCONF 계층은 보안 전송 계층이며 보안 전송을 구현해야 하는 필수 항목은 SSH\(Secure Shell\)\[RFC6242\]입니다. 가장 낮은 RESTCONF 계층은 HTTPS이고 필수 구현 보안 전송은 TLS\[RFC8446\]입니다.

NACM\(네트워크 구성 액세스 제어 모델\) \[RFC8341\]은 특정 NETCONF 또는 RESTCONF 사용자의 액세스를 사용 가능한 모든 NETCONF 또는 RESTCONF 프로토콜 작업 및 콘텐츠의 미리 구성된 하위 집합으로 제한하는 수단을 제공합니다.

이 YANG 모듈에는 쓰기/생성/삭제 가능한 여러 데이터 노드가 정의되어 있습니다\(예: 기본값인 config true\). 이러한 데이터 노드는 일부 네트워크 환경에서 민감하거나 취약한 것으로 간주될 수 있습니다. 적절한 보호 없이 이러한 데이터 노드에 대한 쓰기 작업\(예: edit-config\)은 네트워크 작업에 부정적인 영향을 미칠 수 있습니다. 다음은 하위 트리 및 데이터 노드와 해당 민감도/취약성입니다.

/nw:네트워크/nw:네트워크/nw:노드/sap:서비스/sap:sap

- 이 하위 트리는 SAP 네트워크 모델의 노드 구성을 지정합니다. 이 하위 트리에 대한 예기치 않은 변경\(예: SAP를 다른 상위 종료 지점과 연결\)으로 인해 서비스 중단 및/또는 네트워크 오작동이 발생할 수 있습니다. 이러한 네트워크 오작동은 주로 운영자가 정의한 의도된 동작과 일치하지 않는 네트워크 구성에서 발생합니다\(예: \[RFC8969\]의 섹션 4.2.1\).

이 YANG 모듈의 일부 읽기 가능한 데이터 노드는 일부 네트워크 환경에서 민감하거나 취약한 것으로 간주될 수 있습니다. 따라서 이러한 데이터 노드에 대한 읽기 액세스\(예: get, get-config 또는 알림을 통해\)를 제어하는 ​​것이 중요합니다. 다음은 하위 트리 및 데이터 노드와 해당 민감도/취약성입니다.

/nw:네트워크/nw:네트워크/nw:노드/sap:서비스/sap:sap

- 이 하위 트리에 대한 무단 액세스는 SAP 네트워크 모델에서 노드의 작동 상태 정보를 공개할 수 있습니다\(예: 고객 'peer-sap-id'의 신원을 공개할 수 있음\).

---
## **9.  References**
---
### **9.1.  Normative References**

```text
   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC3688]  Mealling, M., "The IETF XML Registry", BCP 81, RFC 3688,
              DOI 10.17487/RFC3688, January 2004,
              <https://www.rfc-editor.org/info/rfc3688>.

   [RFC6020]  Bjorklund, M., Ed., "YANG - A Data Modeling Language for
              the Network Configuration Protocol (NETCONF)", RFC 6020,
              DOI 10.17487/RFC6020, October 2010,
              <https://www.rfc-editor.org/info/rfc6020>.

   [RFC6241]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", RFC 6241, DOI 10.17487/RFC6241, June 2011,
              <https://www.rfc-editor.org/info/rfc6241>.

   [RFC6242]  Wasserman, M., "Using the NETCONF Protocol over Secure
              Shell (SSH)", RFC 6242, DOI 10.17487/RFC6242, June 2011,
              <https://www.rfc-editor.org/info/rfc6242>.

   [RFC6991]  Schoenwaelder, J., Ed., "Common YANG Data Types",
              RFC 6991, DOI 10.17487/RFC6991, July 2013,
              <https://www.rfc-editor.org/info/rfc6991>.

   [RFC7950]  Bjorklund, M., Ed., "The YANG 1.1 Data Modeling Language",
              RFC 7950, DOI 10.17487/RFC7950, August 2016,
              <https://www.rfc-editor.org/info/rfc7950>.

   [RFC8040]  Bierman, A., Bjorklund, M., and K. Watsen, "RESTCONF
              Protocol", RFC 8040, DOI 10.17487/RFC8040, January 2017,
              <https://www.rfc-editor.org/info/rfc8040>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC8341]  Bierman, A. and M. Bjorklund, "Network Configuration
              Access Control Model", STD 91, RFC 8341,
              DOI 10.17487/RFC8341, March 2018,
              <https://www.rfc-editor.org/info/rfc8341>.

   [RFC8345]  Clemm, A., Medved, J., Varga, R., Bahadur, N.,
              Ananthakrishnan, H., and X. Liu, "A YANG Data Model for
              Network Topologies", RFC 8345, DOI 10.17487/RFC8345, March
              2018, <https://www.rfc-editor.org/info/rfc8345>.

   [RFC8346]  Clemm, A., Medved, J., Varga, R., Liu, X.,
              Ananthakrishnan, H., and N. Bahadur, "A YANG Data Model
              for Layer 3 Topologies", RFC 8346, DOI 10.17487/RFC8346,
              March 2018, <https://www.rfc-editor.org/info/rfc8346>.

   [RFC8446]  Rescorla, E., "The Transport Layer Security (TLS) Protocol
              Version 1.3", RFC 8446, DOI 10.17487/RFC8446, August 2018,
              <https://www.rfc-editor.org/info/rfc8446>.

   [RFC8795]  Liu, X., Bryskin, I., Beeram, V., Saad, T., Shah, H., and
              O. Gonzalez de Dios, "YANG Data Model for Traffic
              Engineering (TE) Topologies", RFC 8795,
              DOI 10.17487/RFC8795, August 2020,
              <https://www.rfc-editor.org/info/rfc8795>.

   [RFC9181]  Barguil, S., Gonzalez de Dios, O., Ed., Boucadair, M.,
              Ed., and Q. Wu, "A Common YANG Data Model for Layer 2 and
              Layer 3 VPNs", RFC 9181, DOI 10.17487/RFC9181, February
              2022, <https://www.rfc-editor.org/info/rfc9181>.
```

---
### **9.2.  Informative References**

```text
   [BGP-SDWAN-USAGE]
              Dunbar, L., Guichard, J., Sajassi, A., Drake, J., Najem,
              B., Banerjee, A., and D. Carrel, "BGP Usage for SD-WAN
              Overlay Networks", Work in Progress, Internet-Draft,
              draft-ietf-bess-bgp-sdwan-usage-09, 7 April 2023,
              <https://datatracker.ietf.org/doc/html/draft-ietf-bess-
              bgp-sdwan-usage-09>.

   [ENHANCED-VPN]
              Dong, J., Bryant, S., Li, Z., Miyasaka, T., and Y. Lee, "A
              Framework for Enhanced Virtual Private Network (VPN+)",
              Work in Progress, Internet-Draft, draft-ietf-teas-
              enhanced-vpn-12, 23 January 2023,
              <https://datatracker.ietf.org/doc/html/draft-ietf-teas-
              enhanced-vpn-12>.

   [IEEE802.1AX]
              IEEE, "IEEE Standard for Local and Metropolitan Area
              Networks--Link Aggregation", IEEE Std 802.1AX-2020,
              DOI 10.1109/IEEESTD.2020.9105034, 2020,
              <https://doi.org/10.1109/IEEESTD.2020.9105034>.

   [IETF-NETWORK-SLICES]
              Farrel, A., Ed., Drake, J., Ed., Rokui, R., Homma, S.,
              Makhijani, K., Contreras, L.M., and J. Tantsura, "A
              Framework for IETF Network Slices", Work in Progress,
              Internet-Draft, draft-ietf-teas-ietf-network-slices-19, 21
              January 2023, <https://datatracker.ietf.org/doc/html/
              draft-ietf-teas-ietf-network-slices-19>.

   [MEF17]    The Metro Ethernet Forum, "Technical Specification MEF 17,
              Service OAM Requirements & Framework - Phase 1", April
              2007, <https://www.mef.net/wp-content/uploads/2015/04/MEF-
              17.pdf>.

   [MEF6]     The Metro Ethernet Forum, "Technical Specification MEF 6,
              Ethernet Services Definitions - Phase I", June 2004,
              <https://www.mef.net/Assets/Technical_Specifications/PDF/
              MEF_6.pdf>.

   [RFC4026]  Andersson, L. and T. Madsen, "Provider Provisioned Virtual
              Private Network (VPN) Terminology", RFC 4026,
              DOI 10.17487/RFC4026, March 2005,
              <https://www.rfc-editor.org/info/rfc4026>.

   [RFC4364]  Rosen, E. and Y. Rekhter, "BGP/MPLS IP Virtual Private
              Networks (VPNs)", RFC 4364, DOI 10.17487/RFC4364, February
              2006, <https://www.rfc-editor.org/info/rfc4364>.

   [RFC4761]  Kompella, K., Ed. and Y. Rekhter, Ed., "Virtual Private
              LAN Service (VPLS) Using BGP for Auto-Discovery and
              Signaling", RFC 4761, DOI 10.17487/RFC4761, January 2007,
              <https://www.rfc-editor.org/info/rfc4761>.

   [RFC4762]  Lasserre, M., Ed. and V. Kompella, Ed., "Virtual Private
              LAN Service (VPLS) Using Label Distribution Protocol (LDP)
              Signaling", RFC 4762, DOI 10.17487/RFC4762, January 2007,
              <https://www.rfc-editor.org/info/rfc4762>.

   [RFC6004]  Berger, L. and D. Fedyk, "Generalized MPLS (GMPLS) Support
              for Metro Ethernet Forum and G.8011 Ethernet Service
              Switching", RFC 6004, DOI 10.17487/RFC6004, October 2010,
              <https://www.rfc-editor.org/info/rfc6004>.

   [RFC6215]  Bocci, M., Levrau, L., and D. Frost, "MPLS Transport
              Profile User-to-Network and Network-to-Network
              Interfaces", RFC 6215, DOI 10.17487/RFC6215, April 2011,
              <https://www.rfc-editor.org/info/rfc6215>.

   [RFC7149]  Boucadair, M. and C. Jacquenet, "Software-Defined
              Networking: A Perspective from within a Service Provider
              Environment", RFC 7149, DOI 10.17487/RFC7149, March 2014,
              <https://www.rfc-editor.org/info/rfc7149>.

   [RFC7224]  Bjorklund, M., "IANA Interface Type YANG Module",
              RFC 7224, DOI 10.17487/RFC7224, May 2014,
              <https://www.rfc-editor.org/info/rfc7224>.

   [RFC7426]  Haleplidis, E., Ed., Pentikousis, K., Ed., Denazis, S.,
              Hadi Salim, J., Meyer, D., and O. Koufopavlou, "Software-
              Defined Networking (SDN): Layers and Architecture
              Terminology", RFC 7426, DOI 10.17487/RFC7426, January
              2015, <https://www.rfc-editor.org/info/rfc7426>.

   [RFC7432]  Sajassi, A., Ed., Aggarwal, R., Bitar, N., Isaac, A.,
              Uttaro, J., Drake, J., and W. Henderickx, "BGP MPLS-Based
              Ethernet VPN", RFC 7432, DOI 10.17487/RFC7432, February
              2015, <https://www.rfc-editor.org/info/rfc7432>.

   [RFC7623]  Sajassi, A., Ed., Salam, S., Bitar, N., Isaac, A., and W.
              Henderickx, "Provider Backbone Bridging Combined with
              Ethernet VPN (PBB-EVPN)", RFC 7623, DOI 10.17487/RFC7623,
              September 2015, <https://www.rfc-editor.org/info/rfc7623>.

   [RFC7951]  Lhotka, L., "JSON Encoding of Data Modeled with YANG",
              RFC 7951, DOI 10.17487/RFC7951, August 2016,
              <https://www.rfc-editor.org/info/rfc7951>.

   [RFC8214]  Boutros, S., Sajassi, A., Salam, S., Drake, J., and J.
              Rabadan, "Virtual Private Wire Service Support in Ethernet
              VPN", RFC 8214, DOI 10.17487/RFC8214, August 2017,
              <https://www.rfc-editor.org/info/rfc8214>.

   [RFC8299]  Wu, Q., Ed., Litkowski, S., Tomotaki, L., and K. Ogaki,
              "YANG Data Model for L3VPN Service Delivery", RFC 8299,
              DOI 10.17487/RFC8299, January 2018,
              <https://www.rfc-editor.org/info/rfc8299>.

   [RFC8309]  Wu, Q., Liu, W., and A. Farrel, "Service Models
              Explained", RFC 8309, DOI 10.17487/RFC8309, January 2018,
              <https://www.rfc-editor.org/info/rfc8309>.

   [RFC8340]  Bjorklund, M. and L. Berger, Ed., "YANG Tree Diagrams",
              BCP 215, RFC 8340, DOI 10.17487/RFC8340, March 2018,
              <https://www.rfc-editor.org/info/rfc8340>.

   [RFC8342]  Bjorklund, M., Schoenwaelder, J., Shafer, P., Watsen, K.,
              and R. Wilton, "Network Management Datastore Architecture
              (NMDA)", RFC 8342, DOI 10.17487/RFC8342, March 2018,
              <https://www.rfc-editor.org/info/rfc8342>.

   [RFC8365]  Sajassi, A., Ed., Drake, J., Ed., Bitar, N., Shekhar, R.,
              Uttaro, J., and W. Henderickx, "A Network Virtualization
              Overlay Solution Using Ethernet VPN (EVPN)", RFC 8365,
              DOI 10.17487/RFC8365, March 2018,
              <https://www.rfc-editor.org/info/rfc8365>.

   [RFC8453]  Ceccarelli, D., Ed. and Y. Lee, Ed., "Framework for
              Abstraction and Control of TE Networks (ACTN)", RFC 8453,
              DOI 10.17487/RFC8453, August 2018,
              <https://www.rfc-editor.org/info/rfc8453>.

   [RFC8466]  Wen, B., Fioccola, G., Ed., Xie, C., and L. Jalil, "A YANG
              Data Model for Layer 2 Virtual Private Network (L2VPN)
              Service Delivery", RFC 8466, DOI 10.17487/RFC8466, October
              2018, <https://www.rfc-editor.org/info/rfc8466>.

   [RFC8969]  Wu, Q., Ed., Boucadair, M., Ed., Lopez, D., Xie, C., and
              L. Geng, "A Framework for Automating Service and Network
              Management with YANG", RFC 8969, DOI 10.17487/RFC8969,
              January 2021, <https://www.rfc-editor.org/info/rfc8969>.

   [RFC9135]  Sajassi, A., Salam, S., Thoria, S., Drake, J., and J.
              Rabadan, "Integrated Routing and Bridging in Ethernet VPN
              (EVPN)", RFC 9135, DOI 10.17487/RFC9135, October 2021,
              <https://www.rfc-editor.org/info/rfc9135>.

   [RFC9182]  Barguil, S., Gonzalez de Dios, O., Ed., Boucadair, M.,
              Ed., Munoz, L., and A. Aguado, "A YANG Network Data Model
              for Layer 3 VPNs", RFC 9182, DOI 10.17487/RFC9182,
              February 2022, <https://www.rfc-editor.org/info/rfc9182>.

   [RFC9291]  Boucadair, M., Ed., Gonzalez de Dios, O., Ed., Barguil,
              S., and L. Munoz, "A YANG Network Data Model for Layer 2
              VPNs", RFC 9291, DOI 10.17487/RFC9291, September 2022,
              <https://www.rfc-editor.org/info/rfc9291>.
```

---
# **Appendix A.  A Simplified SAP Network Example**

네트워크 컨트롤러에 의해 보고되는 SAP 토폴로지의 예는 그림 7에 설명되어 있습니다. 이 예는 그림 4에 표시된 토폴로지를 반영합니다. 각 SAP에 대해 최소 정보 세트만 제공됩니다. 특히, 'parent-termination-point', 'attachment-interface', 'interface-type', 'encapsulation-type', 'role'은 예시에서 보이지 않는다. 서비스를 호스팅할 수 있지만 아직 활성화되지 않은 SAP는 'ietf-vpn-common:op-down'으로 설정된 'sap-status/status' 및 다음으로 설정된 'service-status/admin-status/status'로 식별됩니다. 'ietf-vpn-common:admin-down'. 서비스를 제공하도록 활성화된 SAP는 'ietf-vpn-common:admin-up'으로 설정된 'service-status/admin-status/status' 및 '로 설정된 'service-status/oper-status/status'로 식별됩니다. ietf-vpn-common:op-up'. 섹션 5에서 논의된 이상은 이러한 SAP에 대해 감지되지 않습니다. 아래 그림에 표시된 메시지 본문은 \[RFC7951\]에 따라 YANG 모델 데이터의 JSON 인코딩에 따라 인코딩됩니다.

```text
   {
     "ietf-network:networks": {
       "network": [
         {
           "network-types": {
             "ietf-sap-ntw:sap-network": {
               "service-type": [
                 "ietf-vpn-common:l3vpn",
                 "ietf-vpn-common:vpls"
               ]
             }
           },
           "network-id": "example:an-id",
           "node": [
             {
               "node-id": "example:pe1",
               "ietf-sap-ntw:service": [
                 {
                   "service-type": "ietf-vpn-common:l3vpn",
                   "sap": [
                     {
                       "sap-id": "sap#11",
                       "peer-sap-id": ["ce-1"],
                       "sap-status": {
                         "status": "ietf-vpn-common:op-up"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-up"
                         },
                         "oper-status": {
                           "status": "ietf-vpn-common:op-up"
                         }
                       }
                     },
                     {
                       "sap-id": "sap#12",
                       "sap-status": {
                         "status": "ietf-vpn-common:op-down"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-down"
                         }
                       }
                     },
                     {
                       "sap-id": "sap#13",
                       "sap-status": {
                         "status": "ietf-vpn-common:op-down"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-down"
                         }
                       }
                     },
                     {
                       "sap-id": "sap#14",
                       "sap-status": {
                         "status": "ietf-vpn-common:op-down"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-down"
                         }
                       }
                     }
                   ]
                 }
               ]
             },
             {
               "node-id": "example:pe2",
               "ietf-sap-ntw:service": [
                 {
                   "service-type": "ietf-vpn-common:l3vpn",
                   "sap": [
                     {
                       "sap-id": "sap#21",
                       "sap-status": {
                         "status": "ietf-vpn-common:op-down"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-down"
                         }
                       }
                     },
                     {
                       "sap-id": "sap#22",
                       "peer-sap-id": ["ce-2"],
                       "sap-status": {
                         "status": "ietf-vpn-common:op-up"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-up"
                         },
                         "oper-status": {
                           "status": "ietf-vpn-common:op-up"
                         }
                       }
                     }
                   ]
                 }
               ]
             },
             {
               "node-id": "example:pe3",
               "ietf-sap-ntw:service": [
                 {
                   "service-type": "ietf-vpn-common:l3vpn",
                   "sap": [
                     {
                       "sap-id": "sap#31",
                       "sap-status": {
                         "status": "ietf-vpn-common:op-down"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-down"
                         }
                       }
                     },
                     {
                       "sap-id": "sap#32",
                       "sap-status": {
                         "status": "ietf-vpn-common:op-down"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-down"
                         }
                       }
                     },
                     {
                       "sap-id": "sap#33",
                       "peer-sap-id": ["ce-3"],
                       "sap-status": {
                         "status": "ietf-vpn-common:op-up"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-up"
                         },
                         "oper-status": {
                           "status": "ietf-vpn-common:op-up"
                         }
                       }
                     }
                   ]
                 }
               ]
             },
             {
               "node-id": "example:pe4",
               "ietf-sap-ntw:service": [
                 {
                   "service-type": "ietf-vpn-common:l3vpn",
                   "sap": [
                     {
                       "sap-id": "sap#41",
                       "peer-sap-id": ["ce-3"],
                       "sap-status": {
                         "status": "ietf-vpn-common:op-up"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-up"
                         },
                         "oper-status": {
                           "status": "ietf-vpn-common:op-up"
                         }
                       }
                     },
                     {
                       "sap-id": "sap#42",
                       "peer-sap-id": ["ce-4"],
                       "sap-status": {
                         "status": "ietf-vpn-common:op-up"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-up"
                         },
                         "oper-status": {
                           "status": "ietf-vpn-common:op-up"
                         }
                       }
                     },
                     {
                       "sap-id": "sap#43",
                       "sap-status": {
                         "status": "ietf-vpn-common:op-down"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-down"
                         }
                       }
                     },
                     {
                       "sap-id": "sap#44",
                       "peer-sap-id": ["ce-5"],
                       "sap-status": {
                         "status": "ietf-vpn-common:op-up"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-up"
                         },
                         "oper-status": {
                           "status": "ietf-vpn-common:op-up"
                         }
                       }
                     }
                   ]
                 }
               ]
             }
           ]
         }
       ]
     }
   }

                 Figure 7: A Simplified SAP Network Example
```

---
# **Appendix B.  A Simple Example of the SAP Network Model: Node Filter**

그림 8의 예에서 PE1\(그림 7과 같이 "node-id"가 "example:pe1"로 설정됨\)에는 두 개의 물리적 인터페이스 "GE0/6/1" 및 "GE0/6/4"가 있습니다. . 두 개의 하위 인터페이스 "GE0/6/4.1" 및 "GE0/6/4.2"는 물리적 인터페이스 "GE0/6/4"와 연결됩니다. 4개의 SAP가 서비스 오케스트레이터에 노출되고 이러한 물리적 인터페이스 및 하위 인터페이스에 매핑된다고 가정해 보겠습니다.

```text
                  .-------------------------.
                  |                 GE0/6/4 |
                  | PE1                .----+----.
                  |                    |sap#2    |GE0/6/4.1
                  |                    |      .--+--.
                  |                    |      |sap#3|
                  |                    |      '--+--'
                  |                    |         |GE0/6/4.2
                  |                    |      .--+--.
                  |                    |      |sap#4|
                  |                    |      '--+--'
                  |                    |         |
                  |                    +----+----+
                  |                         |
                  |                  GE0/6/1|
                  |                    .----+----.
                  |                    |sap#1    |
                  |                    '----+----'
                  |                         |
                  '-------------------------'
```

- 그림 8: PE 및 물리적/논리적 인터페이스의 예

물리적 인터페이스 "GE0/6/1"과 연결된 SAP에 대해 아직 활성화된 서비스가 없다고 가정합니다. 또한 물리적 인터페이스 "GE0/6/4"와 연결된 SAP의 경우 VPLS 및 L3VPN 서비스가 두 개의 하위 인터페이스 "GE0/6/4.1" 및 "GE0/6/"에서 활성화된다고 가정합니다. 각각 4.2인치. "sap#1" 및 "sap#2" 모두 서비스별 하위 인터페이스를 호스팅할 수 있는 것으로 태그가 지정됩니다\('allows-child-saps'가 'true'로 설정됨\).

예를 들어 서비스 오케스트레이터는 RESTCONF GET 요청을 전송하여 네트워크 컨트롤러에서 PE1의 어떤 SAP에 어떤 서비스가 제공되는지 쿼리할 수 있습니다. 그림 9는 네트워크 컨트롤러에서 받은 RESTCONF 응답 본문의 예를 보여줍니다.

```text
   {
     "ietf-sap-ntw:service": [
       {
         "service-type": "ietf-vpn-common:l3vpn",
         "sap": [
           {
             "sap-id": "sap#1",
             "description": "Ready to host SAPs",
             "attachment-interface": "GE0/6/1",
             "interface-type": "ietf-sap-ntw:phy",
             "role": "ietf-sap-ntw:uni",
             "allows-child-saps": true,
             "sap-status": {
               "status": "ietf-vpn-common:op-up"
             }
           },
           {
             "sap-id": "sap#2",
             "description": "Ready to host SAPs",
             "attachment-interface": "GE0/6/4",
             "interface-type": "ietf-sap-ntw:phy",
             "role": "ietf-sap-ntw:uni",
             "allows-child-saps": true,
             "sap-status": {
               "status": "ietf-vpn-common:op-up"
             }
           },
           {
             "sap-id": "sap#3",
             "description": "A first SAP description",
             "parent-termination-point": "GE0/6/4",
             "attachment-interface": "GE0/6/4.1",
             "interface-type": "ietf-sap-ntw:logical",
             "encapsulation-type": "ietf-vpn-common:vlan-type",
             "sap-status": {
               "status": "ietf-vpn-common:op-up"
             },
             "service-status": {
               "admin-status": {
                 "status": "ietf-vpn-common:admin-up"
               },
               "oper-status": {
                 "status": "ietf-vpn-common:op-up"
               }
             }
           }
         ]
       },
       {
         "service-type": "ietf-vpn-common:vpls",
         "sap": [
           {
             "sap-id": "sap#1",
             "description": "Ready to host SAPs",
             "attachment-interface": "GE0/6/1",
             "interface-type": "ietf-sap-ntw:phy",
             "role": "ietf-sap-ntw:uni",
             "allows-child-saps": true,
             "sap-status": {
               "status": "ietf-vpn-common:op-up"
             }
           },
           {
             "sap-id": "sap#2",
             "description": "Ready to host SAPs",
             "attachment-interface": "GE0/6/4",
             "interface-type": "ietf-sap-ntw:phy",
             "role": "ietf-sap-ntw:uni",
             "allows-child-saps": true,
             "sap-status": {
               "status": "ietf-vpn-common:op-up"
             }
           },
           {
             "sap-id": "sap#4",
             "description": "Another description",
             "parent-termination-point": "GE0/6/4",
             "attachment-interface": "GE0/6/4.2",
             "interface-type": "ietf-sap-ntw:logical",
             "encapsulation-type": "ietf-vpn-common:vlan-type",
             "sap-status": {
               "status": "ietf-vpn-common:op-up"
             },
             "service-status": {
               "admin-status": {
                 "status": "ietf-vpn-common:admin-up"
               },
               "oper-status": {
                 "status": "ietf-vpn-common:op-up"
               }
             }
           }
         ]
       }
     ]
   }
```

- 그림 9: 노드 필터가 있는 요청에 대한 응답 본문의 예

그림 10은 요청에 특정 노드에 대한 서비스 유형에 대한 필터가 포함된 경우 네트워크 컨트롤러에서 수신되는 응답 메시지 본문의 예를 보여줍니다.

```text
   {
     "ietf-sap-ntw:service": [
       {
         "service-type": "ietf-vpn-common:l3vpn",
         "sap": [
           {
             "sap-id": "sap#1",
             "description": "Ready to host SAPs",
             "attachment-interface": "GE0/6/1",
             "interface-type": "ietf-sap-ntw:phy",
             "role": "ietf-sap-ntw:uni",
             "allows-child-saps": true,
             "sap-status": {
               "status": "ietf-vpn-common:op-up"
             }
           },
           {
             "sap-id": "sap#2",
             "description": "Ready to host SAPs",
             "attachment-interface": "GE0/6/4",
             "interface-type": "ietf-sap-ntw:phy",
             "role": "ietf-sap-ntw:uni",
             "allows-child-saps": true,
             "sap-status": {
               "status": "ietf-vpn-common:op-up"
             }
           },
           {
             "sap-id": "sap#3",
             "description": "A first SAP description",
             "parent-termination-point": "GE0/6/4",
             "attachment-interface": "GE0/6/4.1",
             "interface-type": "ietf-sap-ntw:logical",
             "encapsulation-type": "ietf-vpn-common:vlan-type",
             "sap-status": {
               "status": "ietf-vpn-common:op-up"
             },
             "service-status": {
               "admin-status": {
                 "status": "ietf-vpn-common:admin-up"
               },
               "oper-status": {
                 "status": "ietf-vpn-common:op-up"
               }
             }
           }
         ]
       }
     ]
   }

        Figure 10: An Example of a Response Body to a Request with a
                               Service Filter
```

---
# **Appendix C.  An Example of an NNI SAP: Inter-AS VPN Option A**

\[RFC4364\]의 섹션 10에서는 단일 AS\(자율 시스템\)의 범위를 넘어 VPN 서비스를 확장하는 몇 가지 옵션에 대해 설명합니다. 설명을 위해 이 섹션에서는 소위 "옵션 A"에 중점을 두지만 다른 옵션에 대해서도 유사한 예를 고려할 수 있습니다.

이 옵션에서는 AS의 ASBR\(AS Border Router\)이 이웃 AS의 ASBR에 직접 연결됩니다. 이 두 ASBR은 여러 물리적 또는 논리적 인터페이스로 연결됩니다. 또한 하나의 AS에서 다른 AS로 경로를 전달해야 하는 각 VPN에 대해 이러한 ASBR에 의해 적어도 하나의 하위 인터페이스가 유지됩니다. 각 ASBR은 PE로 작동하고 다른 ASBR을 CE인 것처럼 취급합니다.

그림 11은 두 AS 사이의 상호 연결 링크에 중점을 둔 두 AS A와 B의 단순화된\(발췌\) 토폴로지를 보여줍니다.

```text
    .--------------------.                      .--------------------.
    |                    |                      |                    |
    |              A  .--+--.                .--+--.  A              |
    |              S  |     +================+     |  S              |
    |              B  | (VRF1)----(VPN1)----(VRF1) |  B              |
    |              R  |     |                |     |  R              |
    |                 | (VRF2)----(VPN2)----(VRF2) |                 |
    |              a  |     +================+     |  b              |
    |              1  '--+--'                '--+--'  1              |
    |     AS A           |                      |         AS B       |
    |              A  .--+--.                .--+--.  A              |
    |              S  |     +================+     |  S              |
    |              B  | (VRF1)----(VPN1)----(VRF1) |  B              |
    |              R  |     |                |     |  R              |
    |                 | (VRF2)----(VPN2)----(VRF2) |                 |
    |              a  |     +================+     |  b              |
    |              2  '--+--'                '--+--'  2              |
    |                    |                      |                    |
    '--------------------'                      '--------------------'

            Figure 11: An Example of an Inter-AS VPN (Option A)
```

그림 12는 A A의 네트워크 컨트롤러에서 수신한 메시지 본문의 예를 보여줍니다\(그림 11에 표시된 NNI에 중점을 둡니다\).

```text
   {
     "ietf-network:networks": {
       "network": [
         {
           "network-types": {
             "ietf-sap-ntw:sap-network": {
               "service-type": [
                 "ietf-vpn-common:l3vpn"
               ]
             }
           },
           "network-id": "example:an-id",
           "node": [
             {
               "node-id": "example:asbr-a1",
               "ietf-sap-ntw:service": [
                 {
                   "service-type": "ietf-vpn-common:l3vpn",
                   "sap": [
                     {
                       "sap-id": "sap#11",
                       "description": "parent inter-as link#1",
                       "role": "ietf-sap-ntw:nni",
                       "allows-child-saps": true,
                       "peer-sap-id": ["asbr-b1"],
                       "sap-status": {
                         "status": "ietf-vpn-common:op-up"
                       }
                     },
                     {
                       "sap-id": "sap#12",
                       "description": "parent inter-as link#2",
                       "role": "ietf-sap-ntw:nni",
                       "allows-child-saps": true,
                       "peer-sap-id": ["asbr-b1"],
                       "sap-status": {
                         "status": "ietf-vpn-common:op-up"
                       }
                     },
                     {
                       "sap-id": "sap#13",
                       "description": "vpn1",
                       "role": "ietf-sap-ntw:nni",
                       "peer-sap-id": ["asbr-b1"],
                       "sap-status": {
                         "status": "ietf-vpn-common:op-up"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-up"
                         },
                         "oper-status": {
                           "status": "ietf-vpn-common:op-up"
                         }
                       }
                     },
                     {
                       "sap-id": "sap#14",
                       "description": "vpn2",
                       "role": "ietf-sap-ntw:nni",
                       "peer-sap-id": ["asbr-b1"],
                       "sap-status": {
                         "status": "ietf-vpn-common:op-up"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-up"
                         },
                         "oper-status": {
                           "status": "ietf-vpn-common:op-up"
                         }
                       }
                     }
                   ]
                 }
               ]
             },
             {
               "node-id": "example:asbr-a2",
               "ietf-sap-ntw:service": [
                 {
                   "service-type": "ietf-vpn-common:l3vpn",
                   "sap": [
                     {
                       "sap-id": "sap#11",
                       "description": "parent inter-as link#1",
                       "role": "ietf-sap-ntw:nni",
                       "allows-child-saps": true,
                       "peer-sap-id": ["asbr-b2"],
                       "sap-status": {
                         "status": "ietf-vpn-common:op-up"
                       }
                     },
                     {
                       "sap-id": "sap#12",
                       "description": "parent inter-as link#2",
                       "role": "ietf-sap-ntw:nni",
                       "allows-child-saps": true,
                       "peer-sap-id": ["asbr-b2"],
                       "sap-status": {
                         "status": "ietf-vpn-common:op-up"
                       }
                     },
                     {
                       "sap-id": "sap#21",
                       "description": "vpn1",
                       "role": "ietf-sap-ntw:nni",
                       "peer-sap-id": ["asbr-b2"],
                       "sap-status": {
                         "status": "ietf-vpn-common:op-up"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-up"
                         },
                         "oper-status": {
                           "status": "ietf-vpn-common:op-up"
                         }
                       }
                     },
                     {
                       "sap-id": "sap#22",
                       "description": "vpn2",
                       "role": "ietf-sap-ntw:nni",
                       "peer-sap-id": ["asbr-b2"],
                       "sap-status": {
                         "status": "ietf-vpn-common:op-up"
                       },
                       "service-status": {
                         "admin-status": {
                           "status": "ietf-vpn-common:admin-up"
                         },
                         "oper-status": {
                           "status": "ietf-vpn-common:op-up"
                         }
                       }
                     }
                   ]
                 }
               ]
             }
           ]
         }
       ]
     }
   }
```

- 그림 12: NNI에 대한 SAP 사용 예

---
# **Appendix D.  Examples of Using the SAP Network Model in Service Creation**

이 섹션에서는 서비스 생성 목적으로 SAP 모델을 사용하는 예를 설명합니다.

그림 7에는 SAP 토폴로지의 예가 나와 있습니다. 이 예에는 SAP와 함께 4개의 PE와 고객 정보가 포함되어 있습니다.

운영자가 두 개의 CE\(CE6 및 CE7\)를 서비스하는 두 개의 PE\(PE3 및 PE4\) 간에 L3VPN 서비스를 생성하려고 한다고 가정해 보겠습니다. 이를 위해 운영자는 SAP 토폴로지를 쿼리하고 그림 7에 묘사된 것과 유사한 응답을 얻습니다. 이 응답은 "sap#31" 및 "sap#43"을 첨부 식별자로 갖는 SAP에 첨부 파일 식별자가 없음을 나타냅니다. 설치된 서비스. 이는 특히 \(1\) 이 두 SAP에서 지원하는 모든 서비스에 대해 'ietf-vpn-common:admin-down'으로 설정된 관리 '서비스 상태' 및 \(2\) 이상 현상이 없음에서 유추됩니다. 섹션 5에서 논의되었습니다. 섹션 5에서 논의된 이상 징후 중 어느 것도 감지되지 않습니다. "무료" SAP가 식별되면 요청된 L3VPN 서비스가 SAP 특성과 호환되는지 확인하기 위해 '인터페이스 유형' 및 '캡슐화 유형'을 확인합니다. 호환되는 경우 'attachment-id' 값을 L3NM "만들기" 쿼리에서 VPN 네트워크 액세스 식별자로 사용할 수 있습니다.

소위 "Inter-AS VPN 옵션 A" 서비스를 생성하기 위해 유사한 프로세스를 따를 수 있습니다. 이전 예와 달리 운영자가 두 PE\(PE3 및 PE4\) 간에 L3VPN 서비스를 생성하려고 하지만 이러한 PE가 동일한 AS에 있지 않다고 가정해 보겠습니다. PE3은 A에 속하고 PE4는 AS B에 속합니다. 이러한 AS는 그림 11에 나와 있습니다. AS A의 운영자는 AS의 컨트롤러를 통해 SAP 토폴로지를 쿼리하고 그림 7에 표시된 정보뿐만 아니라 NNI를 나타내는 그림 12에 표시된 정보도 얻습니다. . 운영자는 PE3와 ASBR A1의 호환 가능한 무료 SAP 사이의 AS A에서 서비스를 생성합니다. 동일한 절차에 따라 AS B 운영자는 ASBR B1과 PE4의 무료 호환 SAP 사이에서 AS B의 서비스를 생성합니다. L3NM을 사용하여 이러한 각 AS에서 서비스를 프로비저닝할 수 있습니다.

이제 운영자가 L3VPN 서비스 대신 L2VPN 서비스를 설정하려고 한다고 가정해 보겠습니다. 'interface-type'이 물리적 포트인 경우 서비스 요구 사항에 대처하기 위해 SAP 모델을 사용하여 새로운 논리적 SAP를 생성할 수 있습니다\(예: 'encapsulation-type' 속성을 'ietf-vpn-common:으로 설정할 수 있음\). VLAN 유형'\). 논리적 SAP가 생성되면 새 SAP의 'attachment-id'를 사용하여 L2NM 인스턴스를 생성합니다\(\[RFC9291\]의 섹션 7.6\).

---
# **Acknowledgements**

의견을 주신 Adrian Farrel, Daniel King, Dhruv Dhody, Benoit Claise, Bo Wu, Erez Segev, Raul Arco, Joe Clarke, Riyas Valiyapalathingal, Tom Petch, Olga Havel 및 Richard Roberts에게 감사드립니다.

YANG Doctors 리뷰의 Martin Björklund, opsdir 리뷰의 Menachem Dodge, rtgdir 리뷰의 Mach Chen, genart 리뷰의 Linda Dunbar, secdir 리뷰의 Ivaylo Petrov에게 감사드립니다.

Shepherd를 검토한 Adrian Farrel과 신중한 AD 검토를 한 Rob Wilton에게 특별히 감사드립니다.

IESG 검토 동안 의견을 주신 Lars Eggert, Roman Danyliw 및 Zaheduzzaman Sarker에게 감사드립니다.

---
# **Authors' Addresses**

```text
   Mohamed Boucadair (editor)
   Orange
   France
   Email: mohamed.boucadair@orange.com

   Oscar Gonzalez de Dios
   Telefonica
   Madrid
   Spain
   Email: oscar.gonzalezdedios@telefonica.com

   Samier Barguil
   Nokia
   Madrid
   Spain
   Email: samier.barguil_giraldo@nokia.com

   Qin Wu
   Huawei
   Yuhua District
   101 Software Avenue
   Nanjing
   Jiangsu, 210012
   China
   Email: bill.wu@huawei.com

   Victor Lopez
   Nokia
   Spain
   Email: victor.lopez@nokia.com
```
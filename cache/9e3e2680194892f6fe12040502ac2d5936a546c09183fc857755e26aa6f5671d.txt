   NAT와 방화벽은 종단간 경로를 따라 존재할 수 있는 중간 장치("미들박스")의 예입니다. 미들박스는 일반적으로 흐름별 상태를 유지하는 데 필요한 기능을 수행합니다. TCP와 같은 연결 지향 프로토콜의 경우 미들박스는 연결 관리 정보를 스누핑하고 구문 분석하며 그에 따라 흐름별 상태를 생성하고 삭제합니다. UDP와 같은 비연결 프로토콜의 경우 이 접근 방식은 불가능합니다. 결과적으로 미들박스는 일부 로컬 기준에 따라 새로운 흐름을 나타내는 패킷을 볼 때 흐름별 상태를 생성하고, 동일한 흐름에 속하는 패킷이 도착하지 않은 일정 시간이 지나면 상태를 삭제할 수 있습니다.
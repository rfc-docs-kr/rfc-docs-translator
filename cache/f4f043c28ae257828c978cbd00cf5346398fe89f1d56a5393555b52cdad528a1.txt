   NAT를 통해 IPsec 연결을 열면 특별한 문제가 발생합니다. 연결이 전송 모드에서 실행되는 경우 패킷의 IP 주소를 변경하면 체크섬이 실패하고 NAT는 체크섬이 암호화되어 보호되므로 체크섬을 수정할 수 없습니다. 터널 모드에서도 AH 및 ESP 패킷의 주소를 투명하게 변환하려면 NAT에서 특수 논리가 필요하고 해당 논리는 경험적이며 본질적으로 신뢰할 수 없기 때문에 라우팅 문제가 있습니다. 이러한 이유로 IKEv2는 IKE 및 ESP 패킷의 UDP 캡슐화를 사용합니다. 이 인코딩은 효율성이 약간 떨어지지만 NAT가 처리하기는 더 쉽습니다. 또한 방화벽은 UDP로 캡슐화된 IPsec 트래픽을 전달하지만 캡슐화되지 않은 일반 ESP/AH는 전달하지 않도록 구성할 수 있으며 그 반대의 경우도 마찬가지입니다.